<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 R Regression Models | Data Science Workshops</title>
  <meta name="description" content="3 R Regression Models | Data Science Workshops" />
  <meta name="generator" content="bookdown 0.13 and GitBook 2.6.7" />

  <meta property="og:title" content="3 R Regression Models | Data Science Workshops" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="3 R Regression Models | Data Science Workshops" />
  <meta name="github-repo" content="IQSS/dss-workshops-redux" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 R Regression Models | Data Science Workshops" />
  
  <meta name="twitter:description" content="3 R Regression Models | Data Science Workshops" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="Rintro.html"/>
<link rel="next" href="Rgraphics.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Science Workshop Materials</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#table-of-contents"><i class="fa fa-check"></i>Table of Contents</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#authors-and-sources"><i class="fa fa-check"></i>Authors and Sources</a></li>
</ul></li>
<li class="part"><span><b>I General</b></span></li>
<li class="chapter" data-level="1" data-path="DataScienceTools.html"><a href="DataScienceTools.html"><i class="fa fa-check"></i><b>1</b> Data Science Tools</a><ul>
<li class="chapter" data-level="1.1" data-path="DataScienceTools.html"><a href="DataScienceTools.html#tools-for-working-with-data"><i class="fa fa-check"></i><b>1.1</b> Tools for working with data</a></li>
<li class="chapter" data-level="1.2" data-path="DataScienceTools.html"><a href="DataScienceTools.html#the-puzzle-pieces"><i class="fa fa-check"></i><b>1.2</b> The puzzle pieces</a><ul>
<li class="chapter" data-level="1.2.1" data-path="DataScienceTools.html"><a href="DataScienceTools.html#data-analysis-building-blocks"><i class="fa fa-check"></i><b>1.2.1</b> Data analysis building blocks</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="DataScienceTools.html"><a href="DataScienceTools.html#examples"><i class="fa fa-check"></i><b>1.3</b> Examples</a><ul>
<li class="chapter" data-level="1.3.1" data-path="DataScienceTools.html"><a href="DataScienceTools.html#old-school-example"><i class="fa fa-check"></i><b>1.3.1</b> Old-school example</a></li>
<li class="chapter" data-level="1.3.2" data-path="DataScienceTools.html"><a href="DataScienceTools.html#something-old-something-new"><i class="fa fa-check"></i><b>1.3.2</b> Something old &amp; something new</a></li>
<li class="chapter" data-level="1.3.3" data-path="DataScienceTools.html"><a href="DataScienceTools.html#a-modern-version"><i class="fa fa-check"></i><b>1.3.3</b> A modern version</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="DataScienceTools.html"><a href="DataScienceTools.html#data-storage-retrieval"><i class="fa fa-check"></i><b>1.4</b> Data storage &amp; retrieval</a><ul>
<li class="chapter" data-level="1.4.1" data-path="DataScienceTools.html"><a href="DataScienceTools.html#text-files"><i class="fa fa-check"></i><b>1.4.1</b> Text files</a></li>
<li class="chapter" data-level="1.4.2" data-path="DataScienceTools.html"><a href="DataScienceTools.html#binary-files"><i class="fa fa-check"></i><b>1.4.2</b> Binary files</a></li>
<li class="chapter" data-level="1.4.3" data-path="DataScienceTools.html"><a href="DataScienceTools.html#databases"><i class="fa fa-check"></i><b>1.4.3</b> Databases</a></li>
<li class="chapter" data-level="1.4.4" data-path="DataScienceTools.html"><a href="DataScienceTools.html#distributed-file-storage"><i class="fa fa-check"></i><b>1.4.4</b> Distributed file storage</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="DataScienceTools.html"><a href="DataScienceTools.html#programming-languages-statistics-packages"><i class="fa fa-check"></i><b>1.5</b> Programming languages &amp; statistics packages</a><ul>
<li class="chapter" data-level="1.5.1" data-path="DataScienceTools.html"><a href="DataScienceTools.html#programming-language-features"><i class="fa fa-check"></i><b>1.5.1</b> Programming language features</a></li>
<li class="chapter" data-level="1.5.2" data-path="DataScienceTools.html"><a href="DataScienceTools.html#program-comparison"><i class="fa fa-check"></i><b>1.5.2</b> Program comparison</a></li>
<li class="chapter" data-level="1.5.3" data-path="DataScienceTools.html"><a href="DataScienceTools.html#examples-read-data-from-a-file-summarize"><i class="fa fa-check"></i><b>1.5.3</b> Examples: Read data from a file &amp; summarize</a></li>
<li class="chapter" data-level="1.5.4" data-path="DataScienceTools.html"><a href="DataScienceTools.html#examples-fit-a-linear-regression"><i class="fa fa-check"></i><b>1.5.4</b> Examples: Fit a linear regression</a></li>
<li class="chapter" data-level="1.5.5" data-path="DataScienceTools.html"><a href="DataScienceTools.html#examples-extract-links-for-.html-file"><i class="fa fa-check"></i><b>1.5.5</b> Examples: Extract links for .html file</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="DataScienceTools.html"><a href="DataScienceTools.html#creating-reports"><i class="fa fa-check"></i><b>1.6</b> Creating reports</a><ul>
<li class="chapter" data-level="1.6.1" data-path="DataScienceTools.html"><a href="DataScienceTools.html#markup-languages"><i class="fa fa-check"></i><b>1.6.1</b> Markup languages</a></li>
<li class="chapter" data-level="1.6.2" data-path="DataScienceTools.html"><a href="DataScienceTools.html#word-processors"><i class="fa fa-check"></i><b>1.6.2</b> Word processors</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="DataScienceTools.html"><a href="DataScienceTools.html#text-editors-integrated-development-environments"><i class="fa fa-check"></i><b>1.7</b> Text editors &amp; Integrated Development Environments</a><ul>
<li class="chapter" data-level="1.7.1" data-path="DataScienceTools.html"><a href="DataScienceTools.html#language-specific-editors-ides"><i class="fa fa-check"></i><b>1.7.1</b> Language specific editors &amp; IDEs</a></li>
<li class="chapter" data-level="1.7.2" data-path="DataScienceTools.html"><a href="DataScienceTools.html#general-purpose-editors-ides"><i class="fa fa-check"></i><b>1.7.2</b> General purpose editors &amp; IDEs</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="DataScienceTools.html"><a href="DataScienceTools.html#literate-programming-notebooks"><i class="fa fa-check"></i><b>1.8</b> Literate programming &amp; notebooks</a><ul>
<li class="chapter" data-level="1.8.1" data-path="DataScienceTools.html"><a href="DataScienceTools.html#literate-programming"><i class="fa fa-check"></i><b>1.8.1</b> Literate programming</a></li>
<li class="chapter" data-level="1.8.2" data-path="DataScienceTools.html"><a href="DataScienceTools.html#notebooks"><i class="fa fa-check"></i><b>1.8.2</b> Notebooks</a></li>
</ul></li>
<li class="chapter" data-level="1.9" data-path="DataScienceTools.html"><a href="DataScienceTools.html#big-data-annoying-data-computationally-intensive-methods"><i class="fa fa-check"></i><b>1.9</b> Big data, annoying data, &amp; computationally intensive methods</a><ul>
<li class="chapter" data-level="1.9.1" data-path="DataScienceTools.html"><a href="DataScienceTools.html#computing-clusters-at-harvard"><i class="fa fa-check"></i><b>1.9.1</b> Computing clusters at Harvard</a></li>
</ul></li>
<li class="chapter" data-level="1.10" data-path="DataScienceTools.html"><a href="DataScienceTools.html#wrap-up"><i class="fa fa-check"></i><b>1.10</b> Wrap up</a><ul>
<li class="chapter" data-level="1.10.1" data-path="DataScienceTools.html"><a href="DataScienceTools.html#feedback"><i class="fa fa-check"></i><b>1.10.1</b> Feedback</a></li>
<li class="chapter" data-level="1.10.2" data-path="DataScienceTools.html"><a href="DataScienceTools.html#resources"><i class="fa fa-check"></i><b>1.10.2</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II R</b></span></li>
<li class="chapter" data-level="2" data-path="Rintro.html"><a href="Rintro.html"><i class="fa fa-check"></i><b>2</b> R Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="Rintro.html"><a href="Rintro.html#setup"><i class="fa fa-check"></i><b>2.1</b> Setup</a><ul>
<li class="chapter" data-level="2.1.1" data-path="Rintro.html"><a href="Rintro.html#software-materials"><i class="fa fa-check"></i><b>2.1.1</b> Software &amp; materials</a></li>
<li class="chapter" data-level="2.1.2" data-path="Rintro.html"><a href="Rintro.html#goals"><i class="fa fa-check"></i><b>2.1.2</b> Goals</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="Rintro.html"><a href="Rintro.html#r-interfaces"><i class="fa fa-check"></i><b>2.2</b> R Interfaces</a></li>
<li class="chapter" data-level="2.3" data-path="Rintro.html"><a href="Rintro.html#exercise-0"><i class="fa fa-check"></i><b>2.3</b> Exercise 0</a></li>
<li class="chapter" data-level="2.4" data-path="Rintro.html"><a href="Rintro.html#r-basics"><i class="fa fa-check"></i><b>2.4</b> R basics</a><ul>
<li class="chapter" data-level="2.4.1" data-path="Rintro.html"><a href="Rintro.html#function-calls"><i class="fa fa-check"></i><b>2.4.1</b> Function calls</a></li>
<li class="chapter" data-level="2.4.2" data-path="Rintro.html"><a href="Rintro.html#assignment"><i class="fa fa-check"></i><b>2.4.2</b> Assignment</a></li>
<li class="chapter" data-level="2.4.3" data-path="Rintro.html"><a href="Rintro.html#asking-r-for-help"><i class="fa fa-check"></i><b>2.4.3</b> Asking R for help</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="Rintro.html"><a href="Rintro.html#getting-data-into-r"><i class="fa fa-check"></i><b>2.5</b> Getting data into R</a><ul>
<li class="chapter" data-level="2.5.1" data-path="Rintro.html"><a href="Rintro.html#installing-using-r-packages"><i class="fa fa-check"></i><b>2.5.1</b> Installing &amp; using R packages</a></li>
<li class="chapter" data-level="2.5.2" data-path="Rintro.html"><a href="Rintro.html#readers-for-common-file-types"><i class="fa fa-check"></i><b>2.5.2</b> Readers for common file types</a></li>
<li class="chapter" data-level="2.5.3" data-path="Rintro.html"><a href="Rintro.html#baby-names-data"><i class="fa fa-check"></i><b>2.5.3</b> Baby names data</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="Rintro.html"><a href="Rintro.html#exercise-1"><i class="fa fa-check"></i><b>2.6</b> Exercise 1</a></li>
<li class="chapter" data-level="2.7" data-path="Rintro.html"><a href="Rintro.html#popularity-of-your-name"><i class="fa fa-check"></i><b>2.7</b> Popularity of your name</a><ul>
<li class="chapter" data-level="2.7.1" data-path="Rintro.html"><a href="Rintro.html#filtering-selecting-arranging-data"><i class="fa fa-check"></i><b>2.7.1</b> Filtering, selecting, &amp; arranging data</a></li>
<li class="chapter" data-level="2.7.2" data-path="Rintro.html"><a href="Rintro.html#other-logical-operators"><i class="fa fa-check"></i><b>2.7.2</b> Other logical operators</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="Rintro.html"><a href="Rintro.html#exercise-2.1"><i class="fa fa-check"></i><b>2.8</b> Exercise 2.1</a></li>
<li class="chapter" data-level="2.9" data-path="Rintro.html"><a href="Rintro.html#pipe-operator-in-r"><i class="fa fa-check"></i><b>2.9</b> Pipe operator in R</a></li>
<li class="chapter" data-level="2.10" data-path="Rintro.html"><a href="Rintro.html#exercise-2.2"><i class="fa fa-check"></i><b>2.10</b> Exercise 2.2</a></li>
<li class="chapter" data-level="2.11" data-path="Rintro.html"><a href="Rintro.html#plotting-baby-name-trends-over-time"><i class="fa fa-check"></i><b>2.11</b> Plotting baby name trends over time</a></li>
<li class="chapter" data-level="2.12" data-path="Rintro.html"><a href="Rintro.html#exercise-3"><i class="fa fa-check"></i><b>2.12</b> Exercise 3</a></li>
<li class="chapter" data-level="2.13" data-path="Rintro.html"><a href="Rintro.html#finding-the-most-popular-names"><i class="fa fa-check"></i><b>2.13</b> Finding the most popular names</a><ul>
<li class="chapter" data-level="2.13.1" data-path="Rintro.html"><a href="Rintro.html#computing-better-measures-of-popularity"><i class="fa fa-check"></i><b>2.13.1</b> Computing better measures of popularity</a></li>
<li class="chapter" data-level="2.13.2" data-path="Rintro.html"><a href="Rintro.html#operating-by-group"><i class="fa fa-check"></i><b>2.13.2</b> Operating by group</a></li>
</ul></li>
<li class="chapter" data-level="2.14" data-path="Rintro.html"><a href="Rintro.html#exercise-4"><i class="fa fa-check"></i><b>2.14</b> Exercise 4</a></li>
<li class="chapter" data-level="2.15" data-path="Rintro.html"><a href="Rintro.html#percent-choosing-one-of-the-top-10-names"><i class="fa fa-check"></i><b>2.15</b> Percent choosing one of the top 10 names</a></li>
<li class="chapter" data-level="2.16" data-path="Rintro.html"><a href="Rintro.html#exercise-5"><i class="fa fa-check"></i><b>2.16</b> Exercise 5</a></li>
<li class="chapter" data-level="2.17" data-path="Rintro.html"><a href="Rintro.html#saving-our-work"><i class="fa fa-check"></i><b>2.17</b> Saving our Work</a><ul>
<li class="chapter" data-level="2.17.1" data-path="Rintro.html"><a href="Rintro.html#saving-individual-datasets"><i class="fa fa-check"></i><b>2.17.1</b> Saving individual datasets</a></li>
<li class="chapter" data-level="2.17.2" data-path="Rintro.html"><a href="Rintro.html#saving-multiple-datasets"><i class="fa fa-check"></i><b>2.17.2</b> Saving multiple datasets</a></li>
<li class="chapter" data-level="2.17.3" data-path="Rintro.html"><a href="Rintro.html#saving-loading-r-workspaces"><i class="fa fa-check"></i><b>2.17.3</b> Saving &amp; loading R workspaces</a></li>
</ul></li>
<li class="chapter" data-level="2.18" data-path="Rintro.html"><a href="Rintro.html#exercise-solutions"><i class="fa fa-check"></i><b>2.18</b> Exercise solutions</a><ul>
<li class="chapter" data-level="2.18.1" data-path="Rintro.html"><a href="Rintro.html#ex-0-prototype"><i class="fa fa-check"></i><b>2.18.1</b> Ex 0: prototype</a></li>
<li class="chapter" data-level="2.18.2" data-path="Rintro.html"><a href="Rintro.html#ex-1-prototype"><i class="fa fa-check"></i><b>2.18.2</b> Ex 1: prototype</a></li>
<li class="chapter" data-level="2.18.3" data-path="Rintro.html"><a href="Rintro.html#ex-2.1-prototype"><i class="fa fa-check"></i><b>2.18.3</b> Ex 2.1: prototype</a></li>
<li class="chapter" data-level="2.18.4" data-path="Rintro.html"><a href="Rintro.html#ex-2.2-prototype"><i class="fa fa-check"></i><b>2.18.4</b> Ex 2.2: prototype</a></li>
<li class="chapter" data-level="2.18.5" data-path="Rintro.html"><a href="Rintro.html#ex-3-prototype"><i class="fa fa-check"></i><b>2.18.5</b> Ex 3: prototype</a></li>
<li class="chapter" data-level="2.18.6" data-path="Rintro.html"><a href="Rintro.html#ex-4-prototype"><i class="fa fa-check"></i><b>2.18.6</b> Ex 4: prototype</a></li>
<li class="chapter" data-level="2.18.7" data-path="Rintro.html"><a href="Rintro.html#ex-5-prototype"><i class="fa fa-check"></i><b>2.18.7</b> Ex 5: prototype</a></li>
</ul></li>
<li class="chapter" data-level="2.19" data-path="Rintro.html"><a href="Rintro.html#wrap-up-1"><i class="fa fa-check"></i><b>2.19</b> Wrap-up</a><ul>
<li class="chapter" data-level="2.19.1" data-path="Rintro.html"><a href="Rintro.html#feedback-1"><i class="fa fa-check"></i><b>2.19.1</b> Feedback</a></li>
<li class="chapter" data-level="2.19.2" data-path="Rintro.html"><a href="Rintro.html#resources-1"><i class="fa fa-check"></i><b>2.19.2</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="Rmodels.html"><a href="Rmodels.html"><i class="fa fa-check"></i><b>3</b> R Regression Models</a><ul>
<li class="chapter" data-level="3.1" data-path="Rmodels.html"><a href="Rmodels.html#setup-1"><i class="fa fa-check"></i><b>3.1</b> Setup</a><ul>
<li class="chapter" data-level="3.1.1" data-path="Rmodels.html"><a href="Rmodels.html#software-materials-1"><i class="fa fa-check"></i><b>3.1.1</b> Software &amp; materials</a></li>
<li class="chapter" data-level="3.1.2" data-path="Rmodels.html"><a href="Rmodels.html#goals-1"><i class="fa fa-check"></i><b>3.1.2</b> Goals</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="Rmodels.html"><a href="Rmodels.html#before-fitting-a-model"><i class="fa fa-check"></i><b>3.2</b> Before fitting a model</a><ul>
<li class="chapter" data-level="3.2.1" data-path="Rmodels.html"><a href="Rmodels.html#load-the-data"><i class="fa fa-check"></i><b>3.2.1</b> Load the data</a></li>
<li class="chapter" data-level="3.2.2" data-path="Rmodels.html"><a href="Rmodels.html#examine-the-data"><i class="fa fa-check"></i><b>3.2.2</b> Examine the data</a></li>
<li class="chapter" data-level="3.2.3" data-path="Rmodels.html"><a href="Rmodels.html#plot-the-data"><i class="fa fa-check"></i><b>3.2.3</b> Plot the data</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="Rmodels.html"><a href="Rmodels.html#models-with-continuous-outcomes"><i class="fa fa-check"></i><b>3.3</b> Models with continuous outcomes</a><ul>
<li class="chapter" data-level="3.3.1" data-path="Rmodels.html"><a href="Rmodels.html#why-is-the-association-between-expense-sat-scores-negative"><i class="fa fa-check"></i><b>3.3.1</b> Why is the association between expense &amp; SAT scores <em>negative</em>?</a></li>
<li class="chapter" data-level="3.3.2" data-path="Rmodels.html"><a href="Rmodels.html#the-lm-class-methods"><i class="fa fa-check"></i><b>3.3.2</b> The <code>lm</code> class &amp; methods</a></li>
<li class="chapter" data-level="3.3.3" data-path="Rmodels.html"><a href="Rmodels.html#ols-regression-assumptions"><i class="fa fa-check"></i><b>3.3.3</b> OLS regression assumptions</a></li>
<li class="chapter" data-level="3.3.4" data-path="Rmodels.html"><a href="Rmodels.html#comparing-models"><i class="fa fa-check"></i><b>3.3.4</b> Comparing models</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="Rmodels.html"><a href="Rmodels.html#exercise-0-1"><i class="fa fa-check"></i><b>3.4</b> Exercise 0</a></li>
<li class="chapter" data-level="3.5" data-path="Rmodels.html"><a href="Rmodels.html#interactions-factors"><i class="fa fa-check"></i><b>3.5</b> Interactions &amp; factors</a><ul>
<li class="chapter" data-level="3.5.1" data-path="Rmodels.html"><a href="Rmodels.html#modeling-interactions"><i class="fa fa-check"></i><b>3.5.1</b> Modeling interactions</a></li>
<li class="chapter" data-level="3.5.2" data-path="Rmodels.html"><a href="Rmodels.html#regression-with-categorical-predictors"><i class="fa fa-check"></i><b>3.5.2</b> Regression with categorical predictors</a></li>
<li class="chapter" data-level="3.5.3" data-path="Rmodels.html"><a href="Rmodels.html#setting-factor-reference-groups-contrasts"><i class="fa fa-check"></i><b>3.5.3</b> Setting factor reference groups &amp; contrasts</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="Rmodels.html"><a href="Rmodels.html#exercise-1-1"><i class="fa fa-check"></i><b>3.6</b> Exercise 1</a></li>
<li class="chapter" data-level="3.7" data-path="Rmodels.html"><a href="Rmodels.html#models-with-binary-outcomes"><i class="fa fa-check"></i><b>3.7</b> Models with binary outcomes</a><ul>
<li class="chapter" data-level="3.7.1" data-path="Rmodels.html"><a href="Rmodels.html#logistic-regression"><i class="fa fa-check"></i><b>3.7.1</b> Logistic regression</a></li>
<li class="chapter" data-level="3.7.2" data-path="Rmodels.html"><a href="Rmodels.html#logistic-regression-example"><i class="fa fa-check"></i><b>3.7.2</b> Logistic regression example</a></li>
<li class="chapter" data-level="3.7.3" data-path="Rmodels.html"><a href="Rmodels.html#logistic-regression-coefficients"><i class="fa fa-check"></i><b>3.7.3</b> Logistic regression coefficients</a></li>
<li class="chapter" data-level="3.7.4" data-path="Rmodels.html"><a href="Rmodels.html#packages-for-computing-graphing-predicted-values"><i class="fa fa-check"></i><b>3.7.4</b> Packages for computing &amp; graphing predicted values</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="Rmodels.html"><a href="Rmodels.html#exercise-2"><i class="fa fa-check"></i><b>3.8</b> Exercise 2</a></li>
<li class="chapter" data-level="3.9" data-path="Rmodels.html"><a href="Rmodels.html#multilevel-modeling"><i class="fa fa-check"></i><b>3.9</b> Multilevel modeling</a><ul>
<li class="chapter" data-level="3.9.1" data-path="Rmodels.html"><a href="Rmodels.html#multilevel-modeling-overview"><i class="fa fa-check"></i><b>3.9.1</b> Multilevel modeling overview</a></li>
<li class="chapter" data-level="3.9.2" data-path="Rmodels.html"><a href="Rmodels.html#the-exam-data"><i class="fa fa-check"></i><b>3.9.2</b> The Exam data</a></li>
<li class="chapter" data-level="3.9.3" data-path="Rmodels.html"><a href="Rmodels.html#the-null-model-icc"><i class="fa fa-check"></i><b>3.9.3</b> The null model &amp; ICC</a></li>
<li class="chapter" data-level="3.9.4" data-path="Rmodels.html"><a href="Rmodels.html#adding-fixed-effects-predictors"><i class="fa fa-check"></i><b>3.9.4</b> Adding fixed-effects predictors</a></li>
<li class="chapter" data-level="3.9.5" data-path="Rmodels.html"><a href="Rmodels.html#multiple-degree-of-freedom-comparisons"><i class="fa fa-check"></i><b>3.9.5</b> Multiple degree of freedom comparisons</a></li>
<li class="chapter" data-level="3.9.6" data-path="Rmodels.html"><a href="Rmodels.html#random-slopes"><i class="fa fa-check"></i><b>3.9.6</b> Random slopes</a></li>
<li class="chapter" data-level="3.9.7" data-path="Rmodels.html"><a href="Rmodels.html#test-the-significance-of-the-random-slope"><i class="fa fa-check"></i><b>3.9.7</b> Test the significance of the random slope</a></li>
</ul></li>
<li class="chapter" data-level="3.10" data-path="Rmodels.html"><a href="Rmodels.html#exercise-3-1"><i class="fa fa-check"></i><b>3.10</b> Exercise 3</a></li>
<li class="chapter" data-level="3.11" data-path="Rmodels.html"><a href="Rmodels.html#exercise-solutions-1"><i class="fa fa-check"></i><b>3.11</b> Exercise solutions</a><ul>
<li class="chapter" data-level="3.11.1" data-path="Rmodels.html"><a href="Rmodels.html#ex-0-prototype-1"><i class="fa fa-check"></i><b>3.11.1</b> Ex 0: prototype</a></li>
<li class="chapter" data-level="3.11.2" data-path="Rmodels.html"><a href="Rmodels.html#ex-1-prototype-1"><i class="fa fa-check"></i><b>3.11.2</b> Ex 1: prototype</a></li>
<li class="chapter" data-level="3.11.3" data-path="Rmodels.html"><a href="Rmodels.html#ex-2-prototype"><i class="fa fa-check"></i><b>3.11.3</b> Ex 2: prototype</a></li>
<li class="chapter" data-level="3.11.4" data-path="Rmodels.html"><a href="Rmodels.html#ex-3-prototype-1"><i class="fa fa-check"></i><b>3.11.4</b> Ex 3: prototype</a></li>
</ul></li>
<li class="chapter" data-level="3.12" data-path="Rmodels.html"><a href="Rmodels.html#wrap-up-2"><i class="fa fa-check"></i><b>3.12</b> Wrap-up</a><ul>
<li class="chapter" data-level="3.12.1" data-path="Rmodels.html"><a href="Rmodels.html#feedback-2"><i class="fa fa-check"></i><b>3.12.1</b> Feedback</a></li>
<li class="chapter" data-level="3.12.2" data-path="Rmodels.html"><a href="Rmodels.html#resources-2"><i class="fa fa-check"></i><b>3.12.2</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="Rgraphics.html"><a href="Rgraphics.html"><i class="fa fa-check"></i><b>4</b> R Graphics</a><ul>
<li class="chapter" data-level="4.1" data-path="Rgraphics.html"><a href="Rgraphics.html#setup-2"><i class="fa fa-check"></i><b>4.1</b> Setup</a><ul>
<li class="chapter" data-level="4.1.1" data-path="Rgraphics.html"><a href="Rgraphics.html#software-materials-2"><i class="fa fa-check"></i><b>4.1.1</b> Software &amp; materials</a></li>
<li class="chapter" data-level="4.1.2" data-path="Rgraphics.html"><a href="Rgraphics.html#goals-2"><i class="fa fa-check"></i><b>4.1.2</b> Goals</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="Rgraphics.html"><a href="Rgraphics.html#why-ggplot2"><i class="fa fa-check"></i><b>4.2</b> Why <code>ggplot2</code>?</a><ul>
<li class="chapter" data-level="4.2.1" data-path="Rgraphics.html"><a href="Rgraphics.html#what-is-the-grammar-of-graphics"><i class="fa fa-check"></i><b>4.2.1</b> What is the Grammar Of Graphics?</a></li>
<li class="chapter" data-level="4.2.2" data-path="Rgraphics.html"><a href="Rgraphics.html#ggplot2-vs-base-graphics"><i class="fa fa-check"></i><b>4.2.2</b> <code>ggplot2</code> VS base graphics</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="Rgraphics.html"><a href="Rgraphics.html#geometric-objects-aesthetics"><i class="fa fa-check"></i><b>4.3</b> Geometric objects &amp; aesthetics</a><ul>
<li class="chapter" data-level="4.3.1" data-path="Rgraphics.html"><a href="Rgraphics.html#aesthetic-mapping"><i class="fa fa-check"></i><b>4.3.1</b> Aesthetic mapping</a></li>
<li class="chapter" data-level="4.3.2" data-path="Rgraphics.html"><a href="Rgraphics.html#geometric-objects-geom"><i class="fa fa-check"></i><b>4.3.2</b> Geometric objects (<code>geom</code>)</a></li>
<li class="chapter" data-level="4.3.3" data-path="Rgraphics.html"><a href="Rgraphics.html#aesthetic-mapping-vs-assignment"><i class="fa fa-check"></i><b>4.3.3</b> Aesthetic mapping VS assignment</a></li>
<li class="chapter" data-level="4.3.4" data-path="Rgraphics.html"><a href="Rgraphics.html#mapping-variables-to-other-aesthetics"><i class="fa fa-check"></i><b>4.3.4</b> Mapping variables to other aesthetics</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-0-2"><i class="fa fa-check"></i><b>4.4</b> Exercise 0</a></li>
<li class="chapter" data-level="4.5" data-path="Rgraphics.html"><a href="Rgraphics.html#statistical-transformations"><i class="fa fa-check"></i><b>4.5</b> Statistical transformations</a><ul>
<li class="chapter" data-level="4.5.1" data-path="Rgraphics.html"><a href="Rgraphics.html#why-transform-data"><i class="fa fa-check"></i><b>4.5.1</b> Why transform data?</a></li>
<li class="chapter" data-level="4.5.2" data-path="Rgraphics.html"><a href="Rgraphics.html#setting-arguments"><i class="fa fa-check"></i><b>4.5.2</b> Setting arguments</a></li>
<li class="chapter" data-level="4.5.3" data-path="Rgraphics.html"><a href="Rgraphics.html#changing-the-transformation"><i class="fa fa-check"></i><b>4.5.3</b> Changing the transformation</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-1-2"><i class="fa fa-check"></i><b>4.6</b> Exercise 1</a></li>
<li class="chapter" data-level="4.7" data-path="Rgraphics.html"><a href="Rgraphics.html#scales"><i class="fa fa-check"></i><b>4.7</b> Scales</a><ul>
<li class="chapter" data-level="4.7.1" data-path="Rgraphics.html"><a href="Rgraphics.html#controlling-aesthetic-mapping"><i class="fa fa-check"></i><b>4.7.1</b> Controlling aesthetic mapping</a></li>
<li class="chapter" data-level="4.7.2" data-path="Rgraphics.html"><a href="Rgraphics.html#common-scale-arguments"><i class="fa fa-check"></i><b>4.7.2</b> Common scale arguments</a></li>
<li class="chapter" data-level="4.7.3" data-path="Rgraphics.html"><a href="Rgraphics.html#scale-modification-examples"><i class="fa fa-check"></i><b>4.7.3</b> Scale modification examples</a></li>
<li class="chapter" data-level="4.7.4" data-path="Rgraphics.html"><a href="Rgraphics.html#using-different-color-scales"><i class="fa fa-check"></i><b>4.7.4</b> Using different color scales</a></li>
<li class="chapter" data-level="4.7.5" data-path="Rgraphics.html"><a href="Rgraphics.html#available-scales"><i class="fa fa-check"></i><b>4.7.5</b> Available scales</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-2-1"><i class="fa fa-check"></i><b>4.8</b> Exercise 2</a></li>
<li class="chapter" data-level="4.9" data-path="Rgraphics.html"><a href="Rgraphics.html#faceting"><i class="fa fa-check"></i><b>4.9</b> Faceting</a><ul>
<li class="chapter" data-level="4.9.1" data-path="Rgraphics.html"><a href="Rgraphics.html#what-is-faceting"><i class="fa fa-check"></i><b>4.9.1</b> What is faceting?</a></li>
<li class="chapter" data-level="4.9.2" data-path="Rgraphics.html"><a href="Rgraphics.html#what-is-the-trend-in-housing-prices-in-each-state"><i class="fa fa-check"></i><b>4.9.2</b> What is the trend in housing prices in each state?</a></li>
<li class="chapter" data-level="4.9.3" data-path="Rgraphics.html"><a href="Rgraphics.html#faceting-to-the-rescue"><i class="fa fa-check"></i><b>4.9.3</b> Faceting to the rescue</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="Rgraphics.html"><a href="Rgraphics.html#themes"><i class="fa fa-check"></i><b>4.10</b> Themes</a><ul>
<li class="chapter" data-level="4.10.1" data-path="Rgraphics.html"><a href="Rgraphics.html#what-are-themes"><i class="fa fa-check"></i><b>4.10.1</b> What are themes?</a></li>
<li class="chapter" data-level="4.10.2" data-path="Rgraphics.html"><a href="Rgraphics.html#overriding-theme-defaults"><i class="fa fa-check"></i><b>4.10.2</b> Overriding theme defaults</a></li>
<li class="chapter" data-level="4.10.3" data-path="Rgraphics.html"><a href="Rgraphics.html#creating-saving-new-themes"><i class="fa fa-check"></i><b>4.10.3</b> Creating &amp; saving new themes</a></li>
</ul></li>
<li class="chapter" data-level="4.11" data-path="Rgraphics.html"><a href="Rgraphics.html#saving-plots"><i class="fa fa-check"></i><b>4.11</b> Saving plots</a></li>
<li class="chapter" data-level="4.12" data-path="Rgraphics.html"><a href="Rgraphics.html#the-1-faq"><i class="fa fa-check"></i><b>4.12</b> The #1 FAQ</a><ul>
<li class="chapter" data-level="4.12.1" data-path="Rgraphics.html"><a href="Rgraphics.html#map-aesthetic-to-different-columns"><i class="fa fa-check"></i><b>4.12.1</b> Map aesthetic to different columns</a></li>
</ul></li>
<li class="chapter" data-level="4.13" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-3-2"><i class="fa fa-check"></i><b>4.13</b> Exercise 3</a></li>
<li class="chapter" data-level="4.14" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-solutions-2"><i class="fa fa-check"></i><b>4.14</b> Exercise solutions</a><ul>
<li class="chapter" data-level="4.14.1" data-path="Rgraphics.html"><a href="Rgraphics.html#ex-0-prototype-2"><i class="fa fa-check"></i><b>4.14.1</b> Ex 0: prototype</a></li>
<li class="chapter" data-level="4.14.2" data-path="Rgraphics.html"><a href="Rgraphics.html#ex-1-prototype-2"><i class="fa fa-check"></i><b>4.14.2</b> Ex 1: prototype</a></li>
<li class="chapter" data-level="4.14.3" data-path="Rgraphics.html"><a href="Rgraphics.html#ex-2-prototype-1"><i class="fa fa-check"></i><b>4.14.3</b> Ex 2: prototype</a></li>
<li class="chapter" data-level="4.14.4" data-path="Rgraphics.html"><a href="Rgraphics.html#ex-3-prototype-2"><i class="fa fa-check"></i><b>4.14.4</b> Ex 3: prototype</a></li>
</ul></li>
<li class="chapter" data-level="4.15" data-path="Rgraphics.html"><a href="Rgraphics.html#wrap-up-3"><i class="fa fa-check"></i><b>4.15</b> Wrap-up</a><ul>
<li class="chapter" data-level="4.15.1" data-path="Rgraphics.html"><a href="Rgraphics.html#feedback-3"><i class="fa fa-check"></i><b>4.15.1</b> Feedback</a></li>
<li class="chapter" data-level="4.15.2" data-path="Rgraphics.html"><a href="Rgraphics.html#resources-3"><i class="fa fa-check"></i><b>4.15.2</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="RDataWrangling.html"><a href="RDataWrangling.html"><i class="fa fa-check"></i><b>5</b> R Data Wrangling</a><ul>
<li class="chapter" data-level="5.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#setup-3"><i class="fa fa-check"></i><b>5.1</b> Setup</a><ul>
<li class="chapter" data-level="5.1.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#software-materials-3"><i class="fa fa-check"></i><b>5.1.1</b> Software &amp; materials</a></li>
<li class="chapter" data-level="5.1.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#goals-3"><i class="fa fa-check"></i><b>5.1.2</b> Goals</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#example-project"><i class="fa fa-check"></i><b>5.2</b> Example project</a><ul>
<li class="chapter" data-level="5.2.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#problems-with-the-data"><i class="fa fa-check"></i><b>5.2.1</b> Problems with the data</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-0-3"><i class="fa fa-check"></i><b>5.3</b> Exercise 0</a></li>
<li class="chapter" data-level="5.4" data-path="RDataWrangling.html"><a href="RDataWrangling.html#working-with-excel-worksheets"><i class="fa fa-check"></i><b>5.4</b> Working with Excel worksheets</a><ul>
<li class="chapter" data-level="5.4.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#iterating-over-file-names-with-map"><i class="fa fa-check"></i><b>5.4.1</b> Iterating over file names with <code>map()</code></a></li>
<li class="chapter" data-level="5.4.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#filtering-strings-using-regular-expressions"><i class="fa fa-check"></i><b>5.4.2</b> Filtering strings using regular expressions</a></li>
<li class="chapter" data-level="5.4.3" data-path="RDataWrangling.html"><a href="RDataWrangling.html#writing-your-own-functions"><i class="fa fa-check"></i><b>5.4.3</b> Writing your own functions</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="RDataWrangling.html"><a href="RDataWrangling.html#reading-excel-data-files"><i class="fa fa-check"></i><b>5.5</b> Reading Excel data files</a></li>
<li class="chapter" data-level="5.6" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-1-3"><i class="fa fa-check"></i><b>5.6</b> Exercise 1</a></li>
<li class="chapter" data-level="5.7" data-path="RDataWrangling.html"><a href="RDataWrangling.html#data-cleanup"><i class="fa fa-check"></i><b>5.7</b> Data cleanup</a><ul>
<li class="chapter" data-level="5.7.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#selecting-columns"><i class="fa fa-check"></i><b>5.7.1</b> Selecting columns</a></li>
<li class="chapter" data-level="5.7.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#dropping-missing-values"><i class="fa fa-check"></i><b>5.7.2</b> Dropping missing values</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-2-2"><i class="fa fa-check"></i><b>5.8</b> Exercise 2</a><ul>
<li class="chapter" data-level="5.8.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#re-arranging-into-a-single-table"><i class="fa fa-check"></i><b>5.8.1</b> Re-arranging into a single table</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-3-3"><i class="fa fa-check"></i><b>5.9</b> Exercise 3</a></li>
<li class="chapter" data-level="5.10" data-path="RDataWrangling.html"><a href="RDataWrangling.html#data-organization-storage"><i class="fa fa-check"></i><b>5.10</b> Data organization &amp; storage</a><ul>
<li class="chapter" data-level="5.10.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#one-table-for-each-year"><i class="fa fa-check"></i><b>5.10.1</b> One table for each year</a></li>
<li class="chapter" data-level="5.10.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#one-big-table"><i class="fa fa-check"></i><b>5.10.2</b> One big table</a></li>
</ul></li>
<li class="chapter" data-level="5.11" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-4-1"><i class="fa fa-check"></i><b>5.11</b> Exercise 4</a></li>
<li class="chapter" data-level="5.12" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-solutions-3"><i class="fa fa-check"></i><b>5.12</b> Exercise solutions</a><ul>
<li class="chapter" data-level="5.12.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#ex-0-prototype-3"><i class="fa fa-check"></i><b>5.12.1</b> Ex 0: prototype</a></li>
<li class="chapter" data-level="5.12.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#ex-1-prototype-3"><i class="fa fa-check"></i><b>5.12.2</b> Ex 1: prototype</a></li>
<li class="chapter" data-level="5.12.3" data-path="RDataWrangling.html"><a href="RDataWrangling.html#ex-2-prototype-2"><i class="fa fa-check"></i><b>5.12.3</b> Ex 2: prototype</a></li>
<li class="chapter" data-level="5.12.4" data-path="RDataWrangling.html"><a href="RDataWrangling.html#ex-3-prototype-3"><i class="fa fa-check"></i><b>5.12.4</b> Ex 3: prototype</a></li>
<li class="chapter" data-level="5.12.5" data-path="RDataWrangling.html"><a href="RDataWrangling.html#ex-4-prototype-1"><i class="fa fa-check"></i><b>5.12.5</b> Ex 4: prototype</a></li>
</ul></li>
<li class="chapter" data-level="5.13" data-path="RDataWrangling.html"><a href="RDataWrangling.html#wrap-up-4"><i class="fa fa-check"></i><b>5.13</b> Wrap-up</a><ul>
<li class="chapter" data-level="5.13.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#feedback-4"><i class="fa fa-check"></i><b>5.13.1</b> Feedback</a></li>
<li class="chapter" data-level="5.13.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#resources-4"><i class="fa fa-check"></i><b>5.13.2</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Python</b></span></li>
<li class="chapter" data-level="6" data-path="PythonIntro.html"><a href="PythonIntro.html"><i class="fa fa-check"></i><b>6</b> Python Introduction</a><ul>
<li class="chapter" data-level="6.1" data-path="PythonIntro.html"><a href="PythonIntro.html#setup-4"><i class="fa fa-check"></i><b>6.1</b> Setup</a><ul>
<li class="chapter" data-level="6.1.1" data-path="PythonIntro.html"><a href="PythonIntro.html#software-materials-4"><i class="fa fa-check"></i><b>6.1.1</b> Software &amp; Materials</a></li>
<li class="chapter" data-level="6.1.2" data-path="PythonIntro.html"><a href="PythonIntro.html#goals-4"><i class="fa fa-check"></i><b>6.1.2</b> Goals</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="PythonIntro.html"><a href="PythonIntro.html#what-is-python"><i class="fa fa-check"></i><b>6.2</b> What is Python?</a></li>
<li class="chapter" data-level="6.3" data-path="PythonIntro.html"><a href="PythonIntro.html#how-can-i-interact-with-python"><i class="fa fa-check"></i><b>6.3</b> How can I interact with Python?</a></li>
<li class="chapter" data-level="6.4" data-path="PythonIntro.html"><a href="PythonIntro.html#reading-the-text-of-alice-in-wonderland-from-a-file"><i class="fa fa-check"></i><b>6.4</b> Reading the text of Alice in Wonderland from a file</a></li>
<li class="chapter" data-level="6.5" data-path="PythonIntro.html"><a href="PythonIntro.html#counting-chapters-lines-words"><i class="fa fa-check"></i><b>6.5</b> Counting chapters, lines, &amp; words</a><ul>
<li class="chapter" data-level="6.5.1" data-path="PythonIntro.html"><a href="PythonIntro.html#splitting-a-string-into-a-list-of-words"><i class="fa fa-check"></i><b>6.5.1</b> Splitting a string into a list of words</a></li>
<li class="chapter" data-level="6.5.2" data-path="PythonIntro.html"><a href="PythonIntro.html#using-sets-to-calculate-the-number-of-unique-words"><i class="fa fa-check"></i><b>6.5.2</b> Using sets to calculate the number of unique words</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="PythonIntro.html"><a href="PythonIntro.html#exercise-0-4"><i class="fa fa-check"></i><b>6.6</b> Exercise 0</a><ul>
<li class="chapter" data-level="6.6.1" data-path="PythonIntro.html"><a href="PythonIntro.html#working-with-lists"><i class="fa fa-check"></i><b>6.6.1</b> Working with lists</a></li>
<li class="chapter" data-level="6.6.2" data-path="PythonIntro.html"><a href="PythonIntro.html#extracting-subsets-from-lists"><i class="fa fa-check"></i><b>6.6.2</b> Extracting subsets from lists</a></li>
<li class="chapter" data-level="6.6.3" data-path="PythonIntro.html"><a href="PythonIntro.html#sorting-other-in-place-methods"><i class="fa fa-check"></i><b>6.6.3</b> Sorting &amp; other in-place methods</a></li>
<li class="chapter" data-level="6.6.4" data-path="PythonIntro.html"><a href="PythonIntro.html#counting-chapters-paragraphs"><i class="fa fa-check"></i><b>6.6.4</b> Counting chapters &amp; paragraphs</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="PythonIntro.html"><a href="PythonIntro.html#exercise-1-4"><i class="fa fa-check"></i><b>6.7</b> Exercise 1</a></li>
<li class="chapter" data-level="6.8" data-path="PythonIntro.html"><a href="PythonIntro.html#working-with-nested-structures"><i class="fa fa-check"></i><b>6.8</b> Working with nested structures</a><ul>
<li class="chapter" data-level="6.8.1" data-path="PythonIntro.html"><a href="PythonIntro.html#iterating-over-paragraphs-using-for-loops"><i class="fa fa-check"></i><b>6.8.1</b> Iterating over paragraphs using for-loops</a></li>
<li class="chapter" data-level="6.8.2" data-path="PythonIntro.html"><a href="PythonIntro.html#iterating-collecting-paragraphs-per-chapter-using-list-comprehension"><i class="fa fa-check"></i><b>6.8.2</b> Iterating &amp; collecting paragraphs per chapter using list comprehension</a></li>
<li class="chapter" data-level="6.8.3" data-path="PythonIntro.html"><a href="PythonIntro.html#organizing-results-in-dictionaries"><i class="fa fa-check"></i><b>6.8.3</b> Organizing results in dictionaries</a></li>
</ul></li>
<li class="chapter" data-level="6.9" data-path="PythonIntro.html"><a href="PythonIntro.html#exercise-2-3"><i class="fa fa-check"></i><b>6.9</b> Exercise 2</a></li>
<li class="chapter" data-level="6.10" data-path="PythonIntro.html"><a href="PythonIntro.html#importing-numpy-calculating-simple-statistics"><i class="fa fa-check"></i><b>6.10</b> Importing numpy &amp; calculating simple statistics</a></li>
<li class="chapter" data-level="6.11" data-path="PythonIntro.html"><a href="PythonIntro.html#wrap-up-5"><i class="fa fa-check"></i><b>6.11</b> Wrap-up</a><ul>
<li class="chapter" data-level="6.11.1" data-path="PythonIntro.html"><a href="PythonIntro.html#feedback-5"><i class="fa fa-check"></i><b>6.11.1</b> Feedback</a></li>
<li class="chapter" data-level="6.11.2" data-path="PythonIntro.html"><a href="PythonIntro.html#resources-5"><i class="fa fa-check"></i><b>6.11.2</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html"><i class="fa fa-check"></i><b>7</b> Python Web-Scraping</a><ul>
<li class="chapter" data-level="7.1" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#setup-5"><i class="fa fa-check"></i><b>7.1</b> Setup</a><ul>
<li class="chapter" data-level="7.1.1" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#software-materials-5"><i class="fa fa-check"></i><b>7.1.1</b> Software &amp; Materials</a></li>
<li class="chapter" data-level="7.1.2" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#goals-5"><i class="fa fa-check"></i><b>7.1.2</b> Goals</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#preliminary-questions"><i class="fa fa-check"></i><b>7.2</b> Preliminary questions</a><ul>
<li class="chapter" data-level="7.2.1" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#what-is-web-scraping"><i class="fa fa-check"></i><b>7.2.1</b> What is web scraping?</a></li>
<li class="chapter" data-level="7.2.2" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#is-web-scraping-legal-is-it-ethical"><i class="fa fa-check"></i><b>7.2.2</b> Is web scraping legal? Is it ethical?</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#example-project-1"><i class="fa fa-check"></i><b>7.3</b> Example project</a></li>
<li class="chapter" data-level="7.4" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#take-shortcuts-if-you-can"><i class="fa fa-check"></i><b>7.4</b> Take shortcuts if you can</a><ul>
<li class="chapter" data-level="7.4.1" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#examining-the-structure-of-our-target-web-service"><i class="fa fa-check"></i><b>7.4.1</b> Examining the structure of our target web service</a></li>
<li class="chapter" data-level="7.4.2" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#making-requests-using-python"><i class="fa fa-check"></i><b>7.4.2</b> Making requests using Python</a></li>
<li class="chapter" data-level="7.4.3" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#organizing-saving-the-data"><i class="fa fa-check"></i><b>7.4.3</b> Organizing &amp; saving the data</a></li>
<li class="chapter" data-level="7.4.4" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#iterating-to-retrieve-all-the-data"><i class="fa fa-check"></i><b>7.4.4</b> Iterating to retrieve all the data</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#exercise-0-5"><i class="fa fa-check"></i><b>7.5</b> Exercise 0</a></li>
<li class="chapter" data-level="7.6" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#parse-html-if-you-have-to"><i class="fa fa-check"></i><b>7.6</b> Parse HTML if you have to</a><ul>
<li class="chapter" data-level="7.6.1" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#retrieving-html"><i class="fa fa-check"></i><b>7.6.1</b> Retrieving HTML</a></li>
<li class="chapter" data-level="7.6.2" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#parsing-html-using-the-lxml-library"><i class="fa fa-check"></i><b>7.6.2</b> Parsing HTML using the lxml library</a></li>
<li class="chapter" data-level="7.6.3" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#using-xpath-to-extract-content-from-html"><i class="fa fa-check"></i><b>7.6.3</b> Using xpath to extract content from HTML</a></li>
<li class="chapter" data-level="7.6.4" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#iterating-to-retrieve-content-from-a-list-of-html-elements"><i class="fa fa-check"></i><b>7.6.4</b> Iterating to retrieve content from a list of HTML elements</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#exercise-1-5"><i class="fa fa-check"></i><b>7.7</b> Exercise 1</a></li>
<li class="chapter" data-level="7.8" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#scrapy-for-large-complex-projects"><i class="fa fa-check"></i><b>7.8</b> <code>Scrapy</code>: for large / complex projects</a></li>
<li class="chapter" data-level="7.9" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#browser-drivers-a-last-resort"><i class="fa fa-check"></i><b>7.9</b> Browser drivers: a last resort</a></li>
<li class="chapter" data-level="7.10" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#wrap-up-6"><i class="fa fa-check"></i><b>7.10</b> Wrap-up</a><ul>
<li class="chapter" data-level="7.10.1" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#feedback-6"><i class="fa fa-check"></i><b>7.10.1</b> Feedback</a></li>
<li class="chapter" data-level="7.10.2" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#resources-6"><i class="fa fa-check"></i><b>7.10.2</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Stata</b></span></li>
<li class="chapter" data-level="8" data-path="StataIntro.html"><a href="StataIntro.html"><i class="fa fa-check"></i><b>8</b> Stata Introduction</a><ul>
<li class="chapter" data-level="8.1" data-path="StataIntro.html"><a href="StataIntro.html#setup-6"><i class="fa fa-check"></i><b>8.1</b> Setup</a><ul>
<li class="chapter" data-level="8.1.1" data-path="StataIntro.html"><a href="StataIntro.html#software-materials-6"><i class="fa fa-check"></i><b>8.1.1</b> Software &amp; Materials</a></li>
<li class="chapter" data-level="8.1.2" data-path="StataIntro.html"><a href="StataIntro.html#organization"><i class="fa fa-check"></i><b>8.1.2</b> Organization</a></li>
<li class="chapter" data-level="8.1.3" data-path="StataIntro.html"><a href="StataIntro.html#goals-6"><i class="fa fa-check"></i><b>8.1.3</b> Goals</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="StataIntro.html"><a href="StataIntro.html#why-stata"><i class="fa fa-check"></i><b>8.2</b> Why stata?</a><ul>
<li class="chapter" data-level="8.2.1" data-path="StataIntro.html"><a href="StataIntro.html#stata-interface"><i class="fa fa-check"></i><b>8.2.1</b> Stata interface</a></li>
<li class="chapter" data-level="8.2.2" data-path="StataIntro.html"><a href="StataIntro.html#do-files"><i class="fa fa-check"></i><b>8.2.2</b> Do-files</a></li>
<li class="chapter" data-level="8.2.3" data-path="StataIntro.html"><a href="StataIntro.html#stata-help"><i class="fa fa-check"></i><b>8.2.3</b> Stata help</a></li>
<li class="chapter" data-level="8.2.4" data-path="StataIntro.html"><a href="StataIntro.html#general-stata-command-syntax"><i class="fa fa-check"></i><b>8.2.4</b> General Stata command syntax</a></li>
<li class="chapter" data-level="8.2.5" data-path="StataIntro.html"><a href="StataIntro.html#commenting-formatting-syntax"><i class="fa fa-check"></i><b>8.2.5</b> Commenting &amp; formatting syntax</a></li>
<li class="chapter" data-level="8.2.6" data-path="StataIntro.html"><a href="StataIntro.html#lets-get-started"><i class="fa fa-check"></i><b>8.2.6</b> Let’s get started</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="StataIntro.html"><a href="StataIntro.html#getting-data-into-stata"><i class="fa fa-check"></i><b>8.3</b> Getting data into Stata</a><ul>
<li class="chapter" data-level="8.3.1" data-path="StataIntro.html"><a href="StataIntro.html#data-file-commands"><i class="fa fa-check"></i><b>8.3.1</b> Data file commands</a></li>
<li class="chapter" data-level="8.3.2" data-path="StataIntro.html"><a href="StataIntro.html#a-note-about-path-names"><i class="fa fa-check"></i><b>8.3.2</b> A note about path names</a></li>
<li class="chapter" data-level="8.3.3" data-path="StataIntro.html"><a href="StataIntro.html#wheres-my-data"><i class="fa fa-check"></i><b>8.3.3</b> Where’s my data?</a></li>
<li class="chapter" data-level="8.3.4" data-path="StataIntro.html"><a href="StataIntro.html#what-if-my-data-is-not-a-stata-file"><i class="fa fa-check"></i><b>8.3.4</b> What if my data is not a Stata file?</a></li>
<li class="chapter" data-level="8.3.5" data-path="StataIntro.html"><a href="StataIntro.html#what-if-my-data-is-from-another-statistical-software-program"><i class="fa fa-check"></i><b>8.3.5</b> What if my data is from another statistical software program?</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="StataIntro.html"><a href="StataIntro.html#exercise-0-6"><i class="fa fa-check"></i><b>8.4</b> Exercise 0</a></li>
<li class="chapter" data-level="8.5" data-path="StataIntro.html"><a href="StataIntro.html#statistics-graphs"><i class="fa fa-check"></i><b>8.5</b> Statistics &amp; graphs</a><ul>
<li class="chapter" data-level="8.5.1" data-path="StataIntro.html"><a href="StataIntro.html#frequently-used-commands"><i class="fa fa-check"></i><b>8.5.1</b> Frequently used commands</a></li>
<li class="chapter" data-level="8.5.2" data-path="StataIntro.html"><a href="StataIntro.html#basic-graphing-commands"><i class="fa fa-check"></i><b>8.5.2</b> Basic graphing commands</a></li>
<li class="chapter" data-level="8.5.3" data-path="StataIntro.html"><a href="StataIntro.html#the-by-command"><i class="fa fa-check"></i><b>8.5.3</b> The <code>by</code> command</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="StataIntro.html"><a href="StataIntro.html#exercise-1-6"><i class="fa fa-check"></i><b>8.6</b> Exercise 1</a></li>
<li class="chapter" data-level="8.7" data-path="StataIntro.html"><a href="StataIntro.html#basic-data-management"><i class="fa fa-check"></i><b>8.7</b> Basic data management</a><ul>
<li class="chapter" data-level="8.7.1" data-path="StataIntro.html"><a href="StataIntro.html#labels"><i class="fa fa-check"></i><b>8.7.1</b> Labels</a></li>
<li class="chapter" data-level="8.7.2" data-path="StataIntro.html"><a href="StataIntro.html#variable-value-labels"><i class="fa fa-check"></i><b>8.7.2</b> Variable &amp; value labels</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="StataIntro.html"><a href="StataIntro.html#exercise-2-4"><i class="fa fa-check"></i><b>8.8</b> Exercise 2</a></li>
<li class="chapter" data-level="8.9" data-path="StataIntro.html"><a href="StataIntro.html#working-on-subsets"><i class="fa fa-check"></i><b>8.9</b> Working on subsets</a></li>
<li class="chapter" data-level="8.10" data-path="StataIntro.html"><a href="StataIntro.html#generating-replacing-variables"><i class="fa fa-check"></i><b>8.10</b> Generating &amp; replacing variables</a></li>
<li class="chapter" data-level="8.11" data-path="StataIntro.html"><a href="StataIntro.html#exercise-3-4"><i class="fa fa-check"></i><b>8.11</b> Exercise 3</a></li>
<li class="chapter" data-level="8.12" data-path="StataIntro.html"><a href="StataIntro.html#exercise-solutions-4"><i class="fa fa-check"></i><b>8.12</b> Exercise solutions</a><ul>
<li class="chapter" data-level="8.12.1" data-path="StataIntro.html"><a href="StataIntro.html#ex-0-prototype-4"><i class="fa fa-check"></i><b>8.12.1</b> Ex 0: prototype</a></li>
<li class="chapter" data-level="8.12.2" data-path="StataIntro.html"><a href="StataIntro.html#ex-1-prototype-4"><i class="fa fa-check"></i><b>8.12.2</b> Ex 1: prototype</a></li>
<li class="chapter" data-level="8.12.3" data-path="StataIntro.html"><a href="StataIntro.html#ex-2-prototype-3"><i class="fa fa-check"></i><b>8.12.3</b> Ex 2: prototype</a></li>
<li class="chapter" data-level="8.12.4" data-path="StataIntro.html"><a href="StataIntro.html#ex-3-prototype-4"><i class="fa fa-check"></i><b>8.12.4</b> Ex 3: prototype</a></li>
</ul></li>
<li class="chapter" data-level="8.13" data-path="StataIntro.html"><a href="StataIntro.html#wrap-up-7"><i class="fa fa-check"></i><b>8.13</b> Wrap-up</a><ul>
<li class="chapter" data-level="8.13.1" data-path="StataIntro.html"><a href="StataIntro.html#feedback-7"><i class="fa fa-check"></i><b>8.13.1</b> Feedback</a></li>
<li class="chapter" data-level="8.13.2" data-path="StataIntro.html"><a href="StataIntro.html#resources-7"><i class="fa fa-check"></i><b>8.13.2</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="StataDatMan.html"><a href="StataDatMan.html"><i class="fa fa-check"></i><b>9</b> Stata Data Management</a><ul>
<li class="chapter" data-level="9.1" data-path="StataDatMan.html"><a href="StataDatMan.html#setup-7"><i class="fa fa-check"></i><b>9.1</b> Setup</a><ul>
<li class="chapter" data-level="9.1.1" data-path="StataDatMan.html"><a href="StataDatMan.html#software-materials-7"><i class="fa fa-check"></i><b>9.1.1</b> Software &amp; Materials</a></li>
<li class="chapter" data-level="9.1.2" data-path="StataDatMan.html"><a href="StataDatMan.html#organization-1"><i class="fa fa-check"></i><b>9.1.2</b> Organization</a></li>
<li class="chapter" data-level="9.1.3" data-path="StataDatMan.html"><a href="StataDatMan.html#goals-7"><i class="fa fa-check"></i><b>9.1.3</b> Goals</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="StataDatMan.html"><a href="StataDatMan.html#opening-files-in-stata"><i class="fa fa-check"></i><b>9.2</b> Opening Files in Stata</a></li>
<li class="chapter" data-level="9.3" data-path="StataDatMan.html"><a href="StataDatMan.html#generating-replacing-variables-1"><i class="fa fa-check"></i><b>9.3</b> Generating &amp; replacing variables</a><ul>
<li class="chapter" data-level="9.3.1" data-path="StataDatMan.html"><a href="StataDatMan.html#data-manipulation-commands"><i class="fa fa-check"></i><b>9.3.1</b> Data Manipulation Commands</a></li>
<li class="chapter" data-level="9.3.2" data-path="StataDatMan.html"><a href="StataDatMan.html#generate-replace"><i class="fa fa-check"></i><b>9.3.2</b> Generate &amp; Replace</a></li>
<li class="chapter" data-level="9.3.3" data-path="StataDatMan.html"><a href="StataDatMan.html#recode"><i class="fa fa-check"></i><b>9.3.3</b> Recode</a></li>
<li class="chapter" data-level="9.3.4" data-path="StataDatMan.html"><a href="StataDatMan.html#egen"><i class="fa fa-check"></i><b>9.3.4</b> egen</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="StataDatMan.html"><a href="StataDatMan.html#exercise-0-7"><i class="fa fa-check"></i><b>9.4</b> Exercise 0</a></li>
<li class="chapter" data-level="9.5" data-path="StataDatMan.html"><a href="StataDatMan.html#by-processing"><i class="fa fa-check"></i><b>9.5</b> By processing</a><ul>
<li class="chapter" data-level="9.5.1" data-path="StataDatMan.html"><a href="StataDatMan.html#the-bysort-command"><i class="fa fa-check"></i><b>9.5.1</b> The <code>bysort</code> Command</a></li>
<li class="chapter" data-level="9.5.2" data-path="StataDatMan.html"><a href="StataDatMan.html#by-prefix-vs.-by-options"><i class="fa fa-check"></i><b>9.5.2</b> <code>by</code> prefix vs. <code>by</code> options</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="StataDatMan.html"><a href="StataDatMan.html#missing-values"><i class="fa fa-check"></i><b>9.6</b> Missing values</a><ul>
<li class="chapter" data-level="9.6.1" data-path="StataDatMan.html"><a href="StataDatMan.html#bulk-conversion-to-missing-values"><i class="fa fa-check"></i><b>9.6.1</b> Bulk Conversion to Missing Values</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="StataDatMan.html"><a href="StataDatMan.html#variable-types"><i class="fa fa-check"></i><b>9.7</b> Variable types</a><ul>
<li class="chapter" data-level="9.7.1" data-path="StataDatMan.html"><a href="StataDatMan.html#converting-to-from-strings"><i class="fa fa-check"></i><b>9.7.1</b> Converting to &amp; from Strings</a></li>
<li class="chapter" data-level="9.7.2" data-path="StataDatMan.html"><a href="StataDatMan.html#converting-strings-to-datetime"><i class="fa fa-check"></i><b>9.7.2</b> Converting Strings to Date/Time</a></li>
<li class="chapter" data-level="9.7.3" data-path="StataDatMan.html"><a href="StataDatMan.html#formatting-numbers-as-dates"><i class="fa fa-check"></i><b>9.7.3</b> Formatting Numbers as Dates</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="StataDatMan.html"><a href="StataDatMan.html#exercise-1-7"><i class="fa fa-check"></i><b>9.8</b> Exercise 1</a></li>
<li class="chapter" data-level="9.9" data-path="StataDatMan.html"><a href="StataDatMan.html#merging-appending-joining"><i class="fa fa-check"></i><b>9.9</b> Merging, appending, &amp; joining</a><ul>
<li class="chapter" data-level="9.9.1" data-path="StataDatMan.html"><a href="StataDatMan.html#appending-datasets"><i class="fa fa-check"></i><b>9.9.1</b> Appending Datasets</a></li>
<li class="chapter" data-level="9.9.2" data-path="StataDatMan.html"><a href="StataDatMan.html#merging-datasets"><i class="fa fa-check"></i><b>9.9.2</b> Merging Datasets</a></li>
<li class="chapter" data-level="9.9.3" data-path="StataDatMan.html"><a href="StataDatMan.html#merge-options"><i class="fa fa-check"></i><b>9.9.3</b> Merge Options</a></li>
<li class="chapter" data-level="9.9.4" data-path="StataDatMan.html"><a href="StataDatMan.html#many-to-many-merges"><i class="fa fa-check"></i><b>9.9.4</b> Many-to-many merges</a></li>
</ul></li>
<li class="chapter" data-level="9.10" data-path="StataDatMan.html"><a href="StataDatMan.html#creating-summarized-data-sets"><i class="fa fa-check"></i><b>9.10</b> Creating summarized data sets</a><ul>
<li class="chapter" data-level="9.10.1" data-path="StataDatMan.html"><a href="StataDatMan.html#collapse"><i class="fa fa-check"></i><b>9.10.1</b> Collapse</a></li>
</ul></li>
<li class="chapter" data-level="9.11" data-path="StataDatMan.html"><a href="StataDatMan.html#exercise-2-5"><i class="fa fa-check"></i><b>9.11</b> Exercise 2</a></li>
<li class="chapter" data-level="9.12" data-path="StataDatMan.html"><a href="StataDatMan.html#exercise-solutions-5"><i class="fa fa-check"></i><b>9.12</b> Exercise Solutions</a><ul>
<li class="chapter" data-level="9.12.1" data-path="StataDatMan.html"><a href="StataDatMan.html#ex-0-prototype-5"><i class="fa fa-check"></i><b>9.12.1</b> Ex 0: prototype</a></li>
<li class="chapter" data-level="9.12.2" data-path="StataDatMan.html"><a href="StataDatMan.html#ex-1-prototype-5"><i class="fa fa-check"></i><b>9.12.2</b> Ex 1: prototype</a></li>
<li class="chapter" data-level="9.12.3" data-path="StataDatMan.html"><a href="StataDatMan.html#ex-2-prototype-4"><i class="fa fa-check"></i><b>9.12.3</b> Ex 2: prototype</a></li>
</ul></li>
<li class="chapter" data-level="9.13" data-path="StataDatMan.html"><a href="StataDatMan.html#wrap-up-8"><i class="fa fa-check"></i><b>9.13</b> Wrap-up</a><ul>
<li class="chapter" data-level="9.13.1" data-path="StataDatMan.html"><a href="StataDatMan.html#feedback-8"><i class="fa fa-check"></i><b>9.13.1</b> Feedback</a></li>
<li class="chapter" data-level="9.13.2" data-path="StataDatMan.html"><a href="StataDatMan.html#resources-8"><i class="fa fa-check"></i><b>9.13.2</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="StataModGraph.html"><a href="StataModGraph.html"><i class="fa fa-check"></i><b>10</b> Stata Modeling &amp; Graphing</a><ul>
<li class="chapter" data-level="10.1" data-path="StataModGraph.html"><a href="StataModGraph.html#setup-8"><i class="fa fa-check"></i><b>10.1</b> Setup</a><ul>
<li class="chapter" data-level="10.1.1" data-path="StataModGraph.html"><a href="StataModGraph.html#software-materials-8"><i class="fa fa-check"></i><b>10.1.1</b> Software &amp; Materials</a></li>
<li class="chapter" data-level="10.1.2" data-path="StataModGraph.html"><a href="StataModGraph.html#organization-2"><i class="fa fa-check"></i><b>10.1.2</b> Organization</a></li>
<li class="chapter" data-level="10.1.3" data-path="StataModGraph.html"><a href="StataModGraph.html#goals-8"><i class="fa fa-check"></i><b>10.1.3</b> Goals</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="StataModGraph.html"><a href="StataModGraph.html#fitting-models-in-stata"><i class="fa fa-check"></i><b>10.2</b> Fitting models in Stata</a><ul>
<li class="chapter" data-level="10.2.1" data-path="StataModGraph.html"><a href="StataModGraph.html#todays-dataset"><i class="fa fa-check"></i><b>10.2.1</b> Today’s Dataset</a></li>
<li class="chapter" data-level="10.2.2" data-path="StataModGraph.html"><a href="StataModGraph.html#opening-files-in-stata-1"><i class="fa fa-check"></i><b>10.2.2</b> Opening Files in Stata</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="StataModGraph.html"><a href="StataModGraph.html#simple-regression"><i class="fa fa-check"></i><b>10.3</b> Simple regression</a><ul>
<li class="chapter" data-level="10.3.1" data-path="StataModGraph.html"><a href="StataModGraph.html#steps-for-running-regression"><i class="fa fa-check"></i><b>10.3.1</b> Steps for Running Regression</a></li>
<li class="chapter" data-level="10.3.2" data-path="StataModGraph.html"><a href="StataModGraph.html#preliminaries"><i class="fa fa-check"></i><b>10.3.2</b> Preliminaries</a></li>
<li class="chapter" data-level="10.3.3" data-path="StataModGraph.html"><a href="StataModGraph.html#sat-scores-education-expenditures"><i class="fa fa-check"></i><b>10.3.3</b> SAT scores &amp; Education Expenditures</a></li>
<li class="chapter" data-level="10.3.4" data-path="StataModGraph.html"><a href="StataModGraph.html#ols-assumptions"><i class="fa fa-check"></i><b>10.3.4</b> OLS Assumptions</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="StataModGraph.html"><a href="StataModGraph.html#multiple-regression"><i class="fa fa-check"></i><b>10.4</b> Multiple Regression</a><ul>
<li class="chapter" data-level="10.4.1" data-path="StataModGraph.html"><a href="StataModGraph.html#preliminaries-1"><i class="fa fa-check"></i><b>10.4.1</b> Preliminaries</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="StataModGraph.html"><a href="StataModGraph.html#exercise-0-8"><i class="fa fa-check"></i><b>10.5</b> Exercise 0</a></li>
<li class="chapter" data-level="10.6" data-path="StataModGraph.html"><a href="StataModGraph.html#interactions"><i class="fa fa-check"></i><b>10.6</b> Interactions</a><ul>
<li class="chapter" data-level="10.6.1" data-path="StataModGraph.html"><a href="StataModGraph.html#categorical-predictors"><i class="fa fa-check"></i><b>10.6.1</b> Categorical Predictors</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="StataModGraph.html"><a href="StataModGraph.html#exercise-1-8"><i class="fa fa-check"></i><b>10.7</b> Exercise 1</a></li>
<li class="chapter" data-level="10.8" data-path="StataModGraph.html"><a href="StataModGraph.html#exporting-saving-results"><i class="fa fa-check"></i><b>10.8</b> Exporting &amp; saving results</a><ul>
<li class="chapter" data-level="10.8.1" data-path="StataModGraph.html"><a href="StataModGraph.html#regression-tables"><i class="fa fa-check"></i><b>10.8.1</b> Regression tables</a></li>
<li class="chapter" data-level="10.8.2" data-path="StataModGraph.html"><a href="StataModGraph.html#saving-replaying"><i class="fa fa-check"></i><b>10.8.2</b> Saving &amp; replaying</a></li>
<li class="chapter" data-level="10.8.3" data-path="StataModGraph.html"><a href="StataModGraph.html#exporting-to-excel"><i class="fa fa-check"></i><b>10.8.3</b> Exporting to Excel</a></li>
</ul></li>
<li class="chapter" data-level="10.9" data-path="StataModGraph.html"><a href="StataModGraph.html#graphing-in-stata"><i class="fa fa-check"></i><b>10.9</b> Graphing in Stata</a><ul>
<li class="chapter" data-level="10.9.1" data-path="StataModGraph.html"><a href="StataModGraph.html#graphing-strategies"><i class="fa fa-check"></i><b>10.9.1</b> Graphing Strategies</a></li>
<li class="chapter" data-level="10.9.2" data-path="StataModGraph.html"><a href="StataModGraph.html#terrible-graph"><i class="fa fa-check"></i><b>10.9.2</b> Terrible Graph</a></li>
<li class="chapter" data-level="10.9.3" data-path="StataModGraph.html"><a href="StataModGraph.html#much-better-graph"><i class="fa fa-check"></i><b>10.9.3</b> Much Better Graph</a></li>
</ul></li>
<li class="chapter" data-level="10.10" data-path="StataModGraph.html"><a href="StataModGraph.html#univariate-graphics"><i class="fa fa-check"></i><b>10.10</b> Univariate Graphics</a><ul>
<li class="chapter" data-level="10.10.1" data-path="StataModGraph.html"><a href="StataModGraph.html#our-first-dataset"><i class="fa fa-check"></i><b>10.10.1</b> Our First Dataset</a></li>
<li class="chapter" data-level="10.10.2" data-path="StataModGraph.html"><a href="StataModGraph.html#single-continuous-variables"><i class="fa fa-check"></i><b>10.10.2</b> Single Continuous Variables</a></li>
<li class="chapter" data-level="10.10.3" data-path="StataModGraph.html"><a href="StataModGraph.html#single-categorical-variables"><i class="fa fa-check"></i><b>10.10.3</b> Single Categorical Variables</a></li>
</ul></li>
<li class="chapter" data-level="10.11" data-path="StataModGraph.html"><a href="StataModGraph.html#exercise-2-6"><i class="fa fa-check"></i><b>10.11</b> Exercise 2</a></li>
<li class="chapter" data-level="10.12" data-path="StataModGraph.html"><a href="StataModGraph.html#bivariate-graphics"><i class="fa fa-check"></i><b>10.12</b> Bivariate Graphics</a><ul>
<li class="chapter" data-level="10.12.1" data-path="StataModGraph.html"><a href="StataModGraph.html#next-dataset"><i class="fa fa-check"></i><b>10.12.1</b> Next Dataset:</a></li>
<li class="chapter" data-level="10.12.2" data-path="StataModGraph.html"><a href="StataModGraph.html#the-twoway-family"><i class="fa fa-check"></i><b>10.12.2</b> The Twoway Family</a></li>
<li class="chapter" data-level="10.12.3" data-path="StataModGraph.html"><a href="StataModGraph.html#overlaying-twoway-graphs"><i class="fa fa-check"></i><b>10.12.3</b> Overlaying Twoway Graphs</a></li>
</ul></li>
<li class="chapter" data-level="10.13" data-path="StataModGraph.html"><a href="StataModGraph.html#exercise-3-5"><i class="fa fa-check"></i><b>10.13</b> Exercise 3</a></li>
<li class="chapter" data-level="10.14" data-path="StataModGraph.html"><a href="StataModGraph.html#twoway-line-graphs"><i class="fa fa-check"></i><b>10.14</b> Twoway Line Graphs</a></li>
<li class="chapter" data-level="10.15" data-path="StataModGraph.html"><a href="StataModGraph.html#exporting-graphs"><i class="fa fa-check"></i><b>10.15</b> Exporting Graphs</a></li>
<li class="chapter" data-level="10.16" data-path="StataModGraph.html"><a href="StataModGraph.html#exercise-solutions-6"><i class="fa fa-check"></i><b>10.16</b> Exercise Solutions</a><ul>
<li class="chapter" data-level="10.16.1" data-path="StataModGraph.html"><a href="StataModGraph.html#ex-0-prototype-6"><i class="fa fa-check"></i><b>10.16.1</b> Ex 0: prototype</a></li>
<li class="chapter" data-level="10.16.2" data-path="StataModGraph.html"><a href="StataModGraph.html#ex-1-prototype-6"><i class="fa fa-check"></i><b>10.16.2</b> Ex 1: prototype</a></li>
<li class="chapter" data-level="10.16.3" data-path="StataModGraph.html"><a href="StataModGraph.html#ex-2-prototype-5"><i class="fa fa-check"></i><b>10.16.3</b> Ex 2: prototype</a></li>
<li class="chapter" data-level="10.16.4" data-path="StataModGraph.html"><a href="StataModGraph.html#ex-3-prototype-5"><i class="fa fa-check"></i><b>10.16.4</b> Ex 3: prototype</a></li>
</ul></li>
<li class="chapter" data-level="10.17" data-path="StataModGraph.html"><a href="StataModGraph.html#wrap-up-9"><i class="fa fa-check"></i><b>10.17</b> Wrap-up</a><ul>
<li class="chapter" data-level="10.17.1" data-path="StataModGraph.html"><a href="StataModGraph.html#feedback-9"><i class="fa fa-check"></i><b>10.17.1</b> Feedback</a></li>
<li class="chapter" data-level="10.17.2" data-path="StataModGraph.html"><a href="StataModGraph.html#resources-9"><i class="fa fa-check"></i><b>10.17.2</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science Workshops</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-regression-models" class="section level1">
<h1><span class="header-section-number">3</span> R Regression Models</h1>
<p><strong>Topics</strong></p>
<ul>
<li>R formula interface</li>
<li>Run and interpret variety of regression models in R</li>
<li>Factor contrasts to test specific hypotheses</li>
<li>Model comparisons</li>
<li>Predicted marginal effects</li>
</ul>
<div id="setup-1" class="section level2">
<h2><span class="header-section-number">3.1</span> Setup</h2>
<div id="software-materials-1" class="section level3">
<h3><span class="header-section-number">3.1.1</span> Software &amp; materials</h3>
<p>You should have R and RStudio installed — if not:</p>
<ul>
<li>Download and install R: <a href="http://cran.r-project.org" class="uri">http://cran.r-project.org</a></li>
<li>Download and install RStudio: <a href="https://www.rstudio.com/products/rstudio/download/#download" class="uri">https://www.rstudio.com/products/rstudio/download/#download</a></li>
</ul>
<p>Download materials:</p>
<ul>
<li>Download class materials at <a href="https://github.com/IQSS/dss-workshops-redux/raw/master/R/Rmodels.zip" class="uri">https://github.com/IQSS/dss-workshops-redux/raw/master/R/Rmodels.zip</a></li>
<li>Extract materials from the zipped directory <code>Rmodels.zip</code> (Right-click =&gt; Extract All on Windows, double-click on Mac) and move them to your desktop!</li>
</ul>
<p>Start RStudio and create a new project:</p>
<ul>
<li>On Windows click the start button and search for RStudio. On Mac RStudio will be in your applications folder.</li>
<li>In Rstudio go to <code>File -&gt; New Project</code>.</li>
<li>Choose <code>Existing Directory</code> and browse to the <code>Rmodels</code> directory.</li>
<li>Choose <code>File -&gt; Open File</code> and select the blank version of the <code>.Rmd</code> file.</li>
</ul>
<p>While R’s built-in packages are powerful, in recent years there has been a big surge in well-designed <em>contributed packages</em> for R. In particular, a collection of R packages called <a href="https://www.tidyverse.org/">tidyverse</a> have been designed specifically for data science. All packages included in <code>tidyverse</code> share an underlying design philosophy, grammar, and data structures. We will use <code>tidyverse</code> packages throughout the workshop, so let’s install them now:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages(&quot;tidyverse&quot;)</span>
<span class="kw">library</span>(tidyverse)</code></pre></div>
<p>We can also install the <code>rmarkdown</code> package, which will allow us to combine our text and code into a formatted document at the end of the workshop:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages(&quot;rmarkdown&quot;)</span>
<span class="kw">library</span>(rmarkdown)</code></pre></div>
<p>Finally, lets install some packages that will help with modeling:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages(&quot;lme4&quot;)</span>
<span class="kw">library</span>(lme4)  <span class="co"># for mixed models</span>

<span class="co"># install.packages(&quot;emmeans&quot;)</span>
<span class="kw">library</span>(emmeans)  <span class="co"># for marginal effects</span>

<span class="co"># install.packages(&quot;effects&quot;)</span>
<span class="kw">library</span>(effects)  <span class="co"># for predicted marginal means</span></code></pre></div>
</div>
<div id="goals-1" class="section level3">
<h3><span class="header-section-number">3.1.2</span> Goals</h3>
<p>Class Structure and Organization:</p>
<ul>
<li>Ask questions at any time. Really!</li>
<li>Collaboration is encouraged - please spend a minute introducing yourself to your neighbors!</li>
</ul>
<p>This is an intermediate R course:</p>
<ul>
<li>Assumes working knowledge of R</li>
<li>Relatively fast-paced</li>
<li>This is not a statistics course! We assume you know the theory behind the models</li>
</ul>
</div>
</div>
<div id="before-fitting-a-model" class="section level2">
<h2><span class="header-section-number">3.2</span> Before fitting a model</h2>
<div id="load-the-data" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Load the data</h3>
<p>List the data files we’re going to work with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">list.files</span>(<span class="st">&quot;dataSets&quot;</span>)</code></pre></div>
<p>We’re going to use the <code>states</code> data first, which originally appeared in <em>Statistics with Stata</em> by Lawrence C. Hamilton.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># read the states data</span>
  states_data &lt;-<span class="st"> </span><span class="kw">read_rds</span>(<span class="st">&quot;dataSets/states.rds&quot;</span>) </code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Variable</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">csat</td>
<td align="left">Mean composite SAT score</td>
</tr>
<tr class="even">
<td align="left">expense</td>
<td align="left">Per pupil expenditures</td>
</tr>
<tr class="odd">
<td align="left">percent</td>
<td align="left">% HS graduates taking SAT</td>
</tr>
<tr class="even">
<td align="left">income</td>
<td align="left">Median household income, $1,000</td>
</tr>
<tr class="odd">
<td align="left">region</td>
<td align="left">Geographic region: West, N. East, South, Midwest</td>
</tr>
<tr class="even">
<td align="left">house</td>
<td align="left">House ’91 environ. voting, %</td>
</tr>
<tr class="odd">
<td align="left">senate</td>
<td align="left">Senate ’91 environ. voting, %</td>
</tr>
<tr class="even">
<td align="left">energy</td>
<td align="left">Per capita energy consumed, Btu</td>
</tr>
<tr class="odd">
<td align="left">metro</td>
<td align="left">Metropolitan area population, %</td>
</tr>
<tr class="even">
<td align="left">waste</td>
<td align="left">Per capita solid waste, tons</td>
</tr>
</tbody>
</table>
</div>
<div id="examine-the-data" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Examine the data</h3>
<p>Start by examining the data to check for problems.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># summary of expense and csat columns, all rows</span>
  sts_ex_sat &lt;-<span class="st"> </span><span class="kw">subset</span>(states_data, <span class="dt">select =</span> <span class="kw">c</span>(<span class="st">&quot;expense&quot;</span>, <span class="st">&quot;csat&quot;</span>))
  <span class="kw">summary</span>(sts.ex.sat)
  <span class="co"># correlation between expense and csat</span>
  <span class="kw">cor</span>(sts_ex_sat) </code></pre></div>
</div>
<div id="plot-the-data" class="section level3">
<h3><span class="header-section-number">3.2.3</span> Plot the data</h3>
<p>Plot the data to look for multivariate outliers, non-linear relationships etc.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># scatter plot of expense vs csat</span>
  <span class="kw">plot</span>(sts_ex_sat)</code></pre></div>
<div class="figure">
<img src="R/Rmodels/images/statesCorr1.png" />

</div>
</div>
</div>
<div id="models-with-continuous-outcomes" class="section level2">
<h2><span class="header-section-number">3.3</span> Models with continuous outcomes</h2>
<ul>
<li>Ordinary least squares (OLS) regression models can be fit with the <code>lm()</code> function</li>
<li>For example, we can use <code>lm()</code> to predict SAT scores based on per-pupal expenditures:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Fit our regression model</span>
  sat_mod &lt;-<span class="st"> </span><span class="kw">lm</span>(csat <span class="op">~</span><span class="st"> </span>expense, <span class="co"># regression formula</span>
                <span class="dt">data=</span>states_data) <span class="co"># data </span>
                
  <span class="co"># Summarize and print the results</span>
  <span class="kw">summary</span>(sat_mod) <span class="co"># show regression coefficients table</span></code></pre></div>
<div id="why-is-the-association-between-expense-sat-scores-negative" class="section level3">
<h3><span class="header-section-number">3.3.1</span> Why is the association between expense &amp; SAT scores <em>negative</em>?</h3>
<p>Many people find it surprising that the per-capita expenditure on students is negatively related to SAT scores. The beauty of multiple regression is that we can try to pull these apart. What would the association between expense and SAT scores be if there were no difference among the states in the percentage of students taking the SAT?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">lm</span>(csat <span class="op">~</span><span class="st"> </span>expense <span class="op">+</span><span class="st"> </span>percent, <span class="dt">data =</span> states_data) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summary</span>()</code></pre></div>
</div>
<div id="the-lm-class-methods" class="section level3">
<h3><span class="header-section-number">3.3.2</span> The <code>lm</code> class &amp; methods</h3>
<p>OK, we fit our model. Now what?</p>
<ul>
<li>Examine the model object:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">class</span>(sat_mod)
  <span class="kw">str</span>(sat_mod)
  <span class="kw">names</span>(sat_mod)
  <span class="kw">methods</span>(<span class="dt">class =</span> <span class="kw">class</span>(sat_mod))</code></pre></div>
<ul>
<li>Use function methods to get more information about the fit</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">summary</span>(sat_mod)
  <span class="kw">summary</span>(sat_mod) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">coef</span>()
  <span class="kw">methods</span>(<span class="st">&quot;summary&quot;</span>)
  <span class="kw">confint</span>(sat_mod)</code></pre></div>
</div>
<div id="ols-regression-assumptions" class="section level3">
<h3><span class="header-section-number">3.3.3</span> OLS regression assumptions</h3>
<ul>
<li>OLS regression relies on several assumptions, including:
<ol style="list-style-type: decimal">
<li>The model includes all relevant variables (i.e., no omitted variable bias).</li>
<li>The model is linear in the parameters (i.e., the cofficients and error term).</li>
<li>The error term has an expected value of zero.</li>
<li>All right-hand-side variables are uncorrelated with the error term.</li>
<li>No right-hand-side variables are a perfect linear function of other RHS variables.</li>
<li>Observations of the error term are uncorrelated with each other.</li>
<li>The error term has constant variance (i.e., homoscedasticity).</li>
<li>(Optional - only for inference). The error term is normally distributed.</li>
</ol></li>
</ul>
<p>Investigate assumptions #7 and #8 visually by plotting your model:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>)) 
  <span class="kw">plot</span>(sat_mod)</code></pre></div>
</div>
<div id="comparing-models" class="section level3">
<h3><span class="header-section-number">3.3.4</span> Comparing models</h3>
<p>Do congressional voting patterns predict SAT scores over and above expense? Fit two models and compare them:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># fit another model, adding house and senate as predictors</span>
  sat_voting_mod &lt;-<span class="st"> </span><span class="kw">lm</span>(csat <span class="op">~</span><span class="st"> </span>expense <span class="op">+</span><span class="st"> </span>house <span class="op">+</span><span class="st"> </span>senate,
                        <span class="dt">data =</span> <span class="kw">na.omit</span>(states_data))

  sat_mod &lt;-<span class="st"> </span><span class="kw">update</span>(sat_mod, <span class="dt">data=</span><span class="kw">na.omit</span>(states_data))

  <span class="co"># compare using an F-test with the anova() function</span>
  <span class="kw">anova</span>(sat_mod, sat_voting_mod)
  <span class="kw">summary</span>(sat_voting_mod) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">coef</span>()</code></pre></div>
</div>
</div>
<div id="exercise-0-1" class="section level2">
<h2><span class="header-section-number">3.4</span> Exercise 0</h2>
<p><strong>Ordinary least squares regression</strong></p>
<p>Use the <em>states.rds</em> data set. Fit a model predicting energy consumed per capita (energy) from the percentage of residents living in metropolitan areas (metro). Be sure to</p>
<ol style="list-style-type: decimal">
<li>Examine/plot the data before fitting the model</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## </code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Print and interpret the model <code>summary()</code></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## </code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li><code>plot()</code> the model to look for deviations from modeling assumptions</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## </code></pre></div>
<p>Select one or more additional predictors to add to your model and repeat steps 1-3. Is this model significantly better than the model with <em>metro</em> as the only predictor?</p>
</div>
<div id="interactions-factors" class="section level2">
<h2><span class="header-section-number">3.5</span> Interactions &amp; factors</h2>
<div id="modeling-interactions" class="section level3">
<h3><span class="header-section-number">3.5.1</span> Modeling interactions</h3>
<p>Interactions allow us assess the extent to which the association between one predictor and the outcome depends on a second predictor. For example: Does the association between expense and SAT scores depend on the median income in the state?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">    <span class="co"># Add the interaction to the model</span>
  sat_expense_by_percent &lt;-<span class="st"> </span><span class="kw">lm</span>(csat <span class="op">~</span><span class="st"> </span>expense <span class="op">+</span><span class="st"> </span>income <span class="op">+</span><span class="st"> </span>expense <span class="op">:</span><span class="st"> </span>income, <span class="dt">data=</span>states_data)
  sat_expense_by_percent &lt;-<span class="st"> </span><span class="kw">lm</span>(csat <span class="op">~</span><span class="st"> </span>expense <span class="op">*</span><span class="st"> </span>income, <span class="dt">data=</span>states_data) <span class="co"># same as above, but shorter syntax</span>

  <span class="co"># Show the regression coefficients table</span>
  <span class="kw">summary</span>(sat_expense_by_percent) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">coef</span>() </code></pre></div>
</div>
<div id="regression-with-categorical-predictors" class="section level3">
<h3><span class="header-section-number">3.5.2</span> Regression with categorical predictors</h3>
<p>Let’s try to predict SAT scores from region, a categorical variable. Note that you must make sure R does not think your categorical variable is numeric.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># make sure R knows region is categorical</span>
  <span class="kw">str</span>(states_data<span class="op">$</span>region)
  states_data<span class="op">$</span>region &lt;-<span class="st"> </span><span class="kw">factor</span>(states_data<span class="op">$</span>region)

  <span class="co"># Add region to the model</span>
  sat_region &lt;-<span class="st"> </span><span class="kw">lm</span>(csat <span class="op">~</span><span class="st"> </span>region, <span class="dt">data=</span>states_data) 

  <span class="co"># Show the results</span>
  <span class="kw">summary</span>(sat_region) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">coef</span>() <span class="co"># show the regression coefficients table</span>
  <span class="kw">anova</span>(sat_region) <span class="co"># show ANOVA table</span></code></pre></div>
<p>Again, <strong>make sure to tell R which variables are categorical by converting them to factors!</strong></p>
</div>
<div id="setting-factor-reference-groups-contrasts" class="section level3">
<h3><span class="header-section-number">3.5.3</span> Setting factor reference groups &amp; contrasts</h3>
<p>In the previous example we use the default contrasts for region. The default in R is treatment contrasts, with the first level as the reference. We can change the reference group or use another coding scheme using the <code>C()</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># print default contrasts</span>
  <span class="kw">contrasts</span>(states_data<span class="op">$</span>region)

  <span class="co"># change the reference group</span>
  states_data<span class="op">$</span>region &lt;-<span class="st"> </span><span class="kw">relevel</span>(states_data<span class="op">$</span>region, <span class="dt">ref =</span> <span class="st">&quot;Midwest&quot;</span>)
  m1 &lt;-<span class="st"> </span><span class="kw">lm</span>(csat <span class="op">~</span><span class="st"> </span>region, <span class="dt">data=</span>states_data)
  <span class="kw">summary</span>(m1) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">coef</span>()

  <span class="co"># get all pairwise contrasts between means</span>
  means &lt;-<span class="st"> </span><span class="kw">emmeans</span>(m1, <span class="dt">specs =</span> <span class="op">~</span><span class="st"> </span>region)
  means
  <span class="kw">contrast</span>(means, <span class="dt">method =</span> <span class="st">&quot;pairwise&quot;</span>)

  <span class="co"># change the coding scheme</span>
  <span class="kw">lm</span>(csat <span class="op">~</span><span class="st"> </span><span class="kw">C</span>(region, contr.helmert), <span class="dt">data=</span>states_data) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summary</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">coef</span>()</code></pre></div>
<p>See <code>?contr.treatment</code> for other coding schemes and also <code>?contrasts</code> and <code>?relevel</code>.</p>
</div>
</div>
<div id="exercise-1-1" class="section level2">
<h2><span class="header-section-number">3.6</span> Exercise 1</h2>
<p><strong>Interactions &amp; factors</strong></p>
<p>Use the <code>states</code> data set.</p>
<ol style="list-style-type: decimal">
<li>Add on to the regression equation that you created in Exercise 1 by generating an interaction term and testing the interaction.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## </code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Try adding region to the model. Are there significant differences across the four regions?</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## </code></pre></div>
</div>
<div id="models-with-binary-outcomes" class="section level2">
<h2><span class="header-section-number">3.7</span> Models with binary outcomes</h2>
<div id="logistic-regression" class="section level3">
<h3><span class="header-section-number">3.7.1</span> Logistic regression</h3>
<p>This far we have used the <code>lm()</code> function to fit our regression models. <code>lm()</code> is great, but limited–in particular it only fits models for continuous dependent variables. For categorical dependent variables we can use the <code>glm()</code> function.</p>
<p>For these models we will use a different dataset, drawn from the National Health Interview Survey. From the <a href="http://www.cdc.gov/nchs/nhis.htm">CDC website</a>:</p>
<blockquote>
<p>The National Health Interview Survey (NHIS) has monitored the health of the nation since 1957. NHIS data on a broad range of health topics are collected through personal household interviews. For over 50 years, the U.S. Census Bureau has been the data collection agent for the National Health Interview Survey. Survey results have been instrumental in providing data to track health status, health care access, and progress toward achieving national health objectives.</p>
</blockquote>
<p>Load the National Health Interview Survey data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  NH11 &lt;-<span class="st"> </span><span class="kw">read_rds</span>(<span class="st">&quot;dataSets/NatHealth2011.rds&quot;</span>)</code></pre></div>
</div>
<div id="logistic-regression-example" class="section level3">
<h3><span class="header-section-number">3.7.2</span> Logistic regression example</h3>
<p>Let’s predict the probability of being diagnosed with hypertension based on age, sex, sleep, and bmi</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">str</span>(NH11<span class="op">$</span>hypev) <span class="co"># check stucture of hypev</span>
  <span class="kw">levels</span>(NH11<span class="op">$</span>hypev) <span class="co"># check levels of hypev</span>

  <span class="co"># collapse all missing values to NA</span>
  NH11<span class="op">$</span>hypev &lt;-<span class="st"> </span><span class="kw">factor</span>(NH11<span class="op">$</span>hypev, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;2 No&quot;</span>, <span class="st">&quot;1 Yes&quot;</span>))

  <span class="co"># run our regression model</span>
  hyp_out &lt;-<span class="st"> </span><span class="kw">glm</span>(hypev <span class="op">~</span><span class="st"> </span>age_p <span class="op">+</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>sleep <span class="op">+</span><span class="st"> </span>bmi,
                <span class="dt">data =</span> NH11, <span class="dt">family =</span> <span class="kw">binomial</span>(<span class="dt">link =</span> <span class="st">&quot;logit&quot;</span>))
  <span class="kw">summary</span>(hyp_out) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">coef</span>()</code></pre></div>
</div>
<div id="logistic-regression-coefficients" class="section level3">
<h3><span class="header-section-number">3.7.3</span> Logistic regression coefficients</h3>
<p>Generalized linear models use link functions, so raw coefficients are difficult to interpret. For example, the age coefficient of .06 in the previous model tells us that for every one unit increase in age, the log odds of hypertension diagnosis increases by 0.06. Since most of us are not used to thinking in log odds this is not too helpful!</p>
<p>One solution is to transform the coefficients to make them easier to interpret</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  hyp_out_tab &lt;-<span class="st"> </span><span class="kw">summary</span>(hyp_out) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">coef</span>()
  hyp_out_tab[, <span class="st">&quot;Estimate&quot;</span>] &lt;-<span class="st"> </span><span class="kw">coef</span>(hyp_out) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">exp</span>()
  hyp_out_tab</code></pre></div>
</div>
<div id="packages-for-computing-graphing-predicted-values" class="section level3">
<h3><span class="header-section-number">3.7.4</span> Packages for computing &amp; graphing predicted values</h3>
<p>Instead of doing all this ourselves, we can use the effects package to compute quantities of interest for us.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  eff &lt;-<span class="st"> </span><span class="kw">allEffects</span>(hyp_out)
  eff2 &lt;-<span class="st"> </span><span class="kw">allEffects</span>(hyp_out, <span class="dt">xlevels =</span> <span class="kw">list</span>(age_p, <span class="kw">seq</span>(<span class="dv">20</span>, <span class="dv">80</span>, <span class="dt">by =</span> <span class="dv">5</span>)))
  <span class="kw">plot</span>(eff)
  <span class="kw">as.data.frame</span>(eff) <span class="co"># confidence intervals</span></code></pre></div>
<div class="figure">
<img src="R/Rmodels/images/effects1.png" />

</div>
</div>
</div>
<div id="exercise-2" class="section level2">
<h2><span class="header-section-number">3.8</span> Exercise 2</h2>
<p><strong>Logistic regression</strong></p>
<p>Use the <code>NH11</code> data set that we loaded earlier.</p>
<ol style="list-style-type: decimal">
<li>Use <code>glm()</code> to conduct a logistic regression to predict ever worked (everwrk) using age (age_p) and marital status (r_maritl).</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## </code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Predict the probability of working for each level of marital status.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## </code></pre></div>
<p>Note that the data are not perfectly clean and ready to be modeled. You will need to clean up at least some of the variables before fitting the model.</p>
</div>
<div id="multilevel-modeling" class="section level2">
<h2><span class="header-section-number">3.9</span> Multilevel modeling</h2>
<div id="multilevel-modeling-overview" class="section level3">
<h3><span class="header-section-number">3.9.1</span> Multilevel modeling overview</h3>
<ul>
<li>Multi-level (AKA hierarchical) models are a type of <strong>mixed-effects</strong> models</li>
<li>Used to model variation due to group membership where the goal is to generalize to a population of groups</li>
<li>Can model different intercepts and/or slopes for each group</li>
<li>Mixed-effecs models include two types of predictors: <strong>fixed-effects</strong> and <strong>random effects</strong></li>
<li><strong>Fixed-effects</strong> – observed levels are of direct interest (.e.g, sex, political party…)</li>
<li><strong>Random-effects</strong> – observed levels not of direct interest: goal is to make inferences to a population represented by observed levels</li>
<li>In R the <code>lme4</code> package is the most popular for mixed effects models</li>
<li>Use the <code>lmer()</code> function for liner mixed models, <code>glmer()</code> for generalized linear mixed models</li>
</ul>
</div>
<div id="the-exam-data" class="section level3">
<h3><span class="header-section-number">3.9.2</span> The Exam data</h3>
<p>The Exam data set contans exam scores of 4,059 students from 65 schools in Inner London. The variable names are as follows:</p>
<table>
<thead>
<tr class="header">
<th align="left">Variable</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">school</td>
<td align="left">School ID - a factor.</td>
</tr>
<tr class="even">
<td align="left">normexam</td>
<td align="left">Normalized exam score.</td>
</tr>
<tr class="odd">
<td align="left">standLRT</td>
<td align="left">Standardised LR test score.</td>
</tr>
<tr class="even">
<td align="left">student</td>
<td align="left">Student id (within school) - a factor</td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  Exam &lt;-<span class="st"> </span><span class="kw">read_rds</span>(<span class="st">&quot;dataSets/Exam.rds&quot;</span>)</code></pre></div>
</div>
<div id="the-null-model-icc" class="section level3">
<h3><span class="header-section-number">3.9.3</span> The null model &amp; ICC</h3>
<p>As a preliminary step it is often useful to partition the variance in the dependent variable into the various levels. This can be accomplished by running a null model (i.e., a model with a random effects grouping structure, but no fixed-effects predictors).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># null model, grouping by school but not fixed effects.</span>
  Norm1 &lt;-<span class="kw">lmer</span>(normexam <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">|</span><span class="st"> </span>school),
                <span class="dt">data=</span><span class="kw">na.omit</span>(Exam), <span class="dt">REML =</span> <span class="ot">FALSE</span>)
  <span class="kw">summary</span>(Norm1)</code></pre></div>
<p>The is .169/(.169 + .848) = .17: 17% of the variance is at the school level.</p>
<p>There is no consensus on how to calculate p-values for MLMs; hence why they are omitted from the <code>lme4</code> output. But, if you really need p-values, the <code>lmerTest</code> package will calculate p-values for you (using the Satterthwaite approximation) and you can use the same model syntax:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># install.packages(&quot;lmerTest&quot;)</span>
  Norm1_test &lt;-<span class="st"> </span>lmerTest<span class="op">::</span><span class="kw">lmer</span>(normexam <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">|</span><span class="st"> </span>school),
                      <span class="dt">data=</span><span class="kw">na.omit</span>(Exam), <span class="dt">REML =</span> <span class="ot">FALSE</span>)
  <span class="kw">summary</span>(Norm1_test)</code></pre></div>
</div>
<div id="adding-fixed-effects-predictors" class="section level3">
<h3><span class="header-section-number">3.9.4</span> Adding fixed-effects predictors</h3>
<p>Predict exam scores from student’s standardized tests scores</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  Norm2 &lt;-<span class="kw">lmer</span>(normexam <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>standLRT <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">|</span><span class="st"> </span>school),
               <span class="dt">data=</span><span class="kw">na.omit</span>(Exam), <span class="dt">REML =</span> <span class="ot">FALSE</span>) 
  <span class="kw">summary</span>(Norm2) </code></pre></div>
</div>
<div id="multiple-degree-of-freedom-comparisons" class="section level3">
<h3><span class="header-section-number">3.9.5</span> Multiple degree of freedom comparisons</h3>
<p>As with <code>lm()</code> and <code>glm()</code> models, you can compare the two <code>lmer()</code> models using a likelihood ratio test with the <code>anova()</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">anova</span>(Norm1, Norm2)</code></pre></div>
</div>
<div id="random-slopes" class="section level3">
<h3><span class="header-section-number">3.9.6</span> Random slopes</h3>
<p>Add a random effect of students’ standardized test scores as well. Now in addition to estimating the distribution of intercepts across schools, we also estimate the distribution of the slope of exam on standardized test.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  Norm3 &lt;-<span class="st"> </span><span class="kw">lmer</span>(normexam <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>standLRT <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>standLRT <span class="op">|</span><span class="st"> </span>school), 
                <span class="dt">data =</span> <span class="kw">na.omit</span>(Exam), <span class="dt">REML =</span> <span class="ot">FALSE</span>) 
  <span class="kw">summary</span>(Norm3) </code></pre></div>
</div>
<div id="test-the-significance-of-the-random-slope" class="section level3">
<h3><span class="header-section-number">3.9.7</span> Test the significance of the random slope</h3>
<p>To test the significance of a random slope just compare models with and without the random slope term using a likelihood ratio test:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">anova</span>(Norm2, Norm3) </code></pre></div>
</div>
</div>
<div id="exercise-3-1" class="section level2">
<h2><span class="header-section-number">3.10</span> Exercise 3</h2>
<p><strong>Multilevel modeling</strong></p>
<p>Use the <code>bh1996</code> dataset:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(bh1996, <span class="dt">package=</span><span class="st">&quot;multilevel&quot;</span>)</code></pre></div>
<p>From the data documentation:</p>
<blockquote>
<p>Variables are Leadership Climate (LEAD), Well-Being (WBEING), and Work Hours (HRS). The group identifier is named “GRP”.</p>
</blockquote>
<ol style="list-style-type: decimal">
<li>Create a null model predicting wellbeing (“WBEING”)</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## </code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Calculate the ICC for your null model</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## </code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Run a second multi-level model that adds two individual-level predictors, average number of hours worked (“HRS”) and leadership skills (“LEAD”) to the model and interpret your output.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## </code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Now, add a random effect of average number of hours worked (“HRS”) to the model and interpret your output. Test the significance of this random term.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## </code></pre></div>
</div>
<div id="exercise-solutions-1" class="section level2">
<h2><span class="header-section-number">3.11</span> Exercise solutions</h2>
<div id="ex-0-prototype-1" class="section level3">
<h3><span class="header-section-number">3.11.1</span> Ex 0: prototype</h3>
<p>Use the <em>states.rds</em> data set.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  states &lt;-<span class="st"> </span><span class="kw">read_rds</span>(<span class="st">&quot;dataSets/states.rds&quot;</span>)</code></pre></div>
<p>Fit a model predicting energy consumed per capita (energy) from the percentage of residents living in metropolitan areas (metro). Be sure to</p>
<ol style="list-style-type: decimal">
<li>Examine/plot the data before fitting the model</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  states_en_met &lt;-<span class="st"> </span><span class="kw">subset</span>(states, <span class="dt">select =</span> <span class="kw">c</span>(<span class="st">&quot;metro&quot;</span>, <span class="st">&quot;energy&quot;</span>))
  <span class="kw">summary</span>(states_en_met)
  <span class="kw">plot</span>(states_en_met)
  <span class="kw">cor</span>(states_en_met, <span class="dt">use=</span><span class="st">&quot;pairwise&quot;</span>)</code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Print and interpret the model <code>summary()</code></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  mod_en_met &lt;-<span class="st"> </span><span class="kw">lm</span>(energy <span class="op">~</span><span class="st"> </span>metro, <span class="dt">data =</span> states)
  <span class="kw">summary</span>(mod_en_met)</code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li><code>plot()</code> the model to look for deviations from modeling assumptions</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">plot</span>(mod_en_met)</code></pre></div>
<p>Select one or more additional predictors to add to your model and repeat steps 1-3. Is this model significantly better than the model with <em>metro</em> as the only predictor?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  states_en_met_pop_wst &lt;-<span class="st"> </span><span class="kw">subset</span>(states, <span class="dt">select =</span> <span class="kw">c</span>(<span class="st">&quot;energy&quot;</span>, <span class="st">&quot;metro&quot;</span>, <span class="st">&quot;pop&quot;</span>, <span class="st">&quot;waste&quot;</span>))
  <span class="kw">summary</span>(states_en_met_pop_wst)
  <span class="kw">plot</span>(states_en_met_pop_wst)
  <span class="kw">cor</span>(states_en_met_pop_wst, <span class="dt">use =</span> <span class="st">&quot;pairwise&quot;</span>)

  mod_en_met_pop_waste &lt;-<span class="st"> </span><span class="kw">lm</span>(energy <span class="op">~</span><span class="st"> </span>metro <span class="op">+</span><span class="st"> </span>pop <span class="op">+</span><span class="st"> </span>waste, <span class="dt">data =</span> states)
  <span class="kw">summary</span>(mod_en_met_pop_waste)
  <span class="kw">anova</span>(mod_en_met, mod_en_met_pop_waste)</code></pre></div>
</div>
<div id="ex-1-prototype-1" class="section level3">
<h3><span class="header-section-number">3.11.2</span> Ex 1: prototype</h3>
<p>Use the states data set.</p>
<ol style="list-style-type: decimal">
<li>Add on to the regression equation that you created in exercise 1 by generating an interaction term and testing the interaction.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  mod_en_metro_by_waste &lt;-<span class="st"> </span><span class="kw">lm</span>(energy <span class="op">~</span><span class="st"> </span>metro <span class="op">*</span><span class="st"> </span>waste, <span class="dt">data =</span> states)</code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Try adding a region to the model. Are there significant differences across the four regions?</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  mod_en_region &lt;-<span class="st"> </span><span class="kw">lm</span>(energy <span class="op">~</span><span class="st"> </span>metro <span class="op">*</span><span class="st"> </span>waste <span class="op">+</span><span class="st"> </span>region, <span class="dt">data =</span> states)
  <span class="kw">anova</span>(mod_en_region)</code></pre></div>
</div>
<div id="ex-2-prototype" class="section level3">
<h3><span class="header-section-number">3.11.3</span> Ex 2: prototype</h3>
<p>Use the NH11 data set that we loaded earlier. Note that the data is not perfectly clean and ready to be modeled. You will need to clean up at least some of the variables before fitting the model.</p>
<ol style="list-style-type: decimal">
<li>Use glm to conduct a logistic regression to predict ever worked (everwrk) using age (age_p) and marital status (r_maritl).</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  nh11_wrk_age_mar &lt;-<span class="st"> </span><span class="kw">subset</span>(NH11, <span class="dt">select =</span> <span class="kw">c</span>(<span class="st">&quot;everwrk&quot;</span>, <span class="st">&quot;age_p&quot;</span>, <span class="st">&quot;r_maritl&quot;</span>))
  <span class="kw">summary</span>(nh11_wrk_age_mar)

  NH11 &lt;-<span class="st"> </span><span class="kw">transform</span>(NH11,
                    <span class="dt">everwrk =</span> <span class="kw">factor</span>(everwrk, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;1 Yes&quot;</span>, <span class="st">&quot;2 No&quot;</span>)),
                    <span class="dt">r_maritl =</span> <span class="kw">droplevels</span>(r_maritl))

  mod_wk_age_mar &lt;-<span class="st"> </span><span class="kw">glm</span>(everwrk <span class="op">~</span><span class="st"> </span>age_p <span class="op">+</span><span class="st"> </span>r_maritl, <span class="dt">data =</span> NH11,
                        <span class="dt">family =</span> <span class="kw">binomial</span>(<span class="dt">link =</span> <span class="st">&quot;logit&quot;</span>))

  <span class="kw">summary</span>(mod_wk_age_mar)</code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Predict the probability of working for each level of marital status.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">data.frame</span>(<span class="kw">Effect</span>(<span class="st">&quot;r_maritl&quot;</span>, mod_wk_age_mar))</code></pre></div>
</div>
<div id="ex-3-prototype-1" class="section level3">
<h3><span class="header-section-number">3.11.4</span> Ex 3: prototype</h3>
<p>Use the dataset, bh1996:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">data</span>(bh1996, <span class="dt">package=</span><span class="st">&quot;multilevel&quot;</span>)</code></pre></div>
<p>From the data documentation:</p>
<blockquote>
<p>Variables are Cohesion (COHES), Leadership Climate (LEAD), Well-Being (WBEING) and Work Hours (HRS). The group identifier is named “GRP”.</p>
</blockquote>
<ol style="list-style-type: decimal">
<li>Create a null model predicting wellbeing (“WBEING”)</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  mod_grp0 &lt;-<span class="st"> </span><span class="kw">lmer</span>(WBEING <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">|</span><span class="st"> </span>GRP), <span class="dt">data =</span> bh1996)
  <span class="kw">summary</span>(mod_grp0)</code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Run a second multi-level model that adds two individual-level predictors, average number of hours worked (“HRS”) and leadership skills (“LEAD”) to the model and interpret your output.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  mod_grp1 &lt;-<span class="st"> </span><span class="kw">lmer</span>(WBEING <span class="op">~</span><span class="st"> </span>HRS <span class="op">+</span><span class="st"> </span>LEAD <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">|</span><span class="st"> </span>GRP), <span class="dt">data =</span> bh1996)
  <span class="kw">summary</span>(mod_grp1)</code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Now, add a random effect of average number of hours worked (“HRS”) to the model and interpret your output. Test the significance of this random term.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  mod_grp2 &lt;-<span class="st"> </span><span class="kw">lmer</span>(WBEING <span class="op">~</span><span class="st"> </span>HRS <span class="op">+</span><span class="st"> </span>LEAD <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>HRS <span class="op">|</span><span class="st"> </span>GRP), <span class="dt">data =</span> bh1996)
  <span class="kw">anova</span>(mod_grp1, mod_grp2)</code></pre></div>
</div>
</div>
<div id="wrap-up-2" class="section level2">
<h2><span class="header-section-number">3.12</span> Wrap-up</h2>
<div id="feedback-2" class="section level3">
<h3><span class="header-section-number">3.12.1</span> Feedback</h3>
<p>These workshops are a work in progress, please provide any feedback to: <a href="mailto:help@iq.harvard.edu">help@iq.harvard.edu</a></p>
</div>
<div id="resources-2" class="section level3">
<h3><span class="header-section-number">3.12.2</span> Resources</h3>
<ul>
<li>IQSS
<ul>
<li>Workshops: <a href="https://dss.iq.harvard.edu/workshop-materials" class="uri">https://dss.iq.harvard.edu/workshop-materials</a></li>
<li>Data Science Services: <a href="https://dss.iq.harvard.edu/" class="uri">https://dss.iq.harvard.edu/</a></li>
<li>Research Computing Environment: <a href="https://iqss.github.io/dss-rce/" class="uri">https://iqss.github.io/dss-rce/</a></li>
</ul></li>
<li>HBS
<ul>
<li>Research Computing Services workshops: <a href="https://training.rcs.hbs.org/workshops" class="uri">https://training.rcs.hbs.org/workshops</a></li>
<li>Other HBS RCS resources: <a href="https://training.rcs.hbs.org/workshop-materials" class="uri">https://training.rcs.hbs.org/workshop-materials</a></li>
<li>RCS consulting email: <a href="mailto:research@hbs.edu">mailto:research@hbs.edu</a></li>
</ul></li>
</ul>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="Rintro.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="Rgraphics.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/IQSS/dss-workshops-redux/edit/master/R/Rmodels/Rmodels.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["Data_Science_Workshops.pdf", "Data_Science_Workshops.epub"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
