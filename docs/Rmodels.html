<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>R Regression Models | Data Science Workshops</title>
  <meta name="description" content="R Regression Models | Data Science Workshops" />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content="R Regression Models | Data Science Workshops" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="R Regression Models | Data Science Workshops" />
  <meta name="github-repo" content="IQSS/dss-workshops" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R Regression Models | Data Science Workshops" />
  
  <meta name="twitter:description" content="R Regression Models | Data Science Workshops" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="Rintro.html"/>
<link rel="next" href="Rgraphics.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Science Workshop Materials</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Table of Contents</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contributors"><i class="fa fa-check"></i>Contributors</a></li>
</ul></li>
<li class="part"><span><b>I General</b></span></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html"><i class="fa fa-check"></i>Data Science Tools</a><ul>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#tools-for-working-with-data"><i class="fa fa-check"></i>Tools for working with data</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#the-puzzle-pieces"><i class="fa fa-check"></i>The puzzle pieces</a><ul>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#data-analysis-building-blocks"><i class="fa fa-check"></i>Data analysis building blocks</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#examples"><i class="fa fa-check"></i>Examples</a><ul>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#old-school-example"><i class="fa fa-check"></i>Old-school example</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#something-old-something-new"><i class="fa fa-check"></i>Something old &amp; something new</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#a-modern-version"><i class="fa fa-check"></i>A modern version</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#data-storage-retrieval"><i class="fa fa-check"></i>Data storage &amp; retrieval</a><ul>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#text-files"><i class="fa fa-check"></i>Text files</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#binary-files"><i class="fa fa-check"></i>Binary files</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#databases"><i class="fa fa-check"></i>Databases</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#distributed-file-storage"><i class="fa fa-check"></i>Distributed file storage</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#programming-languages-statistics-packages"><i class="fa fa-check"></i>Programming languages &amp; statistics packages</a><ul>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#programming-language-features"><i class="fa fa-check"></i>Programming language features</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#program-comparison"><i class="fa fa-check"></i>Program comparison</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#examples-read-data-from-a-file-summarize"><i class="fa fa-check"></i>Examples: Read data from a file &amp; summarize</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#examples-fit-a-linear-regression"><i class="fa fa-check"></i>Examples: Fit a linear regression</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#examples-extract-links-for-.html-file"><i class="fa fa-check"></i>Examples: Extract links for .html file</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#creating-reports"><i class="fa fa-check"></i>Creating reports</a><ul>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#markup-languages"><i class="fa fa-check"></i>Markup languages</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#word-processors"><i class="fa fa-check"></i>Word processors</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#text-editors-integrated-development-environments"><i class="fa fa-check"></i>Text editors &amp; Integrated Development Environments</a><ul>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#language-specific-editors-ides"><i class="fa fa-check"></i>Language specific editors &amp; IDEs</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#general-purpose-editors-ides"><i class="fa fa-check"></i>General purpose editors &amp; IDEs</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#literate-programming-notebooks"><i class="fa fa-check"></i>Literate programming &amp; notebooks</a><ul>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#literate-programming"><i class="fa fa-check"></i>Literate programming</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#notebooks"><i class="fa fa-check"></i>Notebooks</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#big-data-annoying-data-computationally-intensive-methods"><i class="fa fa-check"></i>Big data, annoying data, &amp; computationally intensive methods</a><ul>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#computing-clusters-at-harvard"><i class="fa fa-check"></i>Computing clusters at Harvard</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#wrap-up"><i class="fa fa-check"></i>Wrap up</a><ul>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#feedback"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#resources"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II R</b></span></li>
<li class="chapter" data-level="" data-path="Rinstall.html"><a href="Rinstall.html"><i class="fa fa-check"></i>R Installation</a><ul>
<li class="chapter" data-level="" data-path="Rinstall.html"><a href="Rinstall.html#troubleshooting-session"><i class="fa fa-check"></i>Troubleshooting session</a></li>
<li class="chapter" data-level="" data-path="Rinstall.html"><a href="Rinstall.html#software"><i class="fa fa-check"></i>Software</a></li>
<li class="chapter" data-level="" data-path="Rinstall.html"><a href="Rinstall.html#materials"><i class="fa fa-check"></i>Materials</a></li>
<li><a href="Rinstall.html#installing-the-tidyverse">Installing the <code>tidyverse</code></a><ul>
<li><a href="Rinstall.html#troubleshooting-tidyverse-installation">Troubleshooting <code>tidyverse</code> installation</a></li>
</ul></li>
<li><a href="Rinstall.html#installing-rmarkdown-optional">Installing <code>rmarkdown</code> (optional)</a></li>
<li class="chapter" data-level="" data-path="Rinstall.html"><a href="Rinstall.html#resources-1"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html"><i class="fa fa-check"></i>R Introduction</a><ul>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#setup"><i class="fa fa-check"></i>Setup</a><ul>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#class-structure"><i class="fa fa-check"></i>Class Structure</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#goals"><i class="fa fa-check"></i>Goals</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#r-basics"><i class="fa fa-check"></i>R basics</a><ul>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#what-is-r"><i class="fa fa-check"></i>What is R?</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#why-use-r"><i class="fa fa-check"></i>Why use R?</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#how-does-r-work"><i class="fa fa-check"></i>How does R work?</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#interfaces"><i class="fa fa-check"></i>Interfaces</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#launch-a-session"><i class="fa fa-check"></i>Launch a session</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#exercise-0"><i class="fa fa-check"></i>Exercise 0</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#syntax-rules"><i class="fa fa-check"></i>Syntax rules</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#function-calls"><i class="fa fa-check"></i>Function calls</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#assignment"><i class="fa fa-check"></i>Assignment</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#asking-for-help"><i class="fa fa-check"></i>Asking for help</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#reading-data"><i class="fa fa-check"></i>Reading data</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#installing-using-packages"><i class="fa fa-check"></i>Installing &amp; using packages</a></li>
<li><a href="Rintro.html#the-tidyverse">The <code>tidyverse</code></a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#readers-for-common-file-types"><i class="fa fa-check"></i>Readers for common file types</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#baby-names-data"><i class="fa fa-check"></i>Baby names data</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#exercise-1"><i class="fa fa-check"></i>Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#manipulating-data"><i class="fa fa-check"></i>Manipulating data</a><ul>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#filter-select-arrange"><i class="fa fa-check"></i>Filter, select, &amp; arrange</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#logical-relational-operators"><i class="fa fa-check"></i>Logical &amp; relational operators</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#exercise-2.1"><i class="fa fa-check"></i>Exercise 2.1</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#pipe-operator"><i class="fa fa-check"></i>Pipe operator</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#exercise-2.2"><i class="fa fa-check"></i>Exercise 2.2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#plotting-data"><i class="fa fa-check"></i>Plotting data</a><ul>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#exercise-3"><i class="fa fa-check"></i>Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#creating-variables"><i class="fa fa-check"></i>Creating variables</a><ul>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#create-or-modify-columns"><i class="fa fa-check"></i>Create or modify columns</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#operating-by-group"><i class="fa fa-check"></i>Operating by group</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#recoding-variables"><i class="fa fa-check"></i>Recoding variables</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#exercise-4"><i class="fa fa-check"></i>Exercise 4</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#aggregating-variables"><i class="fa fa-check"></i>Aggregating variables</a><ul>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#exercise-5"><i class="fa fa-check"></i>Exercise 5</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#saving-work"><i class="fa fa-check"></i>Saving work</a><ul>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#saving-individual-datasets"><i class="fa fa-check"></i>Saving individual datasets</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#saving-multiple-datasets"><i class="fa fa-check"></i>Saving multiple datasets</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#saving-loading-workspaces"><i class="fa fa-check"></i>Saving &amp; loading workspaces</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#exercise-solutions"><i class="fa fa-check"></i>Exercise solutions</a><ul>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#ex-0-prototype"><i class="fa fa-check"></i>Ex 0: prototype</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#ex-1-prototype"><i class="fa fa-check"></i>Ex 1: prototype</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#ex-2.1-prototype"><i class="fa fa-check"></i>Ex 2.1: prototype</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#ex-2.2-prototype"><i class="fa fa-check"></i>Ex 2.2: prototype</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#ex-3-prototype"><i class="fa fa-check"></i>Ex 3: prototype</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#ex-4-prototype"><i class="fa fa-check"></i>Ex 4: prototype</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#ex-5-prototype"><i class="fa fa-check"></i>Ex 5: prototype</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#wrap-up-1"><i class="fa fa-check"></i>Wrap-up</a><ul>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#feedback-1"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#resources-2"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html"><i class="fa fa-check"></i>R Regression Models</a><ul>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#setup-1"><i class="fa fa-check"></i>Setup</a><ul>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#class-structure-1"><i class="fa fa-check"></i>Class Structure</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#prerequisites-1"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#goals-1"><i class="fa fa-check"></i>Goals</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#launch-an-r-session"><i class="fa fa-check"></i>Launch an R session</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#packages"><i class="fa fa-check"></i>Packages</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#modeling-workflow"><i class="fa fa-check"></i>Modeling workflow</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#r-modeling-ecosystem"><i class="fa fa-check"></i>R modeling ecosystem</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#before-fitting-a-model"><i class="fa fa-check"></i>Before fitting a model</a><ul>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#load-the-data"><i class="fa fa-check"></i>Load the data</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#examine-the-data"><i class="fa fa-check"></i>Examine the data</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#plot-the-data"><i class="fa fa-check"></i>Plot the data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#models-with-continuous-outcomes"><i class="fa fa-check"></i>Models with continuous outcomes</a><ul>
<li><a href="Rmodels.html#why-is-the-association-between-expense-sat-scores-negative">Why is the association between expense &amp; SAT scores <em>negative</em>?</a></li>
<li><a href="Rmodels.html#the-lm-class-methods">The <code>lm</code> class &amp; methods</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#ols-regression-assumptions"><i class="fa fa-check"></i>OLS regression assumptions</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#comparing-models"><i class="fa fa-check"></i>Comparing models</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#exercise-0-1"><i class="fa fa-check"></i>Exercise 0</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#interactions-factors"><i class="fa fa-check"></i>Interactions &amp; factors</a><ul>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#modeling-interactions"><i class="fa fa-check"></i>Modeling interactions</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#regression-with-categorical-predictors"><i class="fa fa-check"></i>Regression with categorical predictors</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#setting-factor-reference-groups-contrasts"><i class="fa fa-check"></i>Setting factor reference groups &amp; contrasts</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#exercise-1-1"><i class="fa fa-check"></i>Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#models-with-binary-outcomes"><i class="fa fa-check"></i>Models with binary outcomes</a><ul>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#logistic-regression"><i class="fa fa-check"></i>Logistic regression</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#logistic-regression-example"><i class="fa fa-check"></i>Logistic regression example</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#odds-ratios"><i class="fa fa-check"></i>Odds ratios</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#predicted-marginal-means"><i class="fa fa-check"></i>Predicted marginal means</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#exercise-2"><i class="fa fa-check"></i>Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#multilevel-modeling"><i class="fa fa-check"></i>Multilevel modeling</a><ul>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#multilevel-modeling-overview"><i class="fa fa-check"></i>Multilevel modeling overview</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#the-exam-data"><i class="fa fa-check"></i>The Exam data</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#the-null-model-icc"><i class="fa fa-check"></i>The null model &amp; ICC</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#adding-fixed-effects-predictors"><i class="fa fa-check"></i>Adding fixed-effects predictors</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#multiple-degree-of-freedom-comparisons"><i class="fa fa-check"></i>Multiple degree of freedom comparisons</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#random-slopes"><i class="fa fa-check"></i>Random slopes</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#test-the-significance-of-the-random-slope"><i class="fa fa-check"></i>Test the significance of the random slope</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#exercise-3-1"><i class="fa fa-check"></i>Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#exercise-solutions-1"><i class="fa fa-check"></i>Exercise solutions</a><ul>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#ex-0-prototype-1"><i class="fa fa-check"></i>Ex 0: prototype</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#ex-1-prototype-1"><i class="fa fa-check"></i>Ex 1: prototype</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#ex-2-prototype"><i class="fa fa-check"></i>Ex 2: prototype</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#ex-3-prototype-1"><i class="fa fa-check"></i>Ex 3: prototype</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#wrap-up-2"><i class="fa fa-check"></i>Wrap-up</a><ul>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#feedback-2"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#resources-3"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html"><i class="fa fa-check"></i>R Graphics</a><ul>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#setup-2"><i class="fa fa-check"></i>Setup</a><ul>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#class-structure-2"><i class="fa fa-check"></i>Class Structure</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#prerequisites-2"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#launch-an-r-session-1"><i class="fa fa-check"></i>Launch an R session</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#packages-1"><i class="fa fa-check"></i>Packages</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#goals-2"><i class="fa fa-check"></i>Goals</a></li>
</ul></li>
<li><a href="Rgraphics.html#why-ggplot2">Why <code>ggplot2</code>?</a><ul>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#what-is-the-grammar-of-graphics"><i class="fa fa-check"></i>What is the Grammar Of Graphics?</a></li>
<li><a href="Rgraphics.html#ggplot2-vs-base-graphics"><code>ggplot2</code> VS base graphics</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#geometric-objects-aesthetics"><i class="fa fa-check"></i>Geometric objects &amp; aesthetics</a><ul>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#aesthetic-mapping"><i class="fa fa-check"></i>Aesthetic mapping</a></li>
<li><a href="Rgraphics.html#geometric-objects-geom">Geometric objects (<code>geom</code>)</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#aesthetic-mapping-vs-assignment"><i class="fa fa-check"></i>Aesthetic mapping VS assignment</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#mapping-variables-to-other-aesthetics"><i class="fa fa-check"></i>Mapping variables to other aesthetics</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-0-2"><i class="fa fa-check"></i>Exercise 0</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#statistical-transformations"><i class="fa fa-check"></i>Statistical transformations</a><ul>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#why-transform-data"><i class="fa fa-check"></i>Why transform data?</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#setting-arguments"><i class="fa fa-check"></i>Setting arguments</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#changing-the-transformation"><i class="fa fa-check"></i>Changing the transformation</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-1-2"><i class="fa fa-check"></i>Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#scales"><i class="fa fa-check"></i>Scales</a><ul>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#controlling-aesthetic-mapping"><i class="fa fa-check"></i>Controlling aesthetic mapping</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#common-scale-arguments"><i class="fa fa-check"></i>Common scale arguments</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#scale-modification-examples"><i class="fa fa-check"></i>Scale modification examples</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#using-different-color-scales"><i class="fa fa-check"></i>Using different color scales</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#available-scales"><i class="fa fa-check"></i>Available scales</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-2-1"><i class="fa fa-check"></i>Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#faceting"><i class="fa fa-check"></i>Faceting</a><ul>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#what-is-faceting"><i class="fa fa-check"></i>What is faceting?</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#what-is-the-trend-in-housing-prices-in-each-state"><i class="fa fa-check"></i>What is the trend in housing prices in each state?</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#faceting-to-the-rescue"><i class="fa fa-check"></i>Faceting to the rescue</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#themes"><i class="fa fa-check"></i>Themes</a><ul>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#what-are-themes"><i class="fa fa-check"></i>What are themes?</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#overriding-theme-defaults"><i class="fa fa-check"></i>Overriding theme defaults</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#creating-saving-new-themes"><i class="fa fa-check"></i>Creating &amp; saving new themes</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#saving-plots"><i class="fa fa-check"></i>Saving plots</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#the-1-faq"><i class="fa fa-check"></i>The #1 FAQ</a><ul>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#map-aesthetic-to-different-columns"><i class="fa fa-check"></i>Map aesthetic to different columns</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-3-2"><i class="fa fa-check"></i>Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-solutions-2"><i class="fa fa-check"></i>Exercise solutions</a><ul>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#ex-0-prototype-2"><i class="fa fa-check"></i>Ex 0: prototype</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#ex-1-prototype-2"><i class="fa fa-check"></i>Ex 1: prototype</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#ex-2-prototype-1"><i class="fa fa-check"></i>Ex 2: prototype</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#ex-3-prototype-2"><i class="fa fa-check"></i>Ex 3: prototype</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#wrap-up-3"><i class="fa fa-check"></i>Wrap-up</a><ul>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#feedback-3"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#resources-4"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html"><i class="fa fa-check"></i>R Data Wrangling</a><ul>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#setup-3"><i class="fa fa-check"></i>Setup</a><ul>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#class-structure-3"><i class="fa fa-check"></i>Class Structure</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#prerequisites-3"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#launch-an-r-session-2"><i class="fa fa-check"></i>Launch an R session</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#packages-2"><i class="fa fa-check"></i>Packages</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#workshop-outline"><i class="fa fa-check"></i>Workshop Outline</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#working-with-excel-worksheets"><i class="fa fa-check"></i>Working with Excel worksheets</a><ul>
<li><a href="RDataWrangling.html#iterating-with-map">Iterating with <code>map()</code></a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#filtering-strings-using-regex"><i class="fa fa-check"></i>Filtering strings using regex</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#writing-your-own-functions"><i class="fa fa-check"></i>Writing your own functions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#reading-excel-data-files"><i class="fa fa-check"></i>Reading Excel data files</a><ul>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-1-3"><i class="fa fa-check"></i>Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#data-cleanup"><i class="fa fa-check"></i>Data cleanup</a><ul>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#selecting-columns"><i class="fa fa-check"></i>Selecting columns</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#data-types-and-structures"><i class="fa fa-check"></i>Data types and structures</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#list-indexing"><i class="fa fa-check"></i>List indexing</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#dropping-missing-values"><i class="fa fa-check"></i>Dropping missing values</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-2-2"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#reshaping-from-wide-to-long"><i class="fa fa-check"></i>Reshaping from wide to long</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-3-3"><i class="fa fa-check"></i>Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#data-organization-storage"><i class="fa fa-check"></i>Data organization &amp; storage</a><ul>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#a-list-of-data-frames"><i class="fa fa-check"></i>A list of data frames</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#one-big-data-frame"><i class="fa fa-check"></i>One big data frame</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-4-1"><i class="fa fa-check"></i>Exercise 4</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-solutions-3"><i class="fa fa-check"></i>Exercise solutions</a><ul>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#ex-0-prototype-3"><i class="fa fa-check"></i>Ex 0: prototype</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#ex-1-prototype-3"><i class="fa fa-check"></i>Ex 1: prototype</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#ex-2-prototype-2"><i class="fa fa-check"></i>Ex 2: prototype</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#ex-3-prototype-3"><i class="fa fa-check"></i>Ex 3: prototype</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#ex-4-prototype-1"><i class="fa fa-check"></i>Ex 4: prototype</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#complete-code"><i class="fa fa-check"></i>Complete code</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#wrap-up-4"><i class="fa fa-check"></i>Wrap-up</a><ul>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#feedback-4"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#resources-5"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Python</b></span></li>
<li class="chapter" data-level="" data-path="PythonInstall.html"><a href="PythonInstall.html"><i class="fa fa-check"></i>Python Installation</a><ul>
<li class="chapter" data-level="" data-path="PythonInstall.html"><a href="PythonInstall.html#troubleshooting-session-1"><i class="fa fa-check"></i>Troubleshooting session</a></li>
<li class="chapter" data-level="" data-path="PythonInstall.html"><a href="PythonInstall.html#software-1"><i class="fa fa-check"></i>Software</a></li>
<li class="chapter" data-level="" data-path="PythonInstall.html"><a href="PythonInstall.html#materials-1"><i class="fa fa-check"></i>Materials</a></li>
<li class="chapter" data-level="" data-path="PythonInstall.html"><a href="PythonInstall.html#jupyter-notebook-interfaces"><i class="fa fa-check"></i>Jupyter notebook interfaces</a><ul>
<li class="chapter" data-level="" data-path="PythonInstall.html"><a href="PythonInstall.html#launch-jupyterlab"><i class="fa fa-check"></i>Launch JupyterLab</a></li>
<li class="chapter" data-level="" data-path="PythonInstall.html"><a href="PythonInstall.html#launch-jupyter-notebook"><i class="fa fa-check"></i>Launch Jupyter Notebook</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="PythonInstall.html"><a href="PythonInstall.html#resources-6"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html"><i class="fa fa-check"></i>Python Introduction</a><ul>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#setup-4"><i class="fa fa-check"></i>Setup</a><ul>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#class-structure-4"><i class="fa fa-check"></i>Class Structure</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#prerequisites-4"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#goals-3"><i class="fa fa-check"></i>Goals</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#python-basics"><i class="fa fa-check"></i>Python basics</a><ul>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#what-is-python"><i class="fa fa-check"></i>What is Python?</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#why-use-python"><i class="fa fa-check"></i>Why use Python?</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#how-does-python-work"><i class="fa fa-check"></i>How does Python work?</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#interfaces-1"><i class="fa fa-check"></i>Interfaces</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#launch-jupyterlab-1"><i class="fa fa-check"></i>Launch JupyterLab</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#syntax-rules-1"><i class="fa fa-check"></i>Syntax rules</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#function-calls-1"><i class="fa fa-check"></i>Function calls</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#assignment-1"><i class="fa fa-check"></i>Assignment</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#reading-data-1"><i class="fa fa-check"></i>Reading data</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#object-methods"><i class="fa fa-check"></i>Object methods</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#using-object-methods-lists"><i class="fa fa-check"></i>Using object methods &amp; lists</a><ul>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#splitting-a-string-into-a-list-of-words"><i class="fa fa-check"></i>Splitting a string into a list of words</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#working-with-lists"><i class="fa fa-check"></i>Working with lists</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#extracting-subsets-from-lists"><i class="fa fa-check"></i>Extracting subsets from lists</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#using-sets-to-count-unique-items"><i class="fa fa-check"></i>Using sets to count unique items</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#exercise-0-3"><i class="fa fa-check"></i>Exercise 0</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#control-flow"><i class="fa fa-check"></i>Control flow</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#logical-relational-operators-1"><i class="fa fa-check"></i>Logical &amp; relational operators</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#counting-list-elements"><i class="fa fa-check"></i>Counting list elements</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#exercise-1-4"><i class="fa fa-check"></i>Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#iterating-over-collections-of-data"><i class="fa fa-check"></i>Iterating over collections of data</a><ul>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#iterating-over-lists-using-for-loops"><i class="fa fa-check"></i>Iterating over lists using for-loops</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#organizing-results-in-dictionaries"><i class="fa fa-check"></i>Organizing results in dictionaries</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#exercise-2-3"><i class="fa fa-check"></i>Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#importing-packages"><i class="fa fa-check"></i>Importing packages</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#exercise-solutions-4"><i class="fa fa-check"></i>Exercise solutions</a><ul>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#ex-0-prototype-4"><i class="fa fa-check"></i>Ex 0: prototype</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#ex-1-prototype-4"><i class="fa fa-check"></i>Ex 1: prototype</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#ex-2-prototype-3"><i class="fa fa-check"></i>Ex 2: prototype</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#wrap-up-5"><i class="fa fa-check"></i>Wrap-up</a><ul>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#feedback-5"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#resources-7"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html"><i class="fa fa-check"></i>Python Web-Scraping</a><ul>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#setup-5"><i class="fa fa-check"></i>Setup</a><ul>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#class-structure-5"><i class="fa fa-check"></i>Class Structure</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#prerequisites-5"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#goals-4"><i class="fa fa-check"></i>Goals</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#webscraping-background"><i class="fa fa-check"></i>Webscraping background</a><ul>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#what-is-web-scraping"><i class="fa fa-check"></i>What is web scraping?</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#is-web-scraping-legal-is-it-ethical"><i class="fa fa-check"></i>Is web scraping legal? Is it ethical?</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#web-scraping-approaches"><i class="fa fa-check"></i>Web scraping approaches</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#how-does-the-web-work"><i class="fa fa-check"></i>How does the web work?</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#retrieve-data-in-json-format-if-you-can"><i class="fa fa-check"></i>Retrieve data in JSON format if you can</a><ul>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#examine-the-websites-structure"><i class="fa fa-check"></i>Examine the websites structure</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#launch-jupyterlab-2"><i class="fa fa-check"></i>Launch JupyterLab</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#making-requests"><i class="fa fa-check"></i>Making requests</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#parsing-json-data"><i class="fa fa-check"></i>Parsing JSON data</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#organizing-saving-the-data"><i class="fa fa-check"></i>Organizing &amp; saving the data</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#iterating-to-retrieve-all-the-data"><i class="fa fa-check"></i>Iterating to retrieve all the data</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#exercise-0-4"><i class="fa fa-check"></i>Exercise 0</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#parsing-html-if-you-have-to"><i class="fa fa-check"></i>Parsing HTML if you have to</a><ul>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#document-object-model-dom"><i class="fa fa-check"></i>Document Object Model (DOM)</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#retrieving-html"><i class="fa fa-check"></i>Retrieving HTML</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#parsing-html-using-the-lxml-library"><i class="fa fa-check"></i>Parsing HTML using the lxml library</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#using-xpath-to-extract-content-from-html"><i class="fa fa-check"></i>Using XPath to extract content from HTML</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#iterating-to-retrieve-content-from-a-list-of-html-elements"><i class="fa fa-check"></i>Iterating to retrieve content from a list of HTML elements</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#exercise-1-5"><i class="fa fa-check"></i>Exercise 1</a></li>
</ul></li>
<li><a href="PythonWebScrape.html#scrapy-for-large-complex-projects"><code>Scrapy</code>: for large / complex projects</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#browser-drivers-a-last-resort"><i class="fa fa-check"></i>Browser drivers: a last resort</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#exercise-solutions-5"><i class="fa fa-check"></i>Exercise solutions</a><ul>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#ex-0-prototype-5"><i class="fa fa-check"></i>Ex 0: prototype</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#ex-1-prototype-5"><i class="fa fa-check"></i>Ex 1: prototype</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#wrap-up-6"><i class="fa fa-check"></i>Wrap-up</a><ul>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#feedback-6"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#resources-8"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Stata</b></span></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html"><i class="fa fa-check"></i>Stata Introduction</a><ul>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#setup-6"><i class="fa fa-check"></i>Setup</a><ul>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#software-materials"><i class="fa fa-check"></i>Software &amp; Materials</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#organization"><i class="fa fa-check"></i>Organization</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#goals-5"><i class="fa fa-check"></i>Goals</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#why-stata"><i class="fa fa-check"></i>Why stata?</a><ul>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#stata-interface"><i class="fa fa-check"></i>Stata interface</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#do-files"><i class="fa fa-check"></i>Do-files</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#stata-help"><i class="fa fa-check"></i>Stata help</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#syntax-rules-2"><i class="fa fa-check"></i>Syntax rules</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#lets-get-started"><i class="fa fa-check"></i>Lets get started</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#reading-data-2"><i class="fa fa-check"></i>Reading data</a><ul>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#data-file-commands"><i class="fa fa-check"></i>Data file commands</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#a-note-about-path-names"><i class="fa fa-check"></i>A note about path names</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#wheres-my-data"><i class="fa fa-check"></i>Wheres my data?</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#reading-non-stata-data"><i class="fa fa-check"></i>Reading non-Stata data</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#exercise-0-5"><i class="fa fa-check"></i>Exercise 0</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#statistics-graphs"><i class="fa fa-check"></i>Statistics &amp; graphs</a><ul>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#frequently-used-commands"><i class="fa fa-check"></i>Frequently used commands</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#basic-graphing-commands"><i class="fa fa-check"></i>Basic graphing commands</a></li>
<li><a href="StataIntro.html#the-by-command">The <code>by</code> command</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#exercise-1-6"><i class="fa fa-check"></i>Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#basic-data-management"><i class="fa fa-check"></i>Basic data management</a><ul>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#labels"><i class="fa fa-check"></i>Labels</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#variable-value-labels"><i class="fa fa-check"></i>Variable &amp; value labels</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#exercise-2-4"><i class="fa fa-check"></i>Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#working-on-subsets"><i class="fa fa-check"></i>Working on subsets</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#generating-replacing-variables"><i class="fa fa-check"></i>Generating &amp; replacing variables</a><ul>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#exercise-3-4"><i class="fa fa-check"></i>Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#exercise-solutions-6"><i class="fa fa-check"></i>Exercise solutions</a><ul>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#ex-0-prototype-6"><i class="fa fa-check"></i>Ex 0: prototype</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#ex-1-prototype-6"><i class="fa fa-check"></i>Ex 1: prototype</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#ex-2-prototype-4"><i class="fa fa-check"></i>Ex 2: prototype</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#ex-3-prototype-4"><i class="fa fa-check"></i>Ex 3: prototype</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#wrap-up-7"><i class="fa fa-check"></i>Wrap-up</a><ul>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#feedback-7"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#resources-9"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html"><i class="fa fa-check"></i>Stata Data Management</a><ul>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#setup-7"><i class="fa fa-check"></i>Setup</a><ul>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#software-materials-1"><i class="fa fa-check"></i>Software &amp; Materials</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#organization-1"><i class="fa fa-check"></i>Organization</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#goals-6"><i class="fa fa-check"></i>Goals</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#opening-files"><i class="fa fa-check"></i>Opening Files</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#generating-replacing-variables-1"><i class="fa fa-check"></i>Generating &amp; replacing variables</a><ul>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#data-manipulation-commands"><i class="fa fa-check"></i>Data Manipulation Commands</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#generate-replace"><i class="fa fa-check"></i>Generate &amp; Replace</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#recode"><i class="fa fa-check"></i>Recode</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#egen"><i class="fa fa-check"></i>egen</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#exercise-0-6"><i class="fa fa-check"></i>Exercise 0</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#by-processing"><i class="fa fa-check"></i>By processing</a><ul>
<li><a href="StataDatMan.html#the-bysort-command">The <code>bysort</code> Command</a></li>
<li><a href="StataDatMan.html#by-prefix-vs.-by-options"><code>by</code> prefix vs. <code>by</code> options</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#missing-values"><i class="fa fa-check"></i>Missing values</a><ul>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#bulk-conversion-to-missing-values"><i class="fa fa-check"></i>Bulk Conversion to Missing Values</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#variable-types"><i class="fa fa-check"></i>Variable types</a><ul>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#converting-to-from-strings"><i class="fa fa-check"></i>Converting to &amp; from Strings</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#converting-strings-to-datetime"><i class="fa fa-check"></i>Converting Strings to Date/Time</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#formatting-numbers-as-dates"><i class="fa fa-check"></i>Formatting Numbers as Dates</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#exercise-1-7"><i class="fa fa-check"></i>Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#merging-appending-joining"><i class="fa fa-check"></i>Merging, appending, &amp; joining</a><ul>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#appending-datasets"><i class="fa fa-check"></i>Appending Datasets</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#merging-datasets"><i class="fa fa-check"></i>Merging Datasets</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#merge-options"><i class="fa fa-check"></i>Merge Options</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#many-to-many-merges"><i class="fa fa-check"></i>Many-to-many merges</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#creating-summarized-data-sets"><i class="fa fa-check"></i>Creating summarized data sets</a><ul>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#collapse"><i class="fa fa-check"></i>Collapse</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#exercise-2-5"><i class="fa fa-check"></i>Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#exercise-solutions-7"><i class="fa fa-check"></i>Exercise Solutions</a><ul>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#ex-0-prototype-7"><i class="fa fa-check"></i>Ex 0: prototype</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#ex-1-prototype-7"><i class="fa fa-check"></i>Ex 1: prototype</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#ex-2-prototype-5"><i class="fa fa-check"></i>Ex 2: prototype</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#wrap-up-8"><i class="fa fa-check"></i>Wrap-up</a><ul>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#feedback-8"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#resources-10"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html"><i class="fa fa-check"></i>Stata Modeling &amp; Graphing</a><ul>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#setup-8"><i class="fa fa-check"></i>Setup</a><ul>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#software-materials-2"><i class="fa fa-check"></i>Software &amp; Materials</a></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#organization-2"><i class="fa fa-check"></i>Organization</a></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#goals-7"><i class="fa fa-check"></i>Goals</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#fitting-models"><i class="fa fa-check"></i>Fitting models</a><ul>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#todays-dataset"><i class="fa fa-check"></i>Todays Dataset</a></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#opening-files-1"><i class="fa fa-check"></i>Opening Files</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#simple-regression"><i class="fa fa-check"></i>Simple regression</a><ul>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#steps-for-running-regression"><i class="fa fa-check"></i>Steps for running regression</a></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#preliminaries"><i class="fa fa-check"></i>Preliminaries</a></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#sat-scores-education-expenditures"><i class="fa fa-check"></i>SAT scores &amp; Education Expenditures</a></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#ols-assumptions"><i class="fa fa-check"></i>OLS assumptions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#multiple-regression"><i class="fa fa-check"></i>Multiple Regression</a><ul>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#preliminaries-1"><i class="fa fa-check"></i>Preliminaries</a></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#exercise-0-7"><i class="fa fa-check"></i>Exercise 0</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#interactions"><i class="fa fa-check"></i>Interactions</a><ul>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#categorical-predictors"><i class="fa fa-check"></i>Categorical Predictors</a></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#exercise-1-8"><i class="fa fa-check"></i>Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#exporting-saving-results"><i class="fa fa-check"></i>Exporting &amp; saving results</a><ul>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#regression-tables"><i class="fa fa-check"></i>Regression tables</a></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#saving-replaying"><i class="fa fa-check"></i>Saving &amp; replaying</a></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#exporting-to-excel"><i class="fa fa-check"></i>Exporting to Excel</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#graphing-in-stata"><i class="fa fa-check"></i>Graphing in Stata</a><ul>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#graphing-strategies"><i class="fa fa-check"></i>Graphing Strategies</a></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#terrible-graph"><i class="fa fa-check"></i>Terrible Graph</a></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#much-better-graph"><i class="fa fa-check"></i>Much Better Graph</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#univariate-graphics"><i class="fa fa-check"></i>Univariate Graphics</a><ul>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#our-first-dataset"><i class="fa fa-check"></i>Our First Dataset</a></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#single-continuous-variables"><i class="fa fa-check"></i>Single Continuous Variables</a></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#single-categorical-variables"><i class="fa fa-check"></i>Single Categorical Variables</a></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#exercise-2-6"><i class="fa fa-check"></i>Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#bivariate-graphics"><i class="fa fa-check"></i>Bivariate Graphics</a><ul>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#next-dataset"><i class="fa fa-check"></i>Next Dataset:</a></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#the-twoway-family"><i class="fa fa-check"></i>The Twoway Family</a></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#overlaying-twoway-graphs"><i class="fa fa-check"></i>Overlaying Twoway Graphs</a></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#exercise-3-5"><i class="fa fa-check"></i>Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#twoway-line-graphs"><i class="fa fa-check"></i>Twoway Line Graphs</a></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#exporting-graphs"><i class="fa fa-check"></i>Exporting Graphs</a></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#exercise-solutions-8"><i class="fa fa-check"></i>Exercise Solutions</a><ul>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#ex-0-prototype-8"><i class="fa fa-check"></i>Ex 0: prototype</a></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#ex-1-prototype-8"><i class="fa fa-check"></i>Ex 1: prototype</a></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#ex-2-prototype-6"><i class="fa fa-check"></i>Ex 2: prototype</a></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#ex-3-prototype-5"><i class="fa fa-check"></i>Ex 3: prototype</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#wrap-up-9"><i class="fa fa-check"></i>Wrap-up</a><ul>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#feedback-9"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="StataModGraph.html"><a href="StataModGraph.html#resources-11"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science Workshops</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-regression-models" class="section level1">
<h1>R Regression Models</h1>
<p><strong>Topics</strong></p>
<ul>
<li>Formula interface for model specification</li>
<li>Function methods for extracting quantities of interest from models</li>
<li>Contrasts to test specific hypotheses</li>
<li>Model comparisons</li>
<li>Predicted marginal effects</li>
</ul>
<div id="setup-1" class="section level2">
<h2>Setup</h2>
<div id="class-structure-1" class="section level3">
<h3>Class Structure</h3>
<ul>
<li>Informal  Ask questions at any time. Really!</li>
<li>Collaboration is encouraged - please spend a minute introducing yourself to your neighbors!</li>
</ul>
</div>
<div id="prerequisites-1" class="section level3">
<h3>Prerequisites</h3>
<p>This is an intermediate R course:</p>
<ul>
<li>Assumes working knowledge of R</li>
<li>Relatively fast-paced</li>
<li>This is not a statistics course! We will teach you <em>how</em> to fit models in R, but we assume you know the theory behind the models.</li>
</ul>
</div>
<div id="goals-1" class="section level3">
<h3>Goals</h3>
<p>We will learn about the R modeling ecosystem by fitting a variety of statistical models to different datasets. In particular, our goals are to learn about:</p>
<ol style="list-style-type: decimal">
<li>Modeling workflow</li>
<li>Visualizing and summarizing data before modeling</li>
<li>Modeling continuous outcomes</li>
<li>Modeling binary outcomes</li>
<li>Modeling clustered data</li>
</ol>
<p>We will not spend much time <em>interpreting</em> the models we fit, since this is not a statistics workshop. But, we will walk you through how model results are organized and orientate you to where you can find typical quantities of interest.</p>
</div>
<div id="launch-an-r-session" class="section level3">
<h3>Launch an R session</h3>
<p>Start RStudio and create a new project:</p>
<ul>
<li>On Windows click the start button and search for RStudio. On Mac RStudio will be in your applications folder.</li>
<li>In Rstudio go to <code>File -&gt; New Project</code>.</li>
<li>Choose <code>Existing Directory</code> and browse to the workshop materials directory on your desktop.</li>
<li>Choose <code>File -&gt; Open File</code> and select the file with the word BLANK in the name.</li>
</ul>
</div>
<div id="packages" class="section level3">
<h3>Packages</h3>
<p>You should have already installed the <code>tidyverse</code> and <code>rmarkdown</code> packages onto your computer before the workshop  see <a href="./Rinstall.html">R Installation</a>. Now lets load these packages into the search path of our R session.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(rmarkdown)</code></pre></div>
<p>Finally, lets install some packages that will help with modeling:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages(&quot;lme4&quot;)</span>
<span class="kw">library</span>(lme4)  <span class="co"># for mixed models</span>

<span class="co"># install.packages(&quot;emmeans&quot;)</span>
<span class="kw">library</span>(emmeans)  <span class="co"># for marginal effects</span>

<span class="co"># install.packages(&quot;effects&quot;)</span>
<span class="kw">library</span>(effects)  <span class="co"># for predicted marginal means</span></code></pre></div>
</div>
</div>
<div id="modeling-workflow" class="section level2">
<h2>Modeling workflow</h2>
<p>Before we delve into the details of how to fit models in R, its worth taking a step back and thinking more broadly about the components of the modeling process. These can roughly be divided into 3 stages:</p>
<ol style="list-style-type: decimal">
<li>Pre-estimation</li>
<li>Estimation</li>
<li>Post-estimaton</li>
</ol>
<p>At each stage, the goal is to complete a different task (e.g., to clean data, fit a model, test a hypothesis), but the process is sequential  we move through the stages in order (though often many times in one project!)</p>
<div class="figure">
<img src="R/Rmodels/images/R_model_pipeline.png" />

</div>
<p>Throughout this workshop we will go through these stages several times as we fit different types of model.</p>
</div>
<div id="r-modeling-ecosystem" class="section level2">
<h2>R modeling ecosystem</h2>
<p>There are literally hundreds of R packages that provide model fitting functionality. Were going to focus on just two during this workshop  <code>stats</code>, from Base R, and <code>lme4</code>. Its a good idea to look at <a href="https://cran.r-project.org/web/views/">CRAN Task Views</a> when trying to find a modeling package for your needs, as they provide an extensive curated list. But, heres a more digestable table showing some of the most popular packages for particular types of model.</p>
<table>
<thead>
<tr class="header">
<th align="left">Models</th>
<th align="left">Packages</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Generalized linear</td>
<td align="left"><code>stats</code>, <code>biglm</code>, <code>MASS</code>, <code>robustbase</code></td>
</tr>
<tr class="even">
<td align="left">Mixed effects</td>
<td align="left"><code>lme4</code>, <code>nlme</code>, <code>glmmTMB</code>, <code>MASS</code></td>
</tr>
<tr class="odd">
<td align="left">Econometric</td>
<td align="left"><code>pglm</code>, <code>VGAM</code>, <code>pscl</code>, <code>survival</code></td>
</tr>
<tr class="even">
<td align="left">Bayesian</td>
<td align="left"><code>brms</code>, <code>blme</code>, <code>MCMCglmm</code>, <code>rstan</code></td>
</tr>
<tr class="odd">
<td align="left">Machine learning</td>
<td align="left"><code>mlr</code>, <code>caret</code>, <code>h2o</code>, <code>tensorflow</code></td>
</tr>
</tbody>
</table>
</div>
<div id="before-fitting-a-model" class="section level2">
<h2>Before fitting a model</h2>
<div class="alert alert-info">
<p><strong>GOAL: To learn about the data by creating summaries and visualizations.</strong></p>
</div>
<p>One important part of the pre-estimation stage of model fitting, is gaining an understanding of the data we wish to model by creating plots and summaries. Lets do this now.</p>
<div id="load-the-data" class="section level3">
<h3>Load the data</h3>
<p>List the data files were going to work with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">list.files</span>(<span class="st">&quot;dataSets&quot;</span>)</code></pre></div>
<p>Were going to use the <code>states</code> data first, which originally appeared in <em>Statistics with Stata</em> by Lawrence C. Hamilton.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># read the states data</span>
  states_data &lt;-<span class="st"> </span><span class="kw">read_rds</span>(<span class="st">&quot;dataSets/states.rds&quot;</span>)

  <span class="co"># look at the last few rows</span>
  <span class="kw">tail</span>(states_data)</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Variable</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">csat</td>
<td align="left">Mean composite SAT score</td>
</tr>
<tr class="even">
<td align="left">expense</td>
<td align="left">Per pupil expenditures</td>
</tr>
<tr class="odd">
<td align="left">percent</td>
<td align="left">% HS graduates taking SAT</td>
</tr>
<tr class="even">
<td align="left">income</td>
<td align="left">Median household income, $1,000</td>
</tr>
<tr class="odd">
<td align="left">region</td>
<td align="left">Geographic region: West, N. East, South, Midwest</td>
</tr>
<tr class="even">
<td align="left">house</td>
<td align="left">House 91 environ. voting, %</td>
</tr>
<tr class="odd">
<td align="left">senate</td>
<td align="left">Senate 91 environ. voting, %</td>
</tr>
<tr class="even">
<td align="left">energy</td>
<td align="left">Per capita energy consumed, Btu</td>
</tr>
<tr class="odd">
<td align="left">metro</td>
<td align="left">Metropolitan area population, %</td>
</tr>
<tr class="even">
<td align="left">waste</td>
<td align="left">Per capita solid waste, tons</td>
</tr>
</tbody>
</table>
</div>
<div id="examine-the-data" class="section level3">
<h3>Examine the data</h3>
<p>Start by examining the data to check for problems.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># summary of expense and csat columns, all rows</span>
  sts_ex_sat &lt;-<span class="st"> </span>
<span class="st">      </span>states_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">      </span><span class="kw">select</span>(expense, csat)
  
  <span class="kw">summary</span>(sts_ex_sat)

  <span class="co"># correlation between expense and csat</span>
  <span class="kw">cor</span>(sts_ex_sat, <span class="dt">use =</span> <span class="st">&quot;pairwise&quot;</span>) </code></pre></div>
</div>
<div id="plot-the-data" class="section level3">
<h3>Plot the data</h3>
<p>Plot the data to look for multivariate outliers, non-linear relationships etc.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># scatter plot of expense vs csat</span>
  <span class="kw">plot</span>(sts_ex_sat)</code></pre></div>
<div class="figure">
<img src="R/Rmodels/images/statesCorr1.png" />

</div>
<p>Obviously, in a real project, you would want to spend more time investigating the data, but well now move on to modeling.</p>
</div>
</div>
<div id="models-with-continuous-outcomes" class="section level2">
<h2>Models with continuous outcomes</h2>
<div class="alert alert-info">
<p><strong>GOAL: To learn about the R modeling ecosystem by fitting ordinary least squares (OLS) models.</strong> In particular:</p>
<ol style="list-style-type: decimal">
<li>Formula representation of a model specification</li>
<li>Model classes</li>
<li>Function methods</li>
<li>Model comparison</li>
</ol>
</div>
<p>Once the data have been inspected and cleaned, we can start estimating models. The simplest models (but those with the most assumptions) are those for continuous and unbounded outcomes. Typically, for these outcomes, wed use a model estimated using Ordinary Least Lquares (OLS), which in R can be fit with the <code>lm()</code> (linear model) function.</p>
<p>To fit a model in R, we first have to convert our theoretical model into a <code>formula</code>  a symbolic representation of the model in R syntax:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># formula for model specification</span>
outcome <span class="op">~</span><span class="st"> </span>pred1 <span class="op">+</span><span class="st"> </span>pred2 <span class="op">+</span><span class="st"> </span>pred3

<span class="co"># </span><span class="al">NOTE</span><span class="co"> the ~ is a tilde</span></code></pre></div>
<p>For example, the following model predicts SAT scores based on per-pupil expenditures:</p>
<div class="alert alert-secondary">
<p><span class="math display">\[
csat_i = \beta_01 + \beta_1expense_i + \epsilon_i
\]</span></p>
</div>
<p>We can use <code>lm()</code> to fit this model:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Fit our regression model</span>
  sat_mod &lt;-<span class="st"> </span><span class="kw">lm</span>(csat <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>expense, <span class="co"># regression formula</span>
                <span class="dt">data =</span> states_data) <span class="co"># data </span>
                
  <span class="co"># Summarize and print the results</span>
  <span class="kw">summary</span>(sat_mod) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">coef</span>() <span class="co"># show regression coefficients table</span></code></pre></div>
<div id="why-is-the-association-between-expense-sat-scores-negative" class="section level3">
<h3>Why is the association between expense &amp; SAT scores <em>negative</em>?</h3>
<p>Many people find it surprising that the per-capita expenditure on students is negatively related to SAT scores. The beauty of multiple regression is that we can try to pull these apart. What would the association between expense and SAT scores be if there were no difference among the states in the percentage of students taking the SAT?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">lm</span>(csat <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>expense <span class="op">+</span><span class="st"> </span>percent, <span class="dt">data =</span> states_data) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summary</span>() </code></pre></div>
</div>
<div id="the-lm-class-methods" class="section level3">
<h3>The <code>lm</code> class &amp; methods</h3>
<p>Okay, we fitted our model. Now what? Typically, the main goal in the <strong>post-estimation stage</strong> of analysis is to extract <strong>quantities of interest</strong> from our fitted model. These quantities could be things like:</p>
<ol style="list-style-type: decimal">
<li>Testing whether one group is different on average from another group</li>
<li>Generating average response values from the model for interesting combinations of predictor values</li>
<li>Calculating interval estimates for particular coefficients</li>
</ol>
<p>But before we can do any of that, we need to know more about <strong>what a fitted model actually is,</strong> <strong>what information it contains, and how we can extract from it information that we want to report</strong>.</p>
<p>Lets start by examining the model object:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">class</span>(sat_mod)
  <span class="kw">str</span>(sat_mod)
  <span class="kw">names</span>(sat_mod)
  <span class="kw">methods</span>(<span class="dt">class =</span> <span class="kw">class</span>(sat_mod))</code></pre></div>
<p>We can use <code>function methods</code> to get more information about the fit:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">summary</span>(sat_mod)
  <span class="kw">summary</span>(sat_mod) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">coef</span>()
  <span class="kw">methods</span>(<span class="st">&quot;summary&quot;</span>)
  <span class="kw">confint</span>(sat_mod)</code></pre></div>
<p>How does R know which method to call for a given object? R uses <code>generic functions</code>, which provide access to <code>methods</code>. Method dispatch takes place based on the <code>class</code> of the first argument to the generic function. For example, for the generic function <code>summary()</code> and an object of class <code>lm</code>, the method dispatched will be <code>summary.lm()</code>. Function methods always take the form <code>generic.method()</code>:</p>
<div class="figure">
<img src="R/Rmodels/images/methods.png" />

</div>
<p>Its always worth examining what function methods are available for the class of model youre fitting. Heres a summary table of some of the most often used methods. These are post-estimation tools you will want in your toolbox:</p>
<table>
<colgroup>
<col width="17%" />
<col width="18%" />
<col width="63%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Function</th>
<th align="left">Package</th>
<th align="left">Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>summary()</code></td>
<td align="left"><code>stats</code> base R</td>
<td align="left">standard errors, test statistics, p-values, GOF stats</td>
</tr>
<tr class="even">
<td align="left"><code>confint()</code></td>
<td align="left"><code>stats</code> base R</td>
<td align="left">confidence intervals</td>
</tr>
<tr class="odd">
<td align="left"><code>anova()</code></td>
<td align="left"><code>stats</code> base R</td>
<td align="left">anova table (one model), model comparison (&gt; one model)</td>
</tr>
<tr class="even">
<td align="left"><code>coef()</code></td>
<td align="left"><code>stats</code> base R</td>
<td align="left">point estimates</td>
</tr>
<tr class="odd">
<td align="left"><code>drop1()</code></td>
<td align="left"><code>stats</code> base R</td>
<td align="left">model comparison</td>
</tr>
<tr class="even">
<td align="left"><code>predict()</code></td>
<td align="left"><code>stats</code> base R</td>
<td align="left">predicted response values</td>
</tr>
<tr class="odd">
<td align="left"><code>fitted()</code></td>
<td align="left"><code>stats</code> base R</td>
<td align="left">predicted response values (for observed data)</td>
</tr>
<tr class="even">
<td align="left"><code>residuals()</code></td>
<td align="left"><code>stats</code> base R</td>
<td align="left">residuals</td>
</tr>
<tr class="odd">
<td align="left"><code>fixef()</code></td>
<td align="left"><code>lme4</code></td>
<td align="left">fixed effect point estimates (mixed models only)</td>
</tr>
<tr class="even">
<td align="left"><code>ranef()</code></td>
<td align="left"><code>lme4</code></td>
<td align="left">random effect point estimates (mixed models only)</td>
</tr>
<tr class="odd">
<td align="left"><code>coef()</code></td>
<td align="left"><code>lme4</code></td>
<td align="left">empirical Bayes estimates (mixed models only)</td>
</tr>
<tr class="even">
<td align="left"><code>allEffects()</code></td>
<td align="left"><code>effects</code></td>
<td align="left">predicted marginal means</td>
</tr>
<tr class="odd">
<td align="left"><code>emmeans()</code></td>
<td align="left"><code>emmeans</code></td>
<td align="left">predicted marginal means &amp; marginal effects</td>
</tr>
<tr class="even">
<td align="left"><code>margins()</code></td>
<td align="left"><code>margins</code></td>
<td align="left">predicted marginal means &amp; marginal effects</td>
</tr>
</tbody>
</table>
</div>
<div id="ols-regression-assumptions" class="section level3">
<h3>OLS regression assumptions</h3>
<p>OLS regression relies on several assumptions, including:</p>
<ol style="list-style-type: decimal">
<li>The model includes all relevant variables (i.e., no omitted variable bias).</li>
<li>The model is linear in the parameters (i.e., the coefficients and error term).</li>
<li>The error term has an expected value of zero.</li>
<li>All right-hand-side variables are uncorrelated with the error term.</li>
<li>No right-hand-side variables are a perfect linear function of other RHS variables.</li>
<li>Observations of the error term are uncorrelated with each other.</li>
<li>The error term has constant variance (i.e., homoscedasticity).</li>
<li>(Optional - only needed for inference). The error term is normally distributed.</li>
</ol>
<p>Investigate assumptions #7 and #8 visually by plotting your model:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>)) <span class="co"># splits the plotting window into 4 panels</span>
  <span class="kw">plot</span>(sat_mod)</code></pre></div>
</div>
<div id="comparing-models" class="section level3">
<h3>Comparing models</h3>
<p>Do congressional voting patterns predict SAT scores over and above expense? Fit two models and compare them:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># fit another model, adding house and senate as predictors</span>
  sat_voting_mod &lt;-<span class="st"> </span><span class="kw">lm</span>(csat <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>expense <span class="op">+</span><span class="st"> </span>house <span class="op">+</span><span class="st"> </span>senate,
                        <span class="dt">data =</span> <span class="kw">na.omit</span>(states_data))

  <span class="kw">summary</span>(sat_voting_mod) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">coef</span>()</code></pre></div>
<p>Why are we using <code>na.omit()</code>? Lets see what <code>na.omit()</code> does.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># fake data</span>
dat &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
  <span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>,
  <span class="dt">y =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="ot">NA</span>, <span class="dv">5</span>),
  <span class="dt">z =</span> <span class="kw">c</span>(<span class="dv">6</span>, <span class="ot">NA</span>, <span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">3</span>))
dat

<span class="kw">na.omit</span>(dat) <span class="co"># listwise deletion of observations</span>

<span class="co"># also see</span>
<span class="co"># ?complete.cases</span>
dat[<span class="kw">with</span>(dat, <span class="kw">complete.cases</span>(x, y, z)), ]</code></pre></div>
<p>To compare models, we must fit them to the same data. This is why we need <code>na.omit()</code>. Now lets update our first model using <code>na.omit()</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  sat_mod &lt;-<span class="st"> </span><span class="kw">update</span>(sat_mod, <span class="dt">data =</span> <span class="kw">na.omit</span>(states_data))

  <span class="co"># compare using an F-test with the anova() function</span>
  <span class="kw">anova</span>(sat_mod, sat_voting_mod)</code></pre></div>
</div>
<div id="exercise-0-1" class="section level3">
<h3>Exercise 0</h3>
<p><strong>Ordinary least squares regression</strong></p>
<p>Use the <em>states.rds</em> data set. Fit a model predicting energy consumed per capita (energy) from the percentage of residents living in metropolitan areas (<code>metro</code>). Be sure to</p>
<ol style="list-style-type: decimal">
<li>Examine/plot the data before fitting the model</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## </code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Print and interpret the model <code>summary()</code></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## </code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li><code>plot()</code> the model to look for deviations from modeling assumptions</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## </code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Select one or more additional predictors to add to your model and repeat steps 1-3. Is this model significantly better than the model with <code>metro</code> as the only predictor?</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## </code></pre></div>
</div>
</div>
<div id="interactions-factors" class="section level2">
<h2>Interactions &amp; factors</h2>
<div class="alert alert-info">
<p><strong>GOAL: To learn how to specify interaction effects and fit models with categorical predictors.</strong> In particular:</p>
<ol style="list-style-type: decimal">
<li>Formula syntax for interaction effects</li>
<li>Factor levels and labels</li>
<li>Contrasts and pairwise comparisons</li>
</ol>
</div>
<div id="modeling-interactions" class="section level3">
<h3>Modeling interactions</h3>
<p>Interactions allow us assess the extent to which the association between one predictor and the outcome depends on a second predictor. For example: Does the association between expense and SAT scores depend on the median income in the state?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Add the interaction to the model</span>
  sat_expense_by_percent &lt;-<span class="st"> </span><span class="kw">lm</span>(csat <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>expense <span class="op">+</span><span class="st"> </span>income <span class="op">+</span><span class="st"> </span>expense <span class="op">:</span><span class="st"> </span>income, <span class="dt">data =</span> states_data)

  <span class="co"># same as above, but shorter syntax</span>
  sat_expense_by_percent &lt;-<span class="st"> </span><span class="kw">lm</span>(csat <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>expense <span class="op">*</span><span class="st"> </span>income, <span class="dt">data =</span> states_data) 

  <span class="co"># Show the regression coefficients table</span>
  <span class="kw">summary</span>(sat_expense_by_percent) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">coef</span>() </code></pre></div>
</div>
<div id="regression-with-categorical-predictors" class="section level3">
<h3>Regression with categorical predictors</h3>
<p>Lets try to predict SAT scores from region, a categorical variable. Note that you must make sure R does not think your categorical variable is numeric.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># make sure R knows region is categorical</span>
  <span class="kw">str</span>(states_data<span class="op">$</span>region)
  states_data<span class="op">$</span>region &lt;-<span class="st"> </span><span class="kw">factor</span>(states_data<span class="op">$</span>region)

  <span class="co"># arguments to the factor() function</span>
  <span class="co"># factor(x, levels, labels)</span>

  <span class="kw">levels</span>(states_data<span class="op">$</span>region)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Add region to the model</span>
  sat_region &lt;-<span class="st"> </span><span class="kw">lm</span>(csat <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>region, <span class="dt">data =</span> states_data) 

  <span class="co"># Show the results</span>
  <span class="kw">summary</span>(sat_region) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">coef</span>() <span class="co"># show the regression coefficients table</span>
  <span class="kw">anova</span>(sat_region) <span class="co"># show ANOVA table</span></code></pre></div>
<p>So, make sure to tell R which variables are categorical by converting them to factors!</p>
</div>
<div id="setting-factor-reference-groups-contrasts" class="section level3">
<h3>Setting factor reference groups &amp; contrasts</h3>
<p><strong>Contrasts</strong> is the umbrella term used to describe the process of testing linear combinations of parameters from regression models. All statistical sofware use contrasts, but each sofware has different defaults and their own way of overriding these.</p>
<p>The default contrasts in R are treatment contrasts (aka dummy coding), where each level within a factor is identified within a matrix of binary <code>0</code> / <code>1</code> variables, with the first level chosen as the reference category. Theyre called treatment contrasts, because of the typical use case where there is one control group (the reference group) and one or more treatment groups that are to be compared to the controls. It is easy to change the default contrasts to something other than treatment contrasts, though this is rarely needed. More often, we may want to change the reference group in treatment contrasts or get all sets of pairwise contrasts between factor levels.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># change the reference group</span>
  states_data<span class="op">$</span>region &lt;-<span class="st"> </span><span class="kw">relevel</span>(states_data<span class="op">$</span>region, <span class="dt">ref =</span> <span class="st">&quot;Midwest&quot;</span>)
  m1 &lt;-<span class="st"> </span><span class="kw">lm</span>(csat <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>region, <span class="dt">data =</span> states_data)
  <span class="kw">summary</span>(m1) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">coef</span>()

  <span class="co"># get all pairwise contrasts between means</span>
  means &lt;-<span class="st"> </span><span class="kw">emmeans</span>(m1, <span class="dt">specs =</span> <span class="op">~</span><span class="st"> </span>region)
  means
  <span class="kw">contrast</span>(means, <span class="dt">method =</span> <span class="st">&quot;pairwise&quot;</span>)</code></pre></div>
</div>
<div id="exercise-1-1" class="section level3">
<h3>Exercise 1</h3>
<p><strong>Interactions &amp; factors</strong></p>
<p>Use the <code>states</code> data set.</p>
<ol style="list-style-type: decimal">
<li>Add on to the regression equation that you created in Exercise 1 by generating an interaction term and testing the interaction.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## </code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Try adding region to the model. Are there significant differences across the four regions?</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## </code></pre></div>
</div>
</div>
<div id="models-with-binary-outcomes" class="section level2">
<h2>Models with binary outcomes</h2>
<div class="alert alert-info">
<p><strong>GOAL: To learn how to use the <code>glm()</code> function to model binary outcomes.</strong> In particular:</p>
<ol style="list-style-type: decimal">
<li>The <code>family</code> and <code>link</code> components of the <code>glm()</code> function call</li>
<li>Transforming model coefficients into odds ratios</li>
<li>Transforming model coefficients into predicted marginal means</li>
</ol>
</div>
<div id="logistic-regression" class="section level3">
<h3>Logistic regression</h3>
<p>This far we have used the <code>lm()</code> function to fit our regression models. <code>lm()</code> is great, but limited  in particular it only fits models for continuous dependent variables. For categorical dependent variables we can use the <code>glm()</code> function.</p>
<p>For these models we will use a different dataset, drawn from the National Health Interview Survey. From the <a href="http://www.cdc.gov/nchs/nhis.htm">CDC website</a>:</p>
<blockquote>
<p>The National Health Interview Survey (NHIS) has monitored the health of the nation since 1957. NHIS data on a broad range of health topics are collected through personal household interviews. For over 50 years, the U.S. Census Bureau has been the data collection agent for the National Health Interview Survey. Survey results have been instrumental in providing data to track health status, health care access, and progress toward achieving national health objectives.</p>
</blockquote>
<p>Load the National Health Interview Survey data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  NH11 &lt;-<span class="st"> </span><span class="kw">read_rds</span>(<span class="st">&quot;dataSets/NatHealth2011.rds&quot;</span>)</code></pre></div>
</div>
<div id="logistic-regression-example" class="section level3">
<h3>Logistic regression example</h3>
<p>Motivation for a logistic regression model  with a binary response:</p>
<ol style="list-style-type: decimal">
<li>Errors will not be normally distributed</li>
<li>Variance will not be homoskedastic</li>
<li>Predictions should be constrained to be on the interval [0, 1]</li>
</ol>
<div class="figure">
<img src="R/Rmodels/images/logistic.png" />

</div>
<p>Anatomy of a generalized linear model:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># OLS model using lm()</span>
  <span class="kw">lm</span>(outcome <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>pred1 <span class="op">+</span><span class="st"> </span>pred2, 
     <span class="dt">data =</span> mydata)

  <span class="co"># OLS model using glm()</span>
  <span class="kw">glm</span>(outcome <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>pred1 <span class="op">+</span><span class="st"> </span>pred2, 
      <span class="dt">data =</span> mydata, 
      <span class="dt">family =</span> <span class="kw">gaussian</span>(<span class="dt">link =</span> <span class="st">&quot;identity&quot;</span>))
 
  <span class="co"># logistic model using glm()</span>
  <span class="kw">glm</span>(outcome <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>pred1 <span class="op">+</span><span class="st"> </span>pred2, 
      <span class="dt">data =</span> mydata, 
      <span class="dt">family =</span> <span class="kw">binomial</span>(<span class="dt">link =</span> <span class="st">&quot;logit&quot;</span>))</code></pre></div>
<p>The <code>family</code> argument sets the error distribution for the model, while the <code>link</code> function argument relates the predictors to the expected value of the outcome.</p>
<p>Lets predict the probability of being diagnosed with hypertension based on <code>age</code>, <code>sex</code>, <code>sleep</code>, and <code>bmi</code>. Heres the model:</p>
<div class="alert alert-secondary">
<p><span class="math display">\[
logit(hypev_i) = \beta_01 + \beta_1agep_i + \beta_2sex_i + \beta_3sleep_i + \beta_4bmi_i + \epsilon_i 
\]</span></p>
</div>
<p>where <span class="math inline">\(logit(\cdot)\)</span> is the link function, which is equivalent to the log odds of <code>hypev</code>:</p>
<div class="alert alert-secondary">
<p><span class="math display">\[
logit(hypev_i) = ln \frac{p(hypev_i = 1)}{p(hypev_i = 0)}
\]</span></p>
</div>
<p>And heres how we fit this in R. First, lets clean up the hypertension outcome by making it binary:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">str</span>(NH11<span class="op">$</span>hypev) <span class="co"># check stucture of hypev</span>
  <span class="kw">levels</span>(NH11<span class="op">$</span>hypev) <span class="co"># check levels of hypev</span>

  <span class="co"># collapse all missing values to NA</span>
  NH11<span class="op">$</span>hypev &lt;-<span class="st"> </span><span class="kw">factor</span>(NH11<span class="op">$</span>hypev, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;2 No&quot;</span>, <span class="st">&quot;1 Yes&quot;</span>))</code></pre></div>
<p>Now lets use <code>glm()</code> to estimate the model:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># run our regression model</span>
  hyp_out &lt;-<span class="st"> </span><span class="kw">glm</span>(hypev <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>age_p <span class="op">+</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>sleep <span class="op">+</span><span class="st"> </span>bmi,
                 <span class="dt">data =</span> NH11, 
                 <span class="dt">family =</span> <span class="kw">binomial</span>(<span class="dt">link =</span> <span class="st">&quot;logit&quot;</span>))

  <span class="kw">summary</span>(hyp_out) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">coef</span>()</code></pre></div>
</div>
<div id="odds-ratios" class="section level3">
<h3>Odds ratios</h3>
<p>Generalized linear models use link functions to relate the average value of the response to the predictors, so raw coefficients are difficult to interpret. For example, the <code>age</code> coefficient of .06 in the previous model tells us that for every one unit increase in <code>age</code>, the log odds of hypertension diagnosis increases by 0.06. Since most of us are not used to thinking in log odds this is not too helpful!</p>
<p>One solution is to transform the coefficients to make them easier to interpret. Here we transform them into odds ratios by exponentiating:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># point estimates</span>
  <span class="kw">coef</span>(hyp_out) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">exp</span>()
  
  <span class="co"># confidence intervals</span>
  <span class="kw">confint</span>(hyp_out) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">exp</span>()</code></pre></div>
</div>
<div id="predicted-marginal-means" class="section level3">
<h3>Predicted marginal means</h3>
<p>Instead of reporting odds ratios, we may want to calculate predicted marginal means (sometimes called least squares means). These are average values of the outcome at particular levels of the predictors. For ease of interpretation, we want these marginal means to be on the response scale (i.e., the probability scale). We can use the <code>effects</code> package to compute these quantities of interest for us (by default, the numerical output will be on the response scale).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  eff &lt;-<span class="st"> </span><span class="kw">allEffects</span>(hyp_out)
  <span class="kw">plot</span>(eff, <span class="dt">type =</span> <span class="st">&quot;response&quot;</span>) <span class="co"># &quot;response&quot; refers to the probability scale</span>

  <span class="co"># generate a sequence at which to get predictions of the outcome</span>
  <span class="kw">seq</span>(<span class="dv">20</span>, <span class="dv">80</span>, <span class="dt">by =</span> <span class="dv">5</span>)

  <span class="co"># override defaults</span>
  eff &lt;-<span class="st"> </span><span class="kw">allEffects</span>(hyp_out, <span class="dt">xlevels =</span> <span class="kw">list</span>(<span class="dt">age_p =</span> <span class="kw">seq</span>(<span class="dv">20</span>, <span class="dv">80</span>, <span class="dt">by =</span> <span class="dv">5</span>)))
  eff_df &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(eff) <span class="co"># confidence intervals</span>
  eff_df</code></pre></div>
<div class="figure">
<img src="R/Rmodels/images/effects1.png" />

</div>
</div>
<div id="exercise-2" class="section level3">
<h3>Exercise 2</h3>
<p><strong>Logistic regression</strong></p>
<p>Use the <code>NH11</code> data set that we loaded earlier.</p>
<ol style="list-style-type: decimal">
<li>Use <code>glm()</code> to conduct a logistic regression to predict ever worked (<code>everwrk</code>) using age (<code>age_p</code>) and marital status (<code>r_maritl</code>). Make sure you only keep the following two levels for <code>everwrk</code> (<code>1 Yes</code> and <code>2 No</code>). Hint: use the <code>factor()</code> function. Also, make sure to drop any <code>r_maritl</code> levels that do not contain observations. Hint: see <code>?droplevels</code>.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## </code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Predict the probability of working for each level of marital status. Hint: use <code>allEffects()</code></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## </code></pre></div>
<p>Note that the data are not perfectly clean and ready to be modeled. You will need to clean up at least some of the variables before fitting the model.</p>
</div>
</div>
<div id="multilevel-modeling" class="section level2">
<h2>Multilevel modeling</h2>
<div class="alert alert-info">
<p><strong>GOAL: To learn about how to use the <code>lmer()</code> function to model clustered data.</strong> In particular:</p>
<ol style="list-style-type: decimal">
<li>The formula syntax for incorporating random effects into a model</li>
<li>Calculating the intraclass correlation (ICC)</li>
<li>Model comparison for fixed and random effects</li>
</ol>
</div>
<div id="multilevel-modeling-overview" class="section level3">
<h3>Multilevel modeling overview</h3>
<ul>
<li>Multi-level (AKA hierarchical) models are a type of <strong>mixed-effects</strong> model</li>
<li>They are used to model data that are clustered (i.e., non-independent)</li>
<li>Mixed-effecs models include two types of predictors: <strong>fixed-effects</strong> and <strong>random effects</strong></li>
<li><strong>Fixed-effects</strong>  observed levels are of direct interest (.e.g, sex, political party)</li>
<li><strong>Random-effects</strong>  observed levels not of direct interest: goal is to make inferences to a population represented by observed levels</li>
<li>In R, the <code>lme4</code> package is the most popular for mixed effects models</li>
<li>Use the <code>lmer()</code> function for liner mixed models, <code>glmer()</code> for generalized linear mixed models</li>
</ul>
</div>
<div id="the-exam-data" class="section level3">
<h3>The Exam data</h3>
<p>The Exam data set contans exam scores of 4,059 students from 65 schools in Inner London. The variable names are as follows:</p>
<table>
<thead>
<tr class="header">
<th align="left">Variable</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">school</td>
<td align="left">School ID - a factor.</td>
</tr>
<tr class="even">
<td align="left">normexam</td>
<td align="left">Normalized exam score.</td>
</tr>
<tr class="odd">
<td align="left">standLRT</td>
<td align="left">Standardised LR test score.</td>
</tr>
<tr class="even">
<td align="left">student</td>
<td align="left">Student id (within school) - a factor</td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  Exam &lt;-<span class="st"> </span><span class="kw">read_rds</span>(<span class="st">&quot;dataSets/Exam.rds&quot;</span>)</code></pre></div>
</div>
<div id="the-null-model-icc" class="section level3">
<h3>The null model &amp; ICC</h3>
<p>As a preliminary step it is often useful to partition the variance in the dependent variable into the various levels. This can be accomplished by running a null model (i.e., a model with a random effects grouping structure, but no fixed-effects predictors).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># anatomy of lmer() function</span>
  <span class="kw">lmer</span>(outcome <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>pred1 <span class="op">+</span><span class="st"> </span>pred2 <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">|</span><span class="st"> </span>grouping_variable), 
       <span class="dt">data =</span> mydata, 
       <span class="dt">REML =</span> <span class="ot">FALSE</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># null model, grouping by school but not fixed effects.</span>
  Norm1 &lt;-<span class="kw">lmer</span>(normexam <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">|</span><span class="st"> </span>school), 
              <span class="dt">data =</span> <span class="kw">na.omit</span>(Exam), <span class="dt">REML =</span> <span class="ot">FALSE</span>)
  <span class="kw">summary</span>(Norm1)</code></pre></div>
<p>The is .161/(.161 + .852) = .159 = 16% of the variance is at the school level.</p>
<p>There is no consensus on how to calculate p-values for MLMs; hence why they are omitted from the <code>lme4</code> output. But, if you really need p-values, the <code>lmerTest</code> package will calculate p-values for you (using the Satterthwaite approximation).</p>
</div>
<div id="adding-fixed-effects-predictors" class="section level3">
<h3>Adding fixed-effects predictors</h3>
<p>Heres a model that predicts exam scores from students standardized tests scores:</p>
<div class="alert alert-secondary">
<p><span class="math display">\[
normexam_{ij} = \mu + \beta_1standLRT_{ij} + U_{0j} + \epsilon_{ij}
\]</span></p>
</div>
<p>where <span class="math inline">\(U_{0j}\)</span> is the random intercept for <code>school</code>. Lets implement this in R using <code>lmer()</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  Norm2 &lt;-<span class="kw">lmer</span>(normexam <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>standLRT <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">|</span><span class="st"> </span>school),
               <span class="dt">data =</span> <span class="kw">na.omit</span>(Exam), <span class="dt">REML =</span> <span class="ot">FALSE</span>) 
  <span class="kw">summary</span>(Norm2) </code></pre></div>
</div>
<div id="multiple-degree-of-freedom-comparisons" class="section level3">
<h3>Multiple degree of freedom comparisons</h3>
<p>As with <code>lm()</code> and <code>glm()</code> models, you can compare the two <code>lmer()</code> models using a likelihood ratio test with the <code>anova()</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">anova</span>(Norm1, Norm2)</code></pre></div>
</div>
<div id="random-slopes" class="section level3">
<h3>Random slopes</h3>
<p>Add a random effect of students standardized test scores as well. Now in addition to estimating the distribution of intercepts across schools, we also estimate the distribution of the slope of exam on standardized test.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  Norm3 &lt;-<span class="st"> </span><span class="kw">lmer</span>(normexam <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>standLRT <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>standLRT <span class="op">|</span><span class="st"> </span>school), 
                <span class="dt">data =</span> <span class="kw">na.omit</span>(Exam), <span class="dt">REML =</span> <span class="ot">FALSE</span>) 
  <span class="kw">summary</span>(Norm3) </code></pre></div>
</div>
<div id="test-the-significance-of-the-random-slope" class="section level3">
<h3>Test the significance of the random slope</h3>
<p>To test the significance of a random slope just compare models with and without the random slope term using a likelihood ratio test:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">anova</span>(Norm2, Norm3) </code></pre></div>
</div>
<div id="exercise-3-1" class="section level3">
<h3>Exercise 3</h3>
<p><strong>Multilevel modeling</strong></p>
<p>Use the <code>bh1996</code> dataset:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## install.packages(&quot;multilevel&quot;)
<span class="kw">data</span>(bh1996, <span class="dt">package=</span><span class="st">&quot;multilevel&quot;</span>)</code></pre></div>
<p>From the data documentation:</p>
<blockquote>
<p>Variables are Leadership Climate (<code>LEAD</code>), Well-Being (<code>WBEING</code>), and Work Hours (<code>HRS</code>). The group identifier is named <code>GRP</code>.</p>
</blockquote>
<ol style="list-style-type: decimal">
<li>Create a null model predicting wellbeing (<code>WBEING</code>)</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## </code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Calculate the ICC for your null model</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## </code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Run a second multi-level model that adds two individual-level predictors, average number of hours worked (<code>HRS</code>) and leadership skills (<code>LEAD</code>) to the model and interpret your output.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## </code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Now, add a random effect of average number of hours worked (<code>HRS</code>) to the model and interpret your output. Test the significance of this random term.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## </code></pre></div>
</div>
</div>
<div id="exercise-solutions-1" class="section level2">
<h2>Exercise solutions</h2>
<div id="ex-0-prototype-1" class="section level3">
<h3>Ex 0: prototype</h3>
<p>Use the <em>states.rds</em> data set.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  states &lt;-<span class="st"> </span><span class="kw">read_rds</span>(<span class="st">&quot;dataSets/states.rds&quot;</span>)</code></pre></div>
<p>Fit a model predicting energy consumed per capita (energy) from the percentage of residents living in metropolitan areas (metro). Be sure to:</p>
<ol style="list-style-type: decimal">
<li>Examine/plot the data before fitting the model.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  states_en_met &lt;-<span class="st"> </span><span class="kw">subset</span>(states, <span class="dt">select =</span> <span class="kw">c</span>(<span class="st">&quot;metro&quot;</span>, <span class="st">&quot;energy&quot;</span>))
  <span class="kw">summary</span>(states_en_met)
  <span class="kw">plot</span>(states_en_met)
  <span class="kw">cor</span>(states_en_met, <span class="dt">use =</span> <span class="st">&quot;pairwise&quot;</span>)</code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Print and interpret the model <code>summary()</code>.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  mod_en_met &lt;-<span class="st"> </span><span class="kw">lm</span>(energy <span class="op">~</span><span class="st"> </span>metro, <span class="dt">data =</span> states)
  <span class="kw">summary</span>(mod_en_met)</code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li><code>plot()</code> the model to look for deviations from modeling assumptions.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">plot</span>(mod_en_met)</code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Select one or more additional predictors to add to your model and repeat steps 1-3. Is this model significantly better than the model with <em>metro</em> as the only predictor?</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  states_en_met_pop_wst &lt;-<span class="st"> </span><span class="kw">subset</span>(states, <span class="dt">select =</span> <span class="kw">c</span>(<span class="st">&quot;energy&quot;</span>, <span class="st">&quot;metro&quot;</span>, <span class="st">&quot;pop&quot;</span>, <span class="st">&quot;waste&quot;</span>))
  <span class="kw">summary</span>(states_en_met_pop_wst)
  <span class="kw">plot</span>(states_en_met_pop_wst)
  <span class="kw">cor</span>(states_en_met_pop_wst, <span class="dt">use =</span> <span class="st">&quot;pairwise&quot;</span>)

  mod_en_met_pop_waste &lt;-<span class="st"> </span><span class="kw">lm</span>(energy <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>metro <span class="op">+</span><span class="st"> </span>pop <span class="op">+</span><span class="st"> </span>waste, <span class="dt">data =</span> states)
  <span class="kw">summary</span>(mod_en_met_pop_waste)
  <span class="kw">anova</span>(mod_en_met, mod_en_met_pop_waste)</code></pre></div>
</div>
<div id="ex-1-prototype-1" class="section level3">
<h3>Ex 1: prototype</h3>
<p>Use the states data set.</p>
<ol style="list-style-type: decimal">
<li>Add on to the regression equation that you created in exercise 1 by generating an interaction term and testing the interaction.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  mod_en_metro_by_waste &lt;-<span class="st"> </span><span class="kw">lm</span>(energy <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>metro <span class="op">*</span><span class="st"> </span>waste, <span class="dt">data =</span> states)</code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Try adding a region to the model. Are there significant differences across the four regions?</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  mod_en_region &lt;-<span class="st"> </span><span class="kw">lm</span>(energy <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>metro <span class="op">*</span><span class="st"> </span>waste <span class="op">+</span><span class="st"> </span>region, <span class="dt">data =</span> states)
  <span class="kw">anova</span>(mod_en_region)</code></pre></div>
</div>
<div id="ex-2-prototype" class="section level3">
<h3>Ex 2: prototype</h3>
<p>Use the NH11 data set that we loaded earlier. Note that the data is not perfectly clean and ready to be modeled. You will need to clean up at least some of the variables before fitting the model.</p>
<ol style="list-style-type: decimal">
<li>Use <code>glm()</code> to conduct a logistic regression to predict ever worked (<code>everwrk</code>) using age (<code>age_p</code>) and marital status (<code>r_maritl</code>). Make sure you only keep the following two levels for <code>everwrk</code> (<code>1 Yes</code> and <code>2 No</code>). Hint: use the <code>factor()</code> function. Also, make sure to drop any <code>r_maritl</code> levels that do not contain observations. Hint: see <code>?droplevels</code>.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  NH11 &lt;-<span class="st"> </span><span class="kw">mutate</span>(NH11,
                     <span class="dt">everwrk =</span> <span class="kw">factor</span>(everwrk, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;1 Yes&quot;</span>, <span class="st">&quot;2 No&quot;</span>)),
                     <span class="dt">r_maritl =</span> <span class="kw">droplevels</span>(r_maritl))

  mod_wk_age_mar &lt;-<span class="st"> </span><span class="kw">glm</span>(everwrk <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>age_p <span class="op">+</span><span class="st"> </span>r_maritl, 
                        <span class="dt">data =</span> NH11,
                        <span class="dt">family =</span> <span class="kw">binomial</span>(<span class="dt">link =</span> <span class="st">&quot;logit&quot;</span>))

  <span class="kw">summary</span>(mod_wk_age_mar)</code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Predict the probability of working for each level of marital status. Hint: use <code>allEffects()</code>.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  eff &lt;-<span class="st"> </span><span class="kw">allEffects</span>(mod_wk_age_mar)
  <span class="kw">as.data.frame</span>(eff)</code></pre></div>
</div>
<div id="ex-3-prototype-1" class="section level3">
<h3>Ex 3: prototype</h3>
<p>Use the dataset, bh1996:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">data</span>(bh1996, <span class="dt">package=</span><span class="st">&quot;multilevel&quot;</span>)</code></pre></div>
<p>From the data documentation:</p>
<blockquote>
<p>Variables are Leadership Climate (<code>LEAD</code>), Well-Being (<code>WBEING</code>), and Work Hours (<code>HRS</code>). The group identifier is named <code>GRP</code>.</p>
</blockquote>
<ol style="list-style-type: decimal">
<li>Create a null model predicting wellbeing (<code>WBEING</code>).</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  mod_grp0 &lt;-<span class="st"> </span><span class="kw">lmer</span>(WBEING <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">|</span><span class="st"> </span>GRP), <span class="dt">data =</span> bh1996)
  <span class="kw">summary</span>(mod_grp0)</code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Run a second multi-level model that adds two individual-level predictors, average number of hours worked (<code>HRS</code>) and leadership skills (<code>LEAD</code>) to the model and interpret your output.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  mod_grp1 &lt;-<span class="st"> </span><span class="kw">lmer</span>(WBEING <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>HRS <span class="op">+</span><span class="st"> </span>LEAD <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">|</span><span class="st"> </span>GRP), <span class="dt">data =</span> bh1996)
  <span class="kw">summary</span>(mod_grp1)</code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Now, add a random effect of average number of hours worked (<code>HRS</code>) to the model and interpret your output. Test the significance of this random term.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  mod_grp2 &lt;-<span class="st"> </span><span class="kw">lmer</span>(WBEING <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>HRS <span class="op">+</span><span class="st"> </span>LEAD <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>HRS <span class="op">|</span><span class="st"> </span>GRP), <span class="dt">data =</span> bh1996)
  <span class="kw">anova</span>(mod_grp1, mod_grp2)</code></pre></div>
</div>
</div>
<div id="wrap-up-2" class="section level2">
<h2>Wrap-up</h2>
<div id="feedback-2" class="section level3">
<h3>Feedback</h3>
<p>These workshops are a work in progress, please provide any feedback to: <a href="mailto:help@iq.harvard.edu">help@iq.harvard.edu</a></p>
</div>
<div id="resources-3" class="section level3">
<h3>Resources</h3>
<ul>
<li>IQSS
<ul>
<li>Workshops: <a href="https://dss.iq.harvard.edu/workshop-materials" class="uri">https://dss.iq.harvard.edu/workshop-materials</a></li>
<li>Data Science Services: <a href="https://dss.iq.harvard.edu/" class="uri">https://dss.iq.harvard.edu/</a></li>
<li>Research Computing Environment: <a href="https://iqss.github.io/dss-rce/" class="uri">https://iqss.github.io/dss-rce/</a></li>
</ul></li>
<li>HBS
<ul>
<li>Research Computing Services workshops: <a href="https://training.rcs.hbs.org/workshops" class="uri">https://training.rcs.hbs.org/workshops</a></li>
<li>Other HBS RCS resources: <a href="https://training.rcs.hbs.org/workshop-materials" class="uri">https://training.rcs.hbs.org/workshop-materials</a></li>
<li>RCS consulting email: <a href="mailto:research@hbs.edu">mailto:research@hbs.edu</a></li>
</ul></li>
</ul>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="Rintro.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="Rgraphics.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/IQSS/dss-workshops/edit/master/R/Rmodels/Rmodels.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Data_Science_Workshops.pdf", "Data_Science_Workshops.epub"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
