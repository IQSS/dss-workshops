<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 R Data Wrangling | IQSS Workshops</title>
  <meta name="description" content="IQSS Data Science Workshops" />
  <meta name="generator" content="bookdown 0.13 and GitBook 2.6.7" />

  <meta property="og:title" content="4 R Data Wrangling | IQSS Workshops" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="IQSS Data Science Workshops" />
  <meta name="github-repo" content="IQSS/dss-workshops-redux" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 R Data Wrangling | IQSS Workshops" />
  
  <meta name="twitter:description" content="IQSS Data Science Workshops" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="Rgraphics.html"/>
<link rel="next" href="PythonIntro.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">IQSS Workshop Materials</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#table-of-contents"><i class="fa fa-check"></i>Table of Contents</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#authors-and-sources"><i class="fa fa-check"></i>Authors and Sources</a></li>
</ul></li>
<li class="part"><span><b>I R</b></span></li>
<li class="chapter" data-level="1" data-path="Rintro.html"><a href="Rintro.html"><i class="fa fa-check"></i><b>1</b> R Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="Rintro.html"><a href="Rintro.html#setup"><i class="fa fa-check"></i><b>1.1</b> Setup</a><ul>
<li class="chapter" data-level="1.1.1" data-path="Rintro.html"><a href="Rintro.html#software-materials"><i class="fa fa-check"></i><b>1.1.1</b> Software &amp; materials</a></li>
<li class="chapter" data-level="1.1.2" data-path="Rintro.html"><a href="Rintro.html#goals"><i class="fa fa-check"></i><b>1.1.2</b> Goals</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="Rintro.html"><a href="Rintro.html#r-interfaces"><i class="fa fa-check"></i><b>1.2</b> R Interfaces</a></li>
<li class="chapter" data-level="1.3" data-path="Rintro.html"><a href="Rintro.html#exercise-0"><i class="fa fa-check"></i><b>1.3</b> Exercise 0</a></li>
<li class="chapter" data-level="1.4" data-path="Rintro.html"><a href="Rintro.html#r-basics"><i class="fa fa-check"></i><b>1.4</b> R basics</a><ul>
<li class="chapter" data-level="1.4.1" data-path="Rintro.html"><a href="Rintro.html#function-calls"><i class="fa fa-check"></i><b>1.4.1</b> Function calls</a></li>
<li class="chapter" data-level="1.4.2" data-path="Rintro.html"><a href="Rintro.html#assignment"><i class="fa fa-check"></i><b>1.4.2</b> Assignment</a></li>
<li class="chapter" data-level="1.4.3" data-path="Rintro.html"><a href="Rintro.html#asking-r-for-help"><i class="fa fa-check"></i><b>1.4.3</b> Asking R for help</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="Rintro.html"><a href="Rintro.html#getting-data-into-r"><i class="fa fa-check"></i><b>1.5</b> Getting data into R</a><ul>
<li class="chapter" data-level="1.5.1" data-path="Rintro.html"><a href="Rintro.html#installing-and-using-r-packages"><i class="fa fa-check"></i><b>1.5.1</b> Installing and using R packages</a></li>
<li class="chapter" data-level="1.5.2" data-path="Rintro.html"><a href="Rintro.html#readers-for-common-file-types"><i class="fa fa-check"></i><b>1.5.2</b> Readers for common file types</a></li>
<li class="chapter" data-level="1.5.3" data-path="Rintro.html"><a href="Rintro.html#baby-names-data"><i class="fa fa-check"></i><b>1.5.3</b> Baby names data</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="Rintro.html"><a href="Rintro.html#exercise-1"><i class="fa fa-check"></i><b>1.6</b> Exercise 1</a></li>
<li class="chapter" data-level="1.7" data-path="Rintro.html"><a href="Rintro.html#popularity-of-your-name"><i class="fa fa-check"></i><b>1.7</b> Popularity of your name</a><ul>
<li class="chapter" data-level="1.7.1" data-path="Rintro.html"><a href="Rintro.html#filtering-selecting-and-arranging-data"><i class="fa fa-check"></i><b>1.7.1</b> Filtering, selecting, and arranging data</a></li>
<li class="chapter" data-level="1.7.2" data-path="Rintro.html"><a href="Rintro.html#other-logical-operators"><i class="fa fa-check"></i><b>1.7.2</b> Other logical operators</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="Rintro.html"><a href="Rintro.html#exercise-2.1"><i class="fa fa-check"></i><b>1.8</b> Exercise 2.1</a></li>
<li class="chapter" data-level="1.9" data-path="Rintro.html"><a href="Rintro.html#pipe-operator-in-r"><i class="fa fa-check"></i><b>1.9</b> Pipe operator in R</a></li>
<li class="chapter" data-level="1.10" data-path="Rintro.html"><a href="Rintro.html#exercise-2.2"><i class="fa fa-check"></i><b>1.10</b> Exercise 2.2</a></li>
<li class="chapter" data-level="1.11" data-path="Rintro.html"><a href="Rintro.html#plotting-baby-name-trends-over-time"><i class="fa fa-check"></i><b>1.11</b> Plotting baby name trends over time</a></li>
<li class="chapter" data-level="1.12" data-path="Rintro.html"><a href="Rintro.html#exercise-3"><i class="fa fa-check"></i><b>1.12</b> Exercise 3</a></li>
<li class="chapter" data-level="1.13" data-path="Rintro.html"><a href="Rintro.html#finding-the-most-popular-names"><i class="fa fa-check"></i><b>1.13</b> Finding the most popular names</a><ul>
<li class="chapter" data-level="1.13.1" data-path="Rintro.html"><a href="Rintro.html#computing-better-measures-of-popularity"><i class="fa fa-check"></i><b>1.13.1</b> Computing better measures of popularity</a></li>
<li class="chapter" data-level="1.13.2" data-path="Rintro.html"><a href="Rintro.html#operating-by-group"><i class="fa fa-check"></i><b>1.13.2</b> Operating by group</a></li>
</ul></li>
<li class="chapter" data-level="1.14" data-path="Rintro.html"><a href="Rintro.html#exercise-4"><i class="fa fa-check"></i><b>1.14</b> Exercise 4</a></li>
<li class="chapter" data-level="1.15" data-path="Rintro.html"><a href="Rintro.html#percent-choosing-one-of-the-top-10-names"><i class="fa fa-check"></i><b>1.15</b> Percent choosing one of the top 10 names</a></li>
<li class="chapter" data-level="1.16" data-path="Rintro.html"><a href="Rintro.html#exercise-5"><i class="fa fa-check"></i><b>1.16</b> Exercise 5</a></li>
<li class="chapter" data-level="1.17" data-path="Rintro.html"><a href="Rintro.html#saving-our-work"><i class="fa fa-check"></i><b>1.17</b> Saving our Work</a><ul>
<li class="chapter" data-level="1.17.1" data-path="Rintro.html"><a href="Rintro.html#saving-individual-datasets"><i class="fa fa-check"></i><b>1.17.1</b> Saving individual datasets</a></li>
<li class="chapter" data-level="1.17.2" data-path="Rintro.html"><a href="Rintro.html#saving-multiple-datasets"><i class="fa fa-check"></i><b>1.17.2</b> Saving multiple datasets</a></li>
<li class="chapter" data-level="1.17.3" data-path="Rintro.html"><a href="Rintro.html#saving-and-loading-r-workspaces"><i class="fa fa-check"></i><b>1.17.3</b> Saving and loading R workspaces</a></li>
</ul></li>
<li class="chapter" data-level="1.18" data-path="Rintro.html"><a href="Rintro.html#exercise-solutions"><i class="fa fa-check"></i><b>1.18</b> Exercise solutions</a><ul>
<li class="chapter" data-level="1.18.1" data-path="Rintro.html"><a href="Rintro.html#ex-0-prototype"><i class="fa fa-check"></i><b>1.18.1</b> Ex 0: prototype</a></li>
<li class="chapter" data-level="1.18.2" data-path="Rintro.html"><a href="Rintro.html#ex-1-prototype"><i class="fa fa-check"></i><b>1.18.2</b> Ex 1: prototype</a></li>
<li class="chapter" data-level="1.18.3" data-path="Rintro.html"><a href="Rintro.html#ex-2.1-prototype"><i class="fa fa-check"></i><b>1.18.3</b> Ex 2.1: prototype</a></li>
<li class="chapter" data-level="1.18.4" data-path="Rintro.html"><a href="Rintro.html#ex-2.2-prototype"><i class="fa fa-check"></i><b>1.18.4</b> Ex 2.2: prototype</a></li>
<li class="chapter" data-level="1.18.5" data-path="Rintro.html"><a href="Rintro.html#ex-3-prototype"><i class="fa fa-check"></i><b>1.18.5</b> Ex 3: prototype</a></li>
<li class="chapter" data-level="1.18.6" data-path="Rintro.html"><a href="Rintro.html#ex-4-prototype"><i class="fa fa-check"></i><b>1.18.6</b> Ex 4: prototype</a></li>
<li class="chapter" data-level="1.18.7" data-path="Rintro.html"><a href="Rintro.html#ex-5-prototype"><i class="fa fa-check"></i><b>1.18.7</b> Ex 5: prototype</a></li>
</ul></li>
<li class="chapter" data-level="1.19" data-path="Rintro.html"><a href="Rintro.html#wrap-up"><i class="fa fa-check"></i><b>1.19</b> Wrap-up</a><ul>
<li class="chapter" data-level="1.19.1" data-path="Rintro.html"><a href="Rintro.html#feedback"><i class="fa fa-check"></i><b>1.19.1</b> Feedback</a></li>
<li class="chapter" data-level="1.19.2" data-path="Rintro.html"><a href="Rintro.html#resources"><i class="fa fa-check"></i><b>1.19.2</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Rmodels.html"><a href="Rmodels.html"><i class="fa fa-check"></i><b>2</b> R Regression Models</a><ul>
<li class="chapter" data-level="2.1" data-path="Rmodels.html"><a href="Rmodels.html#setup-1"><i class="fa fa-check"></i><b>2.1</b> Setup</a><ul>
<li class="chapter" data-level="2.1.1" data-path="Rmodels.html"><a href="Rmodels.html#software-materials-1"><i class="fa fa-check"></i><b>2.1.1</b> Software &amp; materials</a></li>
<li class="chapter" data-level="2.1.2" data-path="Rmodels.html"><a href="Rmodels.html#goals-1"><i class="fa fa-check"></i><b>2.1.2</b> Goals</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="Rmodels.html"><a href="Rmodels.html#before-fitting-a-model"><i class="fa fa-check"></i><b>2.2</b> Before fitting a model</a><ul>
<li class="chapter" data-level="2.2.1" data-path="Rmodels.html"><a href="Rmodels.html#load-the-data"><i class="fa fa-check"></i><b>2.2.1</b> Load the data</a></li>
<li class="chapter" data-level="2.2.2" data-path="Rmodels.html"><a href="Rmodels.html#examine-the-data"><i class="fa fa-check"></i><b>2.2.2</b> Examine the data</a></li>
<li class="chapter" data-level="2.2.3" data-path="Rmodels.html"><a href="Rmodels.html#plot-the-data"><i class="fa fa-check"></i><b>2.2.3</b> Plot the data</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="Rmodels.html"><a href="Rmodels.html#regression-with-continuous-outcomes"><i class="fa fa-check"></i><b>2.3</b> Regression with continuous outcomes</a><ul>
<li class="chapter" data-level="2.3.1" data-path="Rmodels.html"><a href="Rmodels.html#why-is-the-association-between-expense-and-sat-scores-negative"><i class="fa fa-check"></i><b>2.3.1</b> Why is the association between expense and SAT scores <em>negative</em>?</a></li>
<li class="chapter" data-level="2.3.2" data-path="Rmodels.html"><a href="Rmodels.html#the-lm-class-and-methods"><i class="fa fa-check"></i><b>2.3.2</b> The <code>lm</code> class and methods</a></li>
<li class="chapter" data-level="2.3.3" data-path="Rmodels.html"><a href="Rmodels.html#ols-regression-assumptions"><i class="fa fa-check"></i><b>2.3.3</b> OLS regression assumptions</a></li>
<li class="chapter" data-level="2.3.4" data-path="Rmodels.html"><a href="Rmodels.html#comparing-models"><i class="fa fa-check"></i><b>2.3.4</b> Comparing models</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="Rmodels.html"><a href="Rmodels.html#exercise-0-1"><i class="fa fa-check"></i><b>2.4</b> Exercise 0</a></li>
<li class="chapter" data-level="2.5" data-path="Rmodels.html"><a href="Rmodels.html#interactions-and-factors"><i class="fa fa-check"></i><b>2.5</b> Interactions and factors</a><ul>
<li class="chapter" data-level="2.5.1" data-path="Rmodels.html"><a href="Rmodels.html#modeling-interactions"><i class="fa fa-check"></i><b>2.5.1</b> Modeling interactions</a></li>
<li class="chapter" data-level="2.5.2" data-path="Rmodels.html"><a href="Rmodels.html#regression-with-categorical-predictors"><i class="fa fa-check"></i><b>2.5.2</b> Regression with categorical predictors</a></li>
<li class="chapter" data-level="2.5.3" data-path="Rmodels.html"><a href="Rmodels.html#setting-factor-reference-groups-and-contrasts"><i class="fa fa-check"></i><b>2.5.3</b> Setting factor reference groups and contrasts</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="Rmodels.html"><a href="Rmodels.html#exercise-1-1"><i class="fa fa-check"></i><b>2.6</b> Exercise 1</a></li>
<li class="chapter" data-level="2.7" data-path="Rmodels.html"><a href="Rmodels.html#regression-with-binary-outcomes"><i class="fa fa-check"></i><b>2.7</b> Regression with binary outcomes</a><ul>
<li class="chapter" data-level="2.7.1" data-path="Rmodels.html"><a href="Rmodels.html#logistic-regression"><i class="fa fa-check"></i><b>2.7.1</b> Logistic regression</a></li>
<li class="chapter" data-level="2.7.2" data-path="Rmodels.html"><a href="Rmodels.html#logistic-regression-example"><i class="fa fa-check"></i><b>2.7.2</b> Logistic regression example</a></li>
<li class="chapter" data-level="2.7.3" data-path="Rmodels.html"><a href="Rmodels.html#logistic-regression-coefficients"><i class="fa fa-check"></i><b>2.7.3</b> Logistic regression coefficients</a></li>
<li class="chapter" data-level="2.7.4" data-path="Rmodels.html"><a href="Rmodels.html#packages-for-computing-and-graphing-predicted-values"><i class="fa fa-check"></i><b>2.7.4</b> Packages for computing and graphing predicted values</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="Rmodels.html"><a href="Rmodels.html#exercise-2"><i class="fa fa-check"></i><b>2.8</b> Exercise 2</a></li>
<li class="chapter" data-level="2.9" data-path="Rmodels.html"><a href="Rmodels.html#multilevel-modeling"><i class="fa fa-check"></i><b>2.9</b> Multilevel modeling</a><ul>
<li class="chapter" data-level="2.9.1" data-path="Rmodels.html"><a href="Rmodels.html#multilevel-modeling-overview"><i class="fa fa-check"></i><b>2.9.1</b> Multilevel modeling overview</a></li>
<li class="chapter" data-level="2.9.2" data-path="Rmodels.html"><a href="Rmodels.html#the-exam-data"><i class="fa fa-check"></i><b>2.9.2</b> The Exam data</a></li>
<li class="chapter" data-level="2.9.3" data-path="Rmodels.html"><a href="Rmodels.html#the-null-model-and-icc"><i class="fa fa-check"></i><b>2.9.3</b> The null model and ICC</a></li>
<li class="chapter" data-level="2.9.4" data-path="Rmodels.html"><a href="Rmodels.html#adding-fixed-effects-predictors"><i class="fa fa-check"></i><b>2.9.4</b> Adding fixed-effects predictors</a></li>
<li class="chapter" data-level="2.9.5" data-path="Rmodels.html"><a href="Rmodels.html#multiple-degree-of-freedom-comparisons"><i class="fa fa-check"></i><b>2.9.5</b> Multiple degree of freedom comparisons</a></li>
<li class="chapter" data-level="2.9.6" data-path="Rmodels.html"><a href="Rmodels.html#random-slopes"><i class="fa fa-check"></i><b>2.9.6</b> Random slopes</a></li>
<li class="chapter" data-level="2.9.7" data-path="Rmodels.html"><a href="Rmodels.html#test-the-significance-of-the-random-slope"><i class="fa fa-check"></i><b>2.9.7</b> Test the significance of the random slope</a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="Rmodels.html"><a href="Rmodels.html#exercise-3-1"><i class="fa fa-check"></i><b>2.10</b> Exercise 3</a></li>
<li class="chapter" data-level="2.11" data-path="Rmodels.html"><a href="Rmodels.html#exercise-solutions-1"><i class="fa fa-check"></i><b>2.11</b> Exercise solutions</a><ul>
<li class="chapter" data-level="2.11.1" data-path="Rmodels.html"><a href="Rmodels.html#ex-0-prototype-1"><i class="fa fa-check"></i><b>2.11.1</b> Ex 0: prototype</a></li>
<li class="chapter" data-level="2.11.2" data-path="Rmodels.html"><a href="Rmodels.html#ex-1-prototype-1"><i class="fa fa-check"></i><b>2.11.2</b> Ex 1: prototype</a></li>
<li class="chapter" data-level="2.11.3" data-path="Rmodels.html"><a href="Rmodels.html#ex-2-prototype"><i class="fa fa-check"></i><b>2.11.3</b> Ex 2: prototype</a></li>
<li class="chapter" data-level="2.11.4" data-path="Rmodels.html"><a href="Rmodels.html#ex-3-prototype-1"><i class="fa fa-check"></i><b>2.11.4</b> Ex 3: prototype</a></li>
</ul></li>
<li class="chapter" data-level="2.12" data-path="Rmodels.html"><a href="Rmodels.html#wrap-up-1"><i class="fa fa-check"></i><b>2.12</b> Wrap-up</a><ul>
<li class="chapter" data-level="2.12.1" data-path="Rmodels.html"><a href="Rmodels.html#feedback-1"><i class="fa fa-check"></i><b>2.12.1</b> Feedback</a></li>
<li class="chapter" data-level="2.12.2" data-path="Rmodels.html"><a href="Rmodels.html#resources-1"><i class="fa fa-check"></i><b>2.12.2</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="Rgraphics.html"><a href="Rgraphics.html"><i class="fa fa-check"></i><b>3</b> R Graphics</a><ul>
<li class="chapter" data-level="3.1" data-path="Rgraphics.html"><a href="Rgraphics.html#setup-2"><i class="fa fa-check"></i><b>3.1</b> Setup</a><ul>
<li class="chapter" data-level="3.1.1" data-path="Rgraphics.html"><a href="Rgraphics.html#software-materials-2"><i class="fa fa-check"></i><b>3.1.1</b> Software &amp; materials</a></li>
<li class="chapter" data-level="3.1.2" data-path="Rgraphics.html"><a href="Rgraphics.html#goals-2"><i class="fa fa-check"></i><b>3.1.2</b> Goals</a></li>
<li class="chapter" data-level="3.1.3" data-path="Rgraphics.html"><a href="Rgraphics.html#starting-at-the-end"><i class="fa fa-check"></i><b>3.1.3</b> Starting at the end</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="Rgraphics.html"><a href="Rgraphics.html#why-ggplot2"><i class="fa fa-check"></i><b>3.2</b> Why <code>ggplot2</code>?</a><ul>
<li class="chapter" data-level="3.2.1" data-path="Rgraphics.html"><a href="Rgraphics.html#what-is-the-grammar-of-graphics"><i class="fa fa-check"></i><b>3.2.1</b> What is the Grammar Of Graphics?</a></li>
<li class="chapter" data-level="3.2.2" data-path="Rgraphics.html"><a href="Rgraphics.html#example-data-housing-prices"><i class="fa fa-check"></i><b>3.2.2</b> Example data: housing prices</a></li>
<li class="chapter" data-level="3.2.3" data-path="Rgraphics.html"><a href="Rgraphics.html#ggplot2-vs-base-graphics"><i class="fa fa-check"></i><b>3.2.3</b> <code>ggplot2</code> VS base graphics</a></li>
<li class="chapter" data-level="3.2.4" data-path="Rgraphics.html"><a href="Rgraphics.html#for-simple-graphs"><i class="fa fa-check"></i><b>3.2.4</b> For simple graphs</a></li>
<li class="chapter" data-level="3.2.5" data-path="Rgraphics.html"><a href="Rgraphics.html#for-more-complex-graphs"><i class="fa fa-check"></i><b>3.2.5</b> For more complex graphs</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="Rgraphics.html"><a href="Rgraphics.html#geometric-objects-and-aesthetics"><i class="fa fa-check"></i><b>3.3</b> Geometric objects and aesthetics</a><ul>
<li class="chapter" data-level="3.3.1" data-path="Rgraphics.html"><a href="Rgraphics.html#aesthetic-mapping"><i class="fa fa-check"></i><b>3.3.1</b> Aesthetic mapping</a></li>
<li class="chapter" data-level="3.3.2" data-path="Rgraphics.html"><a href="Rgraphics.html#geometric-objects-geom"><i class="fa fa-check"></i><b>3.3.2</b> Geometric objects (<code>geom</code>)</a></li>
<li class="chapter" data-level="3.3.3" data-path="Rgraphics.html"><a href="Rgraphics.html#aesthetic-mapping-vs-assignment"><i class="fa fa-check"></i><b>3.3.3</b> Aesthetic mapping VS assignment</a></li>
<li class="chapter" data-level="3.3.4" data-path="Rgraphics.html"><a href="Rgraphics.html#mapping-variables-to-other-aesthetics"><i class="fa fa-check"></i><b>3.3.4</b> Mapping variables to other aesthetics</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-0-2"><i class="fa fa-check"></i><b>3.4</b> Exercise 0</a></li>
<li class="chapter" data-level="3.5" data-path="Rgraphics.html"><a href="Rgraphics.html#statistical-transformations"><i class="fa fa-check"></i><b>3.5</b> Statistical transformations</a><ul>
<li class="chapter" data-level="3.5.1" data-path="Rgraphics.html"><a href="Rgraphics.html#why-transform-data"><i class="fa fa-check"></i><b>3.5.1</b> Why transform data?</a></li>
<li class="chapter" data-level="3.5.2" data-path="Rgraphics.html"><a href="Rgraphics.html#setting-arguments"><i class="fa fa-check"></i><b>3.5.2</b> Setting arguments</a></li>
<li class="chapter" data-level="3.5.3" data-path="Rgraphics.html"><a href="Rgraphics.html#changing-the-transformation"><i class="fa fa-check"></i><b>3.5.3</b> Changing the transformation</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-1-2"><i class="fa fa-check"></i><b>3.6</b> Exercise 1</a></li>
<li class="chapter" data-level="3.7" data-path="Rgraphics.html"><a href="Rgraphics.html#scales"><i class="fa fa-check"></i><b>3.7</b> Scales</a><ul>
<li class="chapter" data-level="3.7.1" data-path="Rgraphics.html"><a href="Rgraphics.html#controlling-aesthetic-mapping"><i class="fa fa-check"></i><b>3.7.1</b> Controlling aesthetic mapping</a></li>
<li class="chapter" data-level="3.7.2" data-path="Rgraphics.html"><a href="Rgraphics.html#common-scale-arguments"><i class="fa fa-check"></i><b>3.7.2</b> Common scale arguments</a></li>
<li class="chapter" data-level="3.7.3" data-path="Rgraphics.html"><a href="Rgraphics.html#scale-modification-examples"><i class="fa fa-check"></i><b>3.7.3</b> Scale modification examples</a></li>
<li class="chapter" data-level="3.7.4" data-path="Rgraphics.html"><a href="Rgraphics.html#using-different-color-scales"><i class="fa fa-check"></i><b>3.7.4</b> Using different color scales</a></li>
<li class="chapter" data-level="3.7.5" data-path="Rgraphics.html"><a href="Rgraphics.html#available-scales"><i class="fa fa-check"></i><b>3.7.5</b> Available scales</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-2-1"><i class="fa fa-check"></i><b>3.8</b> Exercise 2</a></li>
<li class="chapter" data-level="3.9" data-path="Rgraphics.html"><a href="Rgraphics.html#faceting"><i class="fa fa-check"></i><b>3.9</b> Faceting</a><ul>
<li class="chapter" data-level="3.9.1" data-path="Rgraphics.html"><a href="Rgraphics.html#what-is-faceting"><i class="fa fa-check"></i><b>3.9.1</b> What is faceting?</a></li>
<li class="chapter" data-level="3.9.2" data-path="Rgraphics.html"><a href="Rgraphics.html#what-is-the-trend-in-housing-prices-in-each-state"><i class="fa fa-check"></i><b>3.9.2</b> What is the trend in housing prices in each state?</a></li>
<li class="chapter" data-level="3.9.3" data-path="Rgraphics.html"><a href="Rgraphics.html#faceting-to-the-rescue"><i class="fa fa-check"></i><b>3.9.3</b> Faceting to the rescue</a></li>
</ul></li>
<li class="chapter" data-level="3.10" data-path="Rgraphics.html"><a href="Rgraphics.html#themes"><i class="fa fa-check"></i><b>3.10</b> Themes</a><ul>
<li class="chapter" data-level="3.10.1" data-path="Rgraphics.html"><a href="Rgraphics.html#what-are-themes"><i class="fa fa-check"></i><b>3.10.1</b> What are themes?</a></li>
<li class="chapter" data-level="3.10.2" data-path="Rgraphics.html"><a href="Rgraphics.html#overriding-theme-defaults"><i class="fa fa-check"></i><b>3.10.2</b> Overriding theme defaults</a></li>
<li class="chapter" data-level="3.10.3" data-path="Rgraphics.html"><a href="Rgraphics.html#creating-and-saving-new-themes"><i class="fa fa-check"></i><b>3.10.3</b> Creating and saving new themes</a></li>
</ul></li>
<li class="chapter" data-level="3.11" data-path="Rgraphics.html"><a href="Rgraphics.html#the-1-faq"><i class="fa fa-check"></i><b>3.11</b> The #1 FAQ</a><ul>
<li class="chapter" data-level="3.11.1" data-path="Rgraphics.html"><a href="Rgraphics.html#map-aesthetic-to-different-columns"><i class="fa fa-check"></i><b>3.11.1</b> Map aesthetic to different columns</a></li>
</ul></li>
<li class="chapter" data-level="3.12" data-path="Rgraphics.html"><a href="Rgraphics.html#putting-it-all-together"><i class="fa fa-check"></i><b>3.12</b> Putting it all together</a><ul>
<li class="chapter" data-level="3.12.1" data-path="Rgraphics.html"><a href="Rgraphics.html#challenge-recreate-this-economist-graph"><i class="fa fa-check"></i><b>3.12.1</b> Challenge: recreate this <code>Economist</code> graph</a></li>
<li class="chapter" data-level="3.12.2" data-path="Rgraphics.html"><a href="Rgraphics.html#challenge-solution"><i class="fa fa-check"></i><b>3.12.2</b> Challenge solution:</a></li>
</ul></li>
<li class="chapter" data-level="3.13" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-solutions-2"><i class="fa fa-check"></i><b>3.13</b> Exercise solutions</a><ul>
<li class="chapter" data-level="3.13.1" data-path="Rgraphics.html"><a href="Rgraphics.html#ex-0-prototype-2"><i class="fa fa-check"></i><b>3.13.1</b> Ex 0: prototype</a></li>
<li class="chapter" data-level="3.13.2" data-path="Rgraphics.html"><a href="Rgraphics.html#ex-1-prototype-2"><i class="fa fa-check"></i><b>3.13.2</b> Ex 1: prototype</a></li>
<li class="chapter" data-level="3.13.3" data-path="Rgraphics.html"><a href="Rgraphics.html#ex-2-prototype-1"><i class="fa fa-check"></i><b>3.13.3</b> Ex 2: prototype</a></li>
</ul></li>
<li class="chapter" data-level="3.14" data-path="Rgraphics.html"><a href="Rgraphics.html#wrap-up-2"><i class="fa fa-check"></i><b>3.14</b> Wrap-up</a><ul>
<li class="chapter" data-level="3.14.1" data-path="Rgraphics.html"><a href="Rgraphics.html#feedback-2"><i class="fa fa-check"></i><b>3.14.1</b> Feedback</a></li>
<li class="chapter" data-level="3.14.2" data-path="Rgraphics.html"><a href="Rgraphics.html#resources-2"><i class="fa fa-check"></i><b>3.14.2</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="RDataWrangling.html"><a href="RDataWrangling.html"><i class="fa fa-check"></i><b>4</b> R Data Wrangling</a><ul>
<li class="chapter" data-level="4.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#setup-3"><i class="fa fa-check"></i><b>4.1</b> Setup</a><ul>
<li class="chapter" data-level="4.1.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#software-materials-3"><i class="fa fa-check"></i><b>4.1.1</b> Software &amp; materials</a></li>
<li class="chapter" data-level="4.1.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#goals-3"><i class="fa fa-check"></i><b>4.1.2</b> Goals</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#example-project"><i class="fa fa-check"></i><b>4.2</b> Example project</a><ul>
<li class="chapter" data-level="4.2.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#problems-with-the-data"><i class="fa fa-check"></i><b>4.2.1</b> Problems with the data</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-0-3"><i class="fa fa-check"></i><b>4.3</b> Exercise 0</a></li>
<li class="chapter" data-level="4.4" data-path="RDataWrangling.html"><a href="RDataWrangling.html#useful-data-manipulation-packages"><i class="fa fa-check"></i><b>4.4</b> Useful data manipulation packages</a></li>
<li class="chapter" data-level="4.5" data-path="RDataWrangling.html"><a href="RDataWrangling.html#working-with-excel-worksheets"><i class="fa fa-check"></i><b>4.5</b> Working with Excel worksheets</a><ul>
<li class="chapter" data-level="4.5.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#iterating-over-file-names-with-map"><i class="fa fa-check"></i><b>4.5.1</b> Iterating over file names with <code>map</code></a></li>
<li class="chapter" data-level="4.5.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#filtering-strings-using-regular-expressions"><i class="fa fa-check"></i><b>4.5.2</b> Filtering strings using regular expressions</a></li>
<li class="chapter" data-level="4.5.3" data-path="RDataWrangling.html"><a href="RDataWrangling.html#writing-your-own-functions"><i class="fa fa-check"></i><b>4.5.3</b> Writing your own functions</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="RDataWrangling.html"><a href="RDataWrangling.html#reading-excel-data-files"><i class="fa fa-check"></i><b>4.6</b> Reading Excel data files</a></li>
<li class="chapter" data-level="4.7" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-1-3"><i class="fa fa-check"></i><b>4.7</b> Exercise 1</a></li>
<li class="chapter" data-level="4.8" data-path="RDataWrangling.html"><a href="RDataWrangling.html#data-cleanup"><i class="fa fa-check"></i><b>4.8</b> Data cleanup</a><ul>
<li class="chapter" data-level="4.8.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#selecting-columns"><i class="fa fa-check"></i><b>4.8.1</b> Selecting columns</a></li>
<li class="chapter" data-level="4.8.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#dropping-missing-values"><i class="fa fa-check"></i><b>4.8.2</b> Dropping missing values</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-2-2"><i class="fa fa-check"></i><b>4.9</b> Exercise 2</a><ul>
<li class="chapter" data-level="4.9.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#re-arranging-into-a-single-table"><i class="fa fa-check"></i><b>4.9.1</b> Re-arranging into a single table</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-3-2"><i class="fa fa-check"></i><b>4.10</b> Exercise 3</a></li>
<li class="chapter" data-level="4.11" data-path="RDataWrangling.html"><a href="RDataWrangling.html#data-organization-and-storage"><i class="fa fa-check"></i><b>4.11</b> Data organization and storage</a><ul>
<li class="chapter" data-level="4.11.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#one-table-for-each-year"><i class="fa fa-check"></i><b>4.11.1</b> One table for each year</a></li>
<li class="chapter" data-level="4.11.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#one-big-table"><i class="fa fa-check"></i><b>4.11.2</b> One big table</a></li>
</ul></li>
<li class="chapter" data-level="4.12" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-4-1"><i class="fa fa-check"></i><b>4.12</b> Exercise 4</a></li>
<li class="chapter" data-level="4.13" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-solutions-3"><i class="fa fa-check"></i><b>4.13</b> Exercise solutions</a><ul>
<li class="chapter" data-level="4.13.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#ex-0-prototype-3"><i class="fa fa-check"></i><b>4.13.1</b> Ex 0: prototype</a></li>
<li class="chapter" data-level="4.13.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#ex-1-prototype-3"><i class="fa fa-check"></i><b>4.13.2</b> Ex 1: prototype</a></li>
<li class="chapter" data-level="4.13.3" data-path="RDataWrangling.html"><a href="RDataWrangling.html#ex-2-prototype-2"><i class="fa fa-check"></i><b>4.13.3</b> Ex 2: prototype</a></li>
<li class="chapter" data-level="4.13.4" data-path="RDataWrangling.html"><a href="RDataWrangling.html#ex-3-prototype-2"><i class="fa fa-check"></i><b>4.13.4</b> Ex 3: prototype</a></li>
<li class="chapter" data-level="4.13.5" data-path="RDataWrangling.html"><a href="RDataWrangling.html#ex-4-prototype-1"><i class="fa fa-check"></i><b>4.13.5</b> Ex 4: prototype</a></li>
</ul></li>
<li class="chapter" data-level="4.14" data-path="RDataWrangling.html"><a href="RDataWrangling.html#wrap-up-3"><i class="fa fa-check"></i><b>4.14</b> Wrap-up</a><ul>
<li class="chapter" data-level="4.14.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#feedback-3"><i class="fa fa-check"></i><b>4.14.1</b> Feedback</a></li>
<li class="chapter" data-level="4.14.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#resources-3"><i class="fa fa-check"></i><b>4.14.2</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Python</b></span></li>
<li class="chapter" data-level="5" data-path="PythonIntro.html"><a href="PythonIntro.html"><i class="fa fa-check"></i><b>5</b> Python Introduction</a><ul>
<li class="chapter" data-level="5.1" data-path="PythonIntro.html"><a href="PythonIntro.html#setup-4"><i class="fa fa-check"></i><b>5.1</b> Setup</a><ul>
<li class="chapter" data-level="5.1.1" data-path="PythonIntro.html"><a href="PythonIntro.html#software-materials-4"><i class="fa fa-check"></i><b>5.1.1</b> Software &amp; Materials</a></li>
<li class="chapter" data-level="5.1.2" data-path="PythonIntro.html"><a href="PythonIntro.html#goals-4"><i class="fa fa-check"></i><b>5.1.2</b> Goals</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="PythonIntro.html"><a href="PythonIntro.html#what-is-python"><i class="fa fa-check"></i><b>5.2</b> What is Python?</a></li>
<li class="chapter" data-level="5.3" data-path="PythonIntro.html"><a href="PythonIntro.html#how-can-i-interact-with-python"><i class="fa fa-check"></i><b>5.3</b> How can I interact with Python?</a></li>
<li class="chapter" data-level="5.4" data-path="PythonIntro.html"><a href="PythonIntro.html#reading-the-text-of-alice-in-wonderland-from-a-file"><i class="fa fa-check"></i><b>5.4</b> Reading the text of Alice in Wonderland from a file</a></li>
<li class="chapter" data-level="5.5" data-path="PythonIntro.html"><a href="PythonIntro.html#counting-chapters-lines-and-words"><i class="fa fa-check"></i><b>5.5</b> Counting chapters, lines, and words</a><ul>
<li class="chapter" data-level="5.5.1" data-path="PythonIntro.html"><a href="PythonIntro.html#splitting-a-string-into-a-list-of-words"><i class="fa fa-check"></i><b>5.5.1</b> Splitting a string into a list of words</a></li>
<li class="chapter" data-level="5.5.2" data-path="PythonIntro.html"><a href="PythonIntro.html#using-sets-to-calculate-the-number-of-unique-words"><i class="fa fa-check"></i><b>5.5.2</b> Using sets to calculate the number of unique words</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="PythonIntro.html"><a href="PythonIntro.html#exercise-reading-text-from-a-file-and-splitting"><i class="fa fa-check"></i><b>5.6</b> Exercise: Reading text from a file and splitting</a><ul>
<li class="chapter" data-level="5.6.1" data-path="PythonIntro.html"><a href="PythonIntro.html#working-with-lists"><i class="fa fa-check"></i><b>5.6.1</b> Working with lists</a></li>
<li class="chapter" data-level="5.6.2" data-path="PythonIntro.html"><a href="PythonIntro.html#counting-chapters-and-paragraphs"><i class="fa fa-check"></i><b>5.6.2</b> Counting chapters and paragraphs</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="PythonIntro.html"><a href="PythonIntro.html#exercise-count-the-number-of-main-characters"><i class="fa fa-check"></i><b>5.7</b> Exercise: count the number of main characters</a></li>
<li class="chapter" data-level="5.8" data-path="PythonIntro.html"><a href="PythonIntro.html#working-with-nested-structures-words-within-paragraphs-within-chapters"><i class="fa fa-check"></i><b>5.8</b> Working with nested structures: words within paragraphs within chapters</a><ul>
<li class="chapter" data-level="5.8.1" data-path="PythonIntro.html"><a href="PythonIntro.html#iterating-over-paragraphs-using-for-loops"><i class="fa fa-check"></i><b>5.8.1</b> Iterating over paragraphs using for-loops</a></li>
<li class="chapter" data-level="5.8.2" data-path="PythonIntro.html"><a href="PythonIntro.html#iterating-and-collecting-paragraphs-per-chapter-using-list-comprehension"><i class="fa fa-check"></i><b>5.8.2</b> Iterating and collecting paragraphs per chapter using list comprehension</a></li>
<li class="chapter" data-level="5.8.3" data-path="PythonIntro.html"><a href="PythonIntro.html#organizing-results-in-dictionaries"><i class="fa fa-check"></i><b>5.8.3</b> Organizing results in dictionaries</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="PythonIntro.html"><a href="PythonIntro.html#exercise-iterating-and-counting-things"><i class="fa fa-check"></i><b>5.9</b> Exercise: Iterating and counting things</a></li>
<li class="chapter" data-level="5.10" data-path="PythonIntro.html"><a href="PythonIntro.html#importing-numpy-and-calculating-simple-statistics"><i class="fa fa-check"></i><b>5.10</b> Importing numpy and calculating simple statistics</a></li>
<li class="chapter" data-level="5.11" data-path="PythonIntro.html"><a href="PythonIntro.html#wrap-up-4"><i class="fa fa-check"></i><b>5.11</b> Wrap-up</a><ul>
<li class="chapter" data-level="5.11.1" data-path="PythonIntro.html"><a href="PythonIntro.html#feedback-4"><i class="fa fa-check"></i><b>5.11.1</b> Feedback</a></li>
<li class="chapter" data-level="5.11.2" data-path="PythonIntro.html"><a href="PythonIntro.html#resources-4"><i class="fa fa-check"></i><b>5.11.2</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html"><i class="fa fa-check"></i><b>6</b> Python Web-Scraping</a><ul>
<li class="chapter" data-level="6.1" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#setup-5"><i class="fa fa-check"></i><b>6.1</b> Setup</a><ul>
<li class="chapter" data-level="6.1.1" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#software-materials-5"><i class="fa fa-check"></i><b>6.1.1</b> Software &amp; Materials</a></li>
<li class="chapter" data-level="6.1.2" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#goals-5"><i class="fa fa-check"></i><b>6.1.2</b> Goals</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#preliminary-questions"><i class="fa fa-check"></i><b>6.2</b> Preliminary questions</a><ul>
<li class="chapter" data-level="6.2.1" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#what-is-web-scraping"><i class="fa fa-check"></i><b>6.2.1</b> What is web scraping?</a></li>
<li class="chapter" data-level="6.2.2" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#is-web-scraping-legal-is-it-ethical"><i class="fa fa-check"></i><b>6.2.2</b> Is web scraping legal? Is it ethical?</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#example-project-1"><i class="fa fa-check"></i><b>6.3</b> Example project</a></li>
<li class="chapter" data-level="6.4" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#take-shortcuts-if-you-can"><i class="fa fa-check"></i><b>6.4</b> Take shortcuts if you can</a><ul>
<li class="chapter" data-level="6.4.1" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#examining-the-structure-of-our-target-web-service"><i class="fa fa-check"></i><b>6.4.1</b> Examining the structure of our target web service</a></li>
<li class="chapter" data-level="6.4.2" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#making-requests-using-python"><i class="fa fa-check"></i><b>6.4.2</b> Making requests using python</a></li>
<li class="chapter" data-level="6.4.3" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#organizing-and-saving-the-data"><i class="fa fa-check"></i><b>6.4.3</b> Organizing and saving the data</a></li>
<li class="chapter" data-level="6.4.4" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#iterating-to-retrieve-all-the-data"><i class="fa fa-check"></i><b>6.4.4</b> Iterating to retrieve all the data</a></li>
<li class="chapter" data-level="6.4.5" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#exercise-retrieve-exhibits-data"><i class="fa fa-check"></i><b>6.4.5</b> Exercise: Retrieve exhibits data</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#parse-html-if-you-have-to"><i class="fa fa-check"></i><b>6.5</b> Parse html if you have to</a><ul>
<li class="chapter" data-level="6.5.1" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#retrieving-html"><i class="fa fa-check"></i><b>6.5.1</b> Retrieving HTML</a></li>
<li class="chapter" data-level="6.5.2" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#parsing-html-using-the-lxml-library"><i class="fa fa-check"></i><b>6.5.2</b> Parsing HTML using the lxml library</a></li>
<li class="chapter" data-level="6.5.3" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#using-xpath-to-extract-content-from-html"><i class="fa fa-check"></i><b>6.5.3</b> Using xpath to extract content from HTML</a></li>
<li class="chapter" data-level="6.5.4" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#iterating-to-retrieve-content-from-a-list-of-html-elements"><i class="fa fa-check"></i><b>6.5.4</b> Iterating to retrieve content from a list of HTML elements</a></li>
<li class="chapter" data-level="6.5.5" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#exercise-parsing-html"><i class="fa fa-check"></i><b>6.5.5</b> Exercise: parsing HTML</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#use-scrapy-for-large-or-complicated-projects"><i class="fa fa-check"></i><b>6.6</b> Use Scrapy for large or complicated projects</a></li>
<li class="chapter" data-level="6.7" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#use-a-browser-driver-as-a-last-resort"><i class="fa fa-check"></i><b>6.7</b> Use a browser driver as a last resort</a></li>
<li class="chapter" data-level="6.8" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#wrap-up-5"><i class="fa fa-check"></i><b>6.8</b> Wrap-up</a><ul>
<li class="chapter" data-level="6.8.1" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#feedback-5"><i class="fa fa-check"></i><b>6.8.1</b> Feedback</a></li>
<li class="chapter" data-level="6.8.2" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#resources-5"><i class="fa fa-check"></i><b>6.8.2</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Stata</b></span></li>
<li class="chapter" data-level="7" data-path="StataIntro.html"><a href="StataIntro.html"><i class="fa fa-check"></i><b>7</b> Stata Introduction</a><ul>
<li class="chapter" data-level="7.1" data-path="StataIntro.html"><a href="StataIntro.html#setup-6"><i class="fa fa-check"></i><b>7.1</b> Setup</a><ul>
<li class="chapter" data-level="7.1.1" data-path="StataIntro.html"><a href="StataIntro.html#software-materials-6"><i class="fa fa-check"></i><b>7.1.1</b> Software &amp; Materials</a></li>
<li class="chapter" data-level="7.1.2" data-path="StataIntro.html"><a href="StataIntro.html#organization"><i class="fa fa-check"></i><b>7.1.2</b> Organization</a></li>
<li class="chapter" data-level="7.1.3" data-path="StataIntro.html"><a href="StataIntro.html#goals-6"><i class="fa fa-check"></i><b>7.1.3</b> Goals</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="StataIntro.html"><a href="StataIntro.html#why-stata"><i class="fa fa-check"></i><b>7.2</b> Why stata?</a><ul>
<li class="chapter" data-level="7.2.1" data-path="StataIntro.html"><a href="StataIntro.html#stata-interface"><i class="fa fa-check"></i><b>7.2.1</b> Stata interface</a></li>
<li class="chapter" data-level="7.2.2" data-path="StataIntro.html"><a href="StataIntro.html#do-files"><i class="fa fa-check"></i><b>7.2.2</b> Do-files</a></li>
<li class="chapter" data-level="7.2.3" data-path="StataIntro.html"><a href="StataIntro.html#stata-help"><i class="fa fa-check"></i><b>7.2.3</b> Stata help</a></li>
<li class="chapter" data-level="7.2.4" data-path="StataIntro.html"><a href="StataIntro.html#general-stata-command-syntax"><i class="fa fa-check"></i><b>7.2.4</b> General Stata command syntax</a></li>
<li class="chapter" data-level="7.2.5" data-path="StataIntro.html"><a href="StataIntro.html#commenting-and-formatting-syntax"><i class="fa fa-check"></i><b>7.2.5</b> Commenting and formatting syntax</a></li>
<li class="chapter" data-level="7.2.6" data-path="StataIntro.html"><a href="StataIntro.html#lets-get-started"><i class="fa fa-check"></i><b>7.2.6</b> Let’s get started</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="StataIntro.html"><a href="StataIntro.html#getting-data-into-stata"><i class="fa fa-check"></i><b>7.3</b> Getting data into Stata</a><ul>
<li class="chapter" data-level="7.3.1" data-path="StataIntro.html"><a href="StataIntro.html#data-file-commands"><i class="fa fa-check"></i><b>7.3.1</b> Data file commands</a></li>
<li class="chapter" data-level="7.3.2" data-path="StataIntro.html"><a href="StataIntro.html#a-note-about-path-names"><i class="fa fa-check"></i><b>7.3.2</b> A note about path names</a></li>
<li class="chapter" data-level="7.3.3" data-path="StataIntro.html"><a href="StataIntro.html#wheres-my-data"><i class="fa fa-check"></i><b>7.3.3</b> Where’s my data?</a></li>
<li class="chapter" data-level="7.3.4" data-path="StataIntro.html"><a href="StataIntro.html#what-if-my-data-is-not-a-stata-file"><i class="fa fa-check"></i><b>7.3.4</b> What if my data is not a Stata file?</a></li>
<li class="chapter" data-level="7.3.5" data-path="StataIntro.html"><a href="StataIntro.html#what-if-my-data-is-from-another-statistical-software-program"><i class="fa fa-check"></i><b>7.3.5</b> What if my data is from another statistical software program?</a></li>
<li class="chapter" data-level="7.3.6" data-path="StataIntro.html"><a href="StataIntro.html#exercise-0-importing-data"><i class="fa fa-check"></i><b>7.3.6</b> Exercise 0: Importing data</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="StataIntro.html"><a href="StataIntro.html#statistics-and-graphs"><i class="fa fa-check"></i><b>7.4</b> Statistics and graphs</a><ul>
<li class="chapter" data-level="7.4.1" data-path="StataIntro.html"><a href="StataIntro.html#frequently-used-commands"><i class="fa fa-check"></i><b>7.4.1</b> Frequently used commands</a></li>
<li class="chapter" data-level="7.4.2" data-path="StataIntro.html"><a href="StataIntro.html#basic-graphing-commands"><i class="fa fa-check"></i><b>7.4.2</b> Basic graphing commands</a></li>
<li class="chapter" data-level="7.4.3" data-path="StataIntro.html"><a href="StataIntro.html#the-by-command"><i class="fa fa-check"></i><b>7.4.3</b> The <code>by</code> command</a></li>
<li class="chapter" data-level="7.4.4" data-path="StataIntro.html"><a href="StataIntro.html#exercise-1-descriptive-statistics"><i class="fa fa-check"></i><b>7.4.4</b> Exercise 1: Descriptive statistics</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="StataIntro.html"><a href="StataIntro.html#basic-data-management"><i class="fa fa-check"></i><b>7.5</b> Basic data management</a><ul>
<li class="chapter" data-level="7.5.1" data-path="StataIntro.html"><a href="StataIntro.html#labels"><i class="fa fa-check"></i><b>7.5.1</b> Labels</a></li>
<li class="chapter" data-level="7.5.2" data-path="StataIntro.html"><a href="StataIntro.html#variable-and-value-labels"><i class="fa fa-check"></i><b>7.5.2</b> Variable and value labels</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="StataIntro.html"><a href="StataIntro.html#exercise-2-variable-labels-and-value-labels"><i class="fa fa-check"></i><b>7.6</b> Exercise 2: Variable labels and value labels</a><ul>
<li class="chapter" data-level="7.6.1" data-path="StataIntro.html"><a href="StataIntro.html#working-on-subsets"><i class="fa fa-check"></i><b>7.6.1</b> Working on subsets</a></li>
<li class="chapter" data-level="7.6.2" data-path="StataIntro.html"><a href="StataIntro.html#generating-and-replacing-variables"><i class="fa fa-check"></i><b>7.6.2</b> Generating and replacing variables</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="StataIntro.html"><a href="StataIntro.html#exercise-3-manipulating-variables"><i class="fa fa-check"></i><b>7.7</b> Exercise 3: Manipulating variables</a></li>
<li class="chapter" data-level="7.8" data-path="StataIntro.html"><a href="StataIntro.html#wrap-up-6"><i class="fa fa-check"></i><b>7.8</b> Wrap-up</a><ul>
<li class="chapter" data-level="7.8.1" data-path="StataIntro.html"><a href="StataIntro.html#feedback-6"><i class="fa fa-check"></i><b>7.8.1</b> Feedback</a></li>
<li class="chapter" data-level="7.8.2" data-path="StataIntro.html"><a href="StataIntro.html#resources-6"><i class="fa fa-check"></i><b>7.8.2</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">IQSS Workshops</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-data-wrangling" class="section level1">
<h1><span class="header-section-number">4</span> R Data Wrangling</h1>
<p><strong>Topics</strong></p>
<ul>
<li>Iterating over files</li>
<li>Filtering with regular expressions (regex)</li>
<li>Writing your own functions</li>
<li>Reshaping data</li>
<li>Loading Excel worksheets</li>
</ul>
<div id="setup-3" class="section level2">
<h2><span class="header-section-number">4.1</span> Setup</h2>
<div id="software-materials-3" class="section level3">
<h3><span class="header-section-number">4.1.1</span> Software &amp; materials</h3>
<p>You should have R and RStudio installed — if not:</p>
<ul>
<li>Download and install R: <a href="http://cran.r-project.org" class="uri">http://cran.r-project.org</a></li>
<li>Download and install RStudio: <a href="https://www.rstudio.com/products/rstudio/download/#download" class="uri">https://www.rstudio.com/products/rstudio/download/#download</a></li>
</ul>
<p>Download materials:</p>
<ul>
<li>Download class materials at <a href="https://iqss.github.io/dss-workshops-redux/R/RDataWrangling.zip" class="uri">https://iqss.github.io/dss-workshops-redux/R/RDataWrangling.zip</a></li>
<li>Extract materials from <code>RDataWrangling.zip</code> and move to your desktop!</li>
</ul>
<p>Start RStudio and create a new project:</p>
<ul>
<li>On Windows click the start button and search for RStudio. On Mac RStudio will be in your applications folder.</li>
<li>In Rstudio go to <code>File -&gt; New Project</code>.</li>
<li>Choose <code>Existing Directory</code> and browse to the <code>RDataWrangling</code> directory.</li>
<li>Choose <code>File -&gt; Open File</code> and select the blank version of the <code>.Rmd</code> file.</li>
</ul>
<p>While R’s built-in packages are powerful, in recent years there has been a big surge in well-designed <em>contributed packages</em> for R. In particular, a collection of R packages called <a href="https://www.tidyverse.org/">tidyverse</a> have been designed specifically for data science. All packages included in <code>tidyverse</code> share an underlying design philosophy, grammar, and data structures. We will use <code>tidyverse</code> packages throughout the workshop, so let’s install them now:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages(&quot;tidyverse&quot;)</span>
<span class="kw">library</span>(tidyverse)</code></pre></div>
</div>
<div id="goals-3" class="section level3">
<h3><span class="header-section-number">4.1.2</span> Goals</h3>
<p>Class Structure and Organization:</p>
<ul>
<li>Ask questions at any time. Really!</li>
<li>Collaboration is encouraged - please spend a minute introducing yourself to your neighbors!</li>
</ul>
<p>This is an intermediate R course:</p>
<ul>
<li>Assumes working knowledge of R</li>
<li>Relatively fast-paced</li>
<li>Data scientists are known and celebrated for modeling and visually displaying information, but down in the data science engine room there is a lot of less glamorous work to be done. Before data can be used effectively it must often be cleaned, corrected, and reformatted. This workshop introduces the basic tools needed to make your data behave, including data reshaping, regular expressions and other text manipulation tools.</li>
</ul>
</div>
</div>
<div id="example-project" class="section level2">
<h2><span class="header-section-number">4.2</span> Example project</h2>
<p>It is common for data to be made available on a website somewhere, either by a government agency, research group, or other organizations and entities. Often the data you want is spread over many files, and retrieving it all one file at a time is tedious and time consuming. Such is the case with the baby names data we will be using today.</p>
<p>The UK <a href="https://www.ons.gov.uk">Office for National Statistics</a> provides yearly data on the most popular baby names going back to 1996. The data is provided separately for boys and girls and is stored in Excel spreadsheets.</p>
<p>I have downloaded all the excel files containing boys names data from <a href="https://www.ons.gov.uk/peoplepopulationandcommunity/birthsdeathsandmarriages/livebirths/datasets/babynamesenglandandwalesbabynamesstatisticsboys" class="uri">https://www.ons.gov.uk/peoplepopulationandcommunity/birthsdeathsandmarriages/livebirths/datasets/babynamesenglandandwalesbabynamesstatisticsboys</a> and made them available at <a href="http://tutorials.iq.harvard.edu/R/RDataManagement/data/boysNames.zip" class="uri">http://tutorials.iq.harvard.edu/R/RDataManagement/data/boysNames.zip</a>.</p>
<p>Our mission is to extract and graph the <strong>top 100</strong> boys names in England and Wales for every year since 1996. There are several things that make this challenging.</p>
<div id="problems-with-the-data" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Problems with the data</h3>
<p>While it was good of the UK Office for National Statistics to provide baby name data, they were not very diligent about arranging it in a convenient or consistent format.</p>
</div>
</div>
<div id="exercise-0-3" class="section level2">
<h2><span class="header-section-number">4.3</span> Exercise 0</h2>
<p>Our mission is to extract and graph the <strong>top 100</strong> boys names in England and Wales for every year since 1996. There are several things that make this challenging.</p>
<ol style="list-style-type: decimal">
<li><p>Locate the file named <code>1996boys_tcm77-254026.xlsx</code> and open it in a spreadsheet. (If you don’t have a spreadsheet program installed on your computer you can downloads one from <a href="https://www.libreoffice.org/download/download/" class="uri">https://www.libreoffice.org/download/download/</a>). What issues can you identify that might make working with these data more difficult?</p></li>
<li><p>Locate the file named <code>2015boysnamesfinal.xlsx</code> and open it in a spreadsheet. In what ways is the format different than the format of <code>1996boys_tcm77-254026.xlsx</code>? How might these differences make it more difficult to work with these data?</p></li>
</ol>
</div>
<div id="useful-data-manipulation-packages" class="section level2">
<h2><span class="header-section-number">4.4</span> Useful data manipulation packages</h2>
<p>As you can see, the data is in quite a messy state. Note that this is not a contrived example; this is exactly the way the data came to us from the UK government website! Let’s start cleaning and organizing it. The <code>tidyverse</code> suite of packages provides many modern conveniences that will make this job easier.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)</code></pre></div>
</div>
<div id="working-with-excel-worksheets" class="section level2">
<h2><span class="header-section-number">4.5</span> Working with Excel worksheets</h2>
<p>Each Excel file contains a worksheet with the baby names data we want. Each file also contains additional supplemental worksheets that we are not currently interested in. As noted above, the worksheet of interest differs from year to year, but always has “Table 1” in the sheet name.</p>
<p>The first step is to get a vector of file names.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">boy.file.names &lt;-<span class="st"> </span><span class="kw">list.files</span>(<span class="st">&quot;dataSets/boys&quot;</span>, <span class="dt">full.names =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>Now that we’ve told R the names of the data files we can start working with them. For example, the first file is</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">boy.file.names[[<span class="dv">1</span>]]</code></pre></div>
<p>and we can use the <code>excel_sheets</code> function from the <em>readxl</em> package to list the worksheet names from this file.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(readxl)

<span class="kw">excel_sheets</span>(boy.file.names[[<span class="dv">1</span>]])</code></pre></div>
<div id="iterating-over-file-names-with-map" class="section level3">
<h3><span class="header-section-number">4.5.1</span> Iterating over file names with <code>map</code></h3>
<p>Now that we know how to retrieve the names of the worksheets in an Excel file we could start writing code to extract the sheet names from each file, e.g.,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">excel_sheets</span>(boy.file.names[[<span class="dv">1</span>]])
<span class="kw">excel_sheets</span>(boy.file.names[[<span class="dv">2</span>]])
## ...
<span class="kw">excel_sheets</span>(boy.file.names[[<span class="dv">20</span>]])</code></pre></div>
<p>This is not a terrible idea for a small number of files, but it is more convenient to let R do the iteration for us. We could use a <code>for</code> loop, or <code>sapply</code>, but the <code>map</code> family of functions from the <em>purrr</em> package gives us a more consistent alternative, so we’ll use that.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(purrr)
<span class="kw">map</span>(boy.file.names, excel_sheets)</code></pre></div>
</div>
<div id="filtering-strings-using-regular-expressions" class="section level3">
<h3><span class="header-section-number">4.5.2</span> Filtering strings using regular expressions</h3>
<p>In order extract the correct worksheet names we need a way to extract strings containing “Table 1”. Base R provides some string manipulation capabilities (see <code>?regex</code>, <code>?sub</code> and <code>?grep</code>), but we will use the <em>stringr</em> package because it is more user-friendly.</p>
<p>The <em>stringr</em> package provides functions to <em>detect</em>, <em>locate</em>, <em>extract</em>, <em>match</em>, <em>replace</em>, <em>combine</em> and <em>split</em> strings (among other things).</p>
<p>Here we want to detect the pattern “Table 1”, and only return elements with this pattern. We can do that using the <code>str_subset</code> function. The first argument to <code>str_subset</code> is character vector we want to search in. The second argument is a <em>regular expression</em> matching the pattern we want to retain.</p>
<p>If you are not familiar with regular expressions, <a href="http://www.regexr.com/" class="uri">http://www.regexr.com/</a> is a good place to start.</p>
<p>Now that we know how to filter character vectors using <code>str_subset</code> we can identify the correct sheet in a particular Excel file. For example,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(stringr)
<span class="kw">str_subset</span>(<span class="kw">excel_sheets</span>(boy.file.names[[<span class="dv">1</span>]]), <span class="st">&quot;Table 1&quot;</span>)</code></pre></div>
</div>
<div id="writing-your-own-functions" class="section level3">
<h3><span class="header-section-number">4.5.3</span> Writing your own functions</h3>
<p>The <code>map*</code> functions are useful when you want to apply a function to a list or vector of inputs and obtain the return values. This is very convenient when a function already exists that does exactly what you want. In the examples above we mapped the <code>excel_sheets</code> function to the elements of a vector containing file names. But now there is no function that both retrieves worksheet names and subsets them. Fortunately, writing functions in R is easy.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">get.data.sheet.name &lt;-<span class="st"> </span><span class="cf">function</span>(file, pattern) {
    <span class="kw">str_subset</span>(<span class="kw">excel_sheets</span>(file), pattern)
}</code></pre></div>
<p>Now we can map this new function over our vector of file names.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map</span>(boy.file.names,
    get.data.sheet.name,
    <span class="dt">pattern =</span> <span class="st">&quot;Table 1&quot;</span>)</code></pre></div>
</div>
</div>
<div id="reading-excel-data-files" class="section level2">
<h2><span class="header-section-number">4.6</span> Reading Excel data files</h2>
<p>Now that we know the correct worksheet from each file we can actually read those data into R. We can do that using the <code>read_excel</code> function.</p>
<p>We’ll start by reading the data from the first file, just to check that it works. Recall that the actual data starts on row 7, so we want to skip the first 6 rows.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tmp &lt;-<span class="st"> </span><span class="kw">read_excel</span>(
    boy.file.names[<span class="dv">1</span>],
    <span class="dt">sheet =</span> <span class="kw">get.data.sheet.name</span>(boy.file.names[<span class="dv">1</span>],
                                <span class="dt">pattern =</span> <span class="st">&quot;Table 1&quot;</span>),
    <span class="dt">skip =</span> <span class="dv">6</span>)

<span class="kw">library</span>(dplyr, <span class="dt">quietly=</span><span class="ot">TRUE</span>)
<span class="kw">glimpse</span>(tmp)</code></pre></div>
</div>
<div id="exercise-1-3" class="section level2">
<h2><span class="header-section-number">4.7</span> Exercise 1</h2>
<ol style="list-style-type: decimal">
<li><p>Write a function that takes a file name as an argument and reads the worksheet containing “Table 1” from that file. Don’t forget to skip the first 6 rows.</p></li>
<li><p>Test your function by using it to read <em>one</em> of the boys names Excel files.</p></li>
<li><p>Use the <code>map</code> function to read data from all the Excel files, using the function you wrote in step 1.</p></li>
</ol>
</div>
<div id="data-cleanup" class="section level2">
<h2><span class="header-section-number">4.8</span> Data cleanup</h2>
<p>Now that we’ve read in the data we still have some cleanup to do. Specifically, we need to:</p>
<ol style="list-style-type: decimal">
<li>fix column names</li>
<li>get rid of blank row and the top and the notes at the bottom</li>
<li>get rid of extraneous “changes in rank” columns if they exist</li>
<li>transform the side-by-side tables layout to a single table.</li>
</ol>
<p>In short, we want to go from this:</p>
<div class="figure">
<img src="R/RDataWrangling/images/messy.png" alt="messy" />
<p class="caption">messy</p>
</div>
<p>to this:</p>
<div class="figure">
<img src="R/RDataWrangling/images/clean.png" alt="tidy" />
<p class="caption">tidy</p>
</div>
<p>There are many ways to do this kind of data manipulation in R. We’re going to use the <em>dplyr</em> and <em>tidyr</em> packages to make our lives easier. (Both packages were installed as dependencies of the <em>tidyverse</em> package.)</p>
<div id="selecting-columns" class="section level3">
<h3><span class="header-section-number">4.8.1</span> Selecting columns</h3>
<p>Next we want to retain just the <code>Name</code>, <code>Name__1</code> and <code>Count</code>, <code>Count__1</code> columns. We can do that using the <code>select</code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">boysNames[[<span class="dv">1</span>]]

boysNames[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="kw">select</span>(boysNames[[<span class="dv">1</span>]], Name, Name__<span class="dv">1</span>, Count, Count__<span class="dv">1</span>)
boysNames[[<span class="dv">1</span>]]</code></pre></div>
</div>
<div id="dropping-missing-values" class="section level3">
<h3><span class="header-section-number">4.8.2</span> Dropping missing values</h3>
<p>Next we want to remove blank rows and rows used for notes. An easy way to do that is to use <code>drop_na</code> to remove rows with missing values.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">boysNames[[<span class="dv">1</span>]]

boysNames[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="kw">drop_na</span>(boysNames[[<span class="dv">1</span>]])
boysNames[[<span class="dv">1</span>]]</code></pre></div>
<p>Finally, we will want to filter out missing do this for all the elements in <code>boysNames</code>, a task I leave to you.</p>
</div>
</div>
<div id="exercise-2-2" class="section level2">
<h2><span class="header-section-number">4.9</span> Exercise 2</h2>
<ol style="list-style-type: decimal">
<li><p>Write a function that takes a <code>data.frame</code> as an argument and returns a modified version including only columns named <code>Name</code>, <code>Name__1</code>, <code>Count</code>, or <code>Count__1</code>.</p></li>
<li><p>Test your function on the first <code>data.frame</code> in the list of baby names data.</p></li>
<li><p>Use the <code>map</code> function to each <code>data.frame</code> in the list of baby names data.</p></li>
</ol>
<div id="re-arranging-into-a-single-table" class="section level3">
<h3><span class="header-section-number">4.9.1</span> Re-arranging into a single table</h3>
<p>Our final task is to re-arrange to data so that it is all in a single table instead of in two side-by-side tables. For many similar tasks the <code>gather</code> function in the <em>tidyr</em> package is useful, but in this case we will be better off using a combination of <code>select</code> and <code>bind_rows</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">boysNames[[<span class="dv">1</span>]]
<span class="kw">bind_rows</span>(<span class="kw">select</span>(boysNames[[<span class="dv">1</span>]], Name, Count),
          <span class="kw">select</span>(boysNames[[<span class="dv">1</span>]], <span class="dt">Name =</span> Name__<span class="dv">1</span>, <span class="dt">Count =</span> Count__<span class="dv">1</span>))</code></pre></div>
</div>
</div>
<div id="exercise-3-2" class="section level2">
<h2><span class="header-section-number">4.10</span> Exercise 3</h2>
<p><strong>Cleanup all the data</strong></p>
<p>In the previous examples we learned how to drop empty rows with <code>filter</code>, select only relevant columns with <code>select</code>, and re-arrange our data with <code>select</code> and <code>bind_rows</code>. In each case we applied the changes only to the first element of our <code>boysNames</code> list.</p>
<p>Your task now is to use the <code>map</code> function to apply each of these transformations to all the elements in <code>boysNames</code>.</p>
</div>
<div id="data-organization-and-storage" class="section level2">
<h2><span class="header-section-number">4.11</span> Data organization and storage</h2>
<p>Now that we have the data cleaned up and augmented, we can turn our attention to organizing and storing the data.</p>
<div id="one-table-for-each-year" class="section level3">
<h3><span class="header-section-number">4.11.1</span> One table for each year</h3>
<p>Right now we have a list of tables, one for each year. This is not a bad way to go. It has the advantage of making it easy to work with individual years; it has the disadvantage of making it more difficult to examine questions that require data from multiple years. To make the arrangement of the data clearer it helps to name each element of the list with the year it corresponds too.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">glimpse</span>(<span class="kw">head</span>(boysNames))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">years &lt;-<span class="st"> </span><span class="kw">str_extract</span>(boy.file.names, <span class="st">&quot;[0-9]{4}&quot;</span>)
boysNames &lt;-<span class="st"> </span><span class="kw">setNames</span>(boysNames, years)
<span class="kw">glimpse</span>(<span class="kw">head</span>(boysNames))</code></pre></div>
</div>
<div id="one-big-table" class="section level3">
<h3><span class="header-section-number">4.11.2</span> One big table</h3>
<p>While storing the data in separate tables by year makes some sense, many operations will be easier if the data is simply stored in one big table. We’ve already seen how to turn a list of data.frames into a single data.frame using <code>bind_rows</code>, but there is a problem; The year information is stored in the names of the list elements, and so flattening the tables into one will result in losing the year information! Fortunately it is not too much trouble to add the year information to each table before flattening.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">boysNames &lt;-<span class="st"> </span><span class="kw">imap</span>(boysNames,
                  <span class="cf">function</span>(data, name) {
                      <span class="kw">mutate</span>(data, <span class="dt">Year =</span> <span class="kw">as.integer</span>(name))
                      })
boysNames &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(boysNames)

<span class="kw">glimpse</span>(boysNames)</code></pre></div>
</div>
</div>
<div id="exercise-4-1" class="section level2">
<h2><span class="header-section-number">4.12</span> Exercise 4</h2>
<p><strong>Make one big table</strong></p>
<p>Turn the list of boys names data.frames into a single table.</p>
<p>Create a directory under <code>data/all</code> and write the data to a <code>.csv</code> file.</p>
<p>Finally, repeat the previous exercise, this time working with the data in one big table.</p>
</div>
<div id="exercise-solutions-3" class="section level2">
<h2><span class="header-section-number">4.13</span> Exercise solutions</h2>
<div id="ex-0-prototype-3" class="section level3">
<h3><span class="header-section-number">4.13.1</span> Ex 0: prototype</h3>
<blockquote>
<ol style="list-style-type: decimal">
<li>Locate the file named <code>1996boys_tcm77-254026.xlsx</code> and open it in a spreadsheet. (If you don’t have a spreadsheet program installed on your computer you can downloads one from <a href="https://www.libreoffice.org/download/download/" class="uri">https://www.libreoffice.org/download/download/</a>). What issues can you identify that might make working with these data more difficult?</li>
</ol>
</blockquote>
<p>The data does not start on row one. Headers are on row 7, followed by a blank line, followed by the actual data.</p>
<p>The data is stored in an inconvenient way, with ranks 1-50 in the first set of columns and ranks 51-100 in a separate set of columns.</p>
<p>There are notes below the data.</p>
<blockquote>
<ol start="3" style="list-style-type: decimal">
<li>Locate the file named <code>2015boysnamesfinal.xlsx</code> and open it in a spreadsheet. In what ways is the format different than the format of <code>1996boys_tcm77-254026.xlsx</code>? How might these differences make it more difficult to work with these data?</li>
</ol>
</blockquote>
<p>The worksheet containing the data of interest is in different positions and has different names from one year to the next. However, it always includes “Table 1” in the worksheet name.</p>
<p>Some years include columns for “changes in rank”, others do not.</p>
<p>These differences will make it more difficult to automate re-arranging the data since we have to write code that can handle different input formats.</p>
</div>
<div id="ex-1-prototype-3" class="section level3">
<h3><span class="header-section-number">4.13.2</span> Ex 1: prototype</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  ## 1. Write a function that takes a file name as an argument and reads
  ##    the worksheet containing &quot;Table 1&quot; from that file.
  read.baby.names &lt;-<span class="st"> </span><span class="cf">function</span>(file) {
      sheet.name &lt;-<span class="st"> </span><span class="kw">str_subset</span>(<span class="kw">excel_sheets</span>(file), <span class="st">&quot;Table 1&quot;</span>)
      <span class="kw">read_excel</span>(file, <span class="dt">sheet =</span> sheet.name, <span class="dt">skip =</span> <span class="dv">6</span>)
  }
  
  ## 2. Test your function by using it to read *one* of the boys names
  ##    Excel files.
  <span class="kw">glimpse</span>(<span class="kw">read.baby.names</span>(boy.file.names[<span class="dv">1</span>]))
     
  ## 3. Use the `map` function to read data from all the Excel files,
  ##    using the function you wrote in step 1.
  boysNames &lt;-<span class="st"> </span><span class="kw">map</span>(boy.file.names, read.baby.names)</code></pre></div>
</div>
<div id="ex-2-prototype-2" class="section level3">
<h3><span class="header-section-number">4.13.3</span> Ex 2: prototype</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  ## 1. Write a function that takes a `data.frame` as an argument and
  ##    returns a modified version including only columns named `Name`,
  ##    `Name__1`, `Count`, or `Count__1`.

  namecount &lt;-<span class="st"> </span><span class="cf">function</span>(data) {
      <span class="kw">select</span>(data, Name, Name__<span class="dv">1</span>, Count, Count__<span class="dv">1</span>)
  }
     
  ## 2. Test your function on the first `data.frame` in the list of baby
  ##    names data.

  <span class="kw">namecount</span>(boysNames[[<span class="dv">1</span>]])
  
  ## 3. Use the `map` function to each `data.frame` in the list of baby
  ##    names data.

  babyNames &lt;-<span class="st"> </span><span class="kw">map</span>(boysNames, namecount)</code></pre></div>
</div>
<div id="ex-3-prototype-2" class="section level3">
<h3><span class="header-section-number">4.13.4</span> Ex 3: prototype</h3>
<p>There are different ways you can go about it. Here is one:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## write a function that does all the cleanup
cleanupNamesData &lt;-<span class="st"> </span><span class="cf">function</span>(x) {
    filtered &lt;-<span class="st"> </span><span class="kw">filter</span>(x, <span class="op">!</span><span class="kw">is.na</span>(Name)) <span class="co"># drop rows with no Name value</span>
    selected &lt;-<span class="st"> </span><span class="kw">select</span>(filtered, Name, Count, Name__<span class="dv">1</span>, Count__<span class="dv">1</span>) <span class="co"># select just Name and Count columns</span>
    <span class="kw">bind_rows</span>(<span class="kw">select</span>(selected, Name,  Count), <span class="co"># re-arrange into two columns</span>
              <span class="kw">select</span>(selected, <span class="dt">Name =</span> Name__<span class="dv">1</span>, <span class="dt">Count =</span> Count__<span class="dv">1</span>))
}

## test it out on the second data.frame in the list
<span class="kw">glimpse</span>(boysNames[[<span class="dv">2</span>]]) <span class="co"># before cleanup</span>
<span class="kw">glimpse</span>(<span class="kw">cleanupNamesData</span>(boysNames[[<span class="dv">2</span>]])) <span class="co"># after cleanup</span>

## apply the cleanup function to all the data.frames in the list
boysNames &lt;-<span class="st"> </span><span class="kw">map</span>(boysNames, cleanupNamesData)</code></pre></div>
</div>
<div id="ex-4-prototype-1" class="section level3">
<h3><span class="header-section-number">4.13.5</span> Ex 4: prototype</h3>
<p>Working with the data in one big table is often easier.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">boysNames &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(boysNames)

<span class="kw">dir.create</span>(<span class="st">&quot;data/all&quot;</span>)

<span class="kw">write_csv</span>(boysNames, <span class="st">&quot;data/all/boys_names.csv&quot;</span>)

## What where the five most popular names in 2013?
<span class="kw">slice</span>(<span class="kw">arrange</span>(<span class="kw">filter</span>(boysNames, Year <span class="op">==</span><span class="st"> </span><span class="dv">2013</span>),
              <span class="kw">desc</span>(Count)),
      <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)

## How has the popularity of the name &quot;ANDREW&quot; changed over time?
andrew &lt;-<span class="st"> </span><span class="kw">filter</span>(boysNames, Name <span class="op">==</span><span class="st"> &quot;ANDREW&quot;</span>)

<span class="kw">ggplot</span>(andrew, <span class="kw">aes</span>(<span class="dt">x =</span> Year, <span class="dt">y =</span> Count)) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_line</span>() <span class="op">+</span>
<span class="st">    </span><span class="kw">ggtitle</span>(<span class="st">&quot;Popularity of </span><span class="ch">\&quot;</span><span class="st">Andrew</span><span class="ch">\&quot;</span><span class="st">, over time&quot;</span>)</code></pre></div>
</div>
</div>
<div id="wrap-up-3" class="section level2">
<h2><span class="header-section-number">4.14</span> Wrap-up</h2>
<div id="feedback-3" class="section level3">
<h3><span class="header-section-number">4.14.1</span> Feedback</h3>
<p>These workshops are a work in progress, please provide any feedback to: <a href="mailto:help@iq.harvard.edu">help@iq.harvard.edu</a></p>
</div>
<div id="resources-3" class="section level3">
<h3><span class="header-section-number">4.14.2</span> Resources</h3>
<ul>
<li>IQSS
<ul>
<li>Workshops: <a href="https://dss.iq.harvard.edu/workshop-materials" class="uri">https://dss.iq.harvard.edu/workshop-materials</a></li>
<li>Data Science Services: <a href="https://dss.iq.harvard.edu/" class="uri">https://dss.iq.harvard.edu/</a></li>
<li>Research Computing Environment: <a href="https://iqss.github.io/dss-rce/" class="uri">https://iqss.github.io/dss-rce/</a></li>
</ul></li>
<li>HBS
<ul>
<li>Research Computing Services workshops: <a href="https://training.rcs.hbs.org/workshops" class="uri">https://training.rcs.hbs.org/workshops</a></li>
<li>Other HBS RCS resources: <a href="https://training.rcs.hbs.org/workshop-materials" class="uri">https://training.rcs.hbs.org/workshop-materials</a></li>
<li>RCS consulting email: <a href="mailto:research@hbs.edu">mailto:research@hbs.edu</a></li>
</ul></li>
<li>R
<ul>
<li>Learn from the best: <a href="http://adv-r.had.co.nz/" class="uri">http://adv-r.had.co.nz/</a>; <a href="http://r4ds.had.co.nz/" class="uri">http://r4ds.had.co.nz/</a></li>
<li>R documentation: <a href="http://cran.r-project.org/manuals.html" class="uri">http://cran.r-project.org/manuals.html</a></li>
<li>Collection of R tutorials: <a href="http://cran.r-project.org/other-docs.html" class="uri">http://cran.r-project.org/other-docs.html</a></li>
<li>R for Programmers (by Norman Matloff, UC–Davis) <a href="http://heather.cs.ucdavis.edu/~matloff/R/RProg.pdf" class="uri">http://heather.cs.ucdavis.edu/~matloff/R/RProg.pdf</a></li>
<li>Calling C and Fortran from R (by Charles Geyer, UMinn) <a href="http://www.stat.umn.edu/~charlie/rc/" class="uri">http://www.stat.umn.edu/~charlie/rc/</a></li>
<li>State of the Art in Parallel Computing with R (Schmidberger et al.) <a href="http://www.jstatso" class="uri">http://www.jstatso</a>|.org/v31/i01/paper</li>
</ul></li>
</ul>

</div>
</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="Rgraphics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="PythonIntro.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/IQSS/dss-workshops-redux/edit/master/R/RDataWrangling/RDataWrangling.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["IQSS_Workshops.pdf", "IQSS_Workshops.epub"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
