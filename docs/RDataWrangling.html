<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>R Data Wrangling | Data Science Workshops</title>
  <meta name="description" content="R Data Wrangling | Data Science Workshops" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="R Data Wrangling | Data Science Workshops" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="R Data Wrangling | Data Science Workshops" />
  <meta name="github-repo" content="IQSS/dss-workshops" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R Data Wrangling | Data Science Workshops" />
  
  <meta name="twitter:description" content="R Data Wrangling | Data Science Workshops" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="Rgraphics.html"/>
<link rel="next" href="PythonInstall.html"/>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Science Workshop Materials</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Table of Contents</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contributors"><i class="fa fa-check"></i>Contributors</a></li>
</ul></li>
<li class="part"><span><b>I General</b></span></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html"><i class="fa fa-check"></i>Data Science Tools</a>
<ul>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#tools-for-working-with-data"><i class="fa fa-check"></i>Tools for working with data</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#the-puzzle-pieces"><i class="fa fa-check"></i>The puzzle pieces</a>
<ul>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#data-analysis-building-blocks"><i class="fa fa-check"></i>Data analysis building blocks</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#examples"><i class="fa fa-check"></i>Examples</a>
<ul>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#old-school-example"><i class="fa fa-check"></i>Old-school example</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#something-old-something-new"><i class="fa fa-check"></i>Something old &amp; something new</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#a-modern-version"><i class="fa fa-check"></i>A modern version</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#data-storage-retrieval"><i class="fa fa-check"></i>Data storage &amp; retrieval</a>
<ul>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#text-files"><i class="fa fa-check"></i>Text files</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#binary-files"><i class="fa fa-check"></i>Binary files</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#databases"><i class="fa fa-check"></i>Databases</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#distributed-file-storage"><i class="fa fa-check"></i>Distributed file storage</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#programming-languages-statistics-packages"><i class="fa fa-check"></i>Programming languages &amp; statistics packages</a>
<ul>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#programming-language-features"><i class="fa fa-check"></i>Programming language features</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#program-comparison"><i class="fa fa-check"></i>Program comparison</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#examples-read-data-from-a-file-summarize"><i class="fa fa-check"></i>Examples: Read data from a file &amp; summarize</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#examples-fit-a-linear-regression"><i class="fa fa-check"></i>Examples: Fit a linear regression</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#examples-extract-links-for-.html-file"><i class="fa fa-check"></i>Examples: Extract links for .html file</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#creating-reports"><i class="fa fa-check"></i>Creating reports</a>
<ul>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#markup-languages"><i class="fa fa-check"></i>Markup languages</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#word-processors"><i class="fa fa-check"></i>Word processors</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#text-editors-integrated-development-environments"><i class="fa fa-check"></i>Text editors &amp; Integrated Development Environments</a>
<ul>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#language-specific-editors-ides"><i class="fa fa-check"></i>Language specific editors &amp; IDEs</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#general-purpose-editors-ides"><i class="fa fa-check"></i>General purpose editors &amp; IDEs</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#literate-programming-notebooks"><i class="fa fa-check"></i>Literate programming &amp; notebooks</a>
<ul>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#literate-programming"><i class="fa fa-check"></i>Literate programming</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#notebooks"><i class="fa fa-check"></i>Notebooks</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#big-data-annoying-data-computationally-intensive-methods"><i class="fa fa-check"></i>Big data, annoying data, &amp; computationally intensive methods</a>
<ul>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#computing-clusters-at-harvard"><i class="fa fa-check"></i>Computing clusters at Harvard</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#wrap-up"><i class="fa fa-check"></i>Wrap up</a>
<ul>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#feedback"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="DataScienceTools.html"><a href="DataScienceTools.html#resources"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II R</b></span></li>
<li class="chapter" data-level="" data-path="Rinstall.html"><a href="Rinstall.html"><i class="fa fa-check"></i>R Installation</a>
<ul>
<li class="chapter" data-level="" data-path="Rinstall.html"><a href="Rinstall.html#troubleshooting-session"><i class="fa fa-check"></i>Troubleshooting session</a></li>
<li class="chapter" data-level="" data-path="Rinstall.html"><a href="Rinstall.html#materials"><i class="fa fa-check"></i>Materials</a></li>
<li class="chapter" data-level="" data-path="Rinstall.html"><a href="Rinstall.html#software"><i class="fa fa-check"></i>Software</a></li>
<li><a href="Rinstall.html#installing-the-tidyverse">Installing the <code>tidyverse</code></a>
<ul>
<li><a href="Rinstall.html#troubleshooting-tidyverse-installation">Troubleshooting <code>tidyverse</code> installation</a></li>
</ul></li>
<li><a href="Rinstall.html#installing-rmarkdown-optional">Installing <code>rmarkdown</code> (optional)</a></li>
<li class="chapter" data-level="" data-path="Rinstall.html"><a href="Rinstall.html#resources-1"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html"><i class="fa fa-check"></i>R Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#setup"><i class="fa fa-check"></i>Setup</a>
<ul>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#software-and-materials"><i class="fa fa-check"></i>Software and Materials</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#class-structure"><i class="fa fa-check"></i>Class Structure</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#goals"><i class="fa fa-check"></i>Goals</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#r-basics"><i class="fa fa-check"></i>R basics</a>
<ul>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#what-is-r"><i class="fa fa-check"></i>What is R?</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#why-use-r"><i class="fa fa-check"></i>Why use R?</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#how-does-r-work"><i class="fa fa-check"></i>How does R work?</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#interfaces"><i class="fa fa-check"></i>Interfaces</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#launch-a-session"><i class="fa fa-check"></i>Launch a session</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#exercise-0"><i class="fa fa-check"></i>Exercise 0</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#syntax-rules"><i class="fa fa-check"></i>Syntax rules</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#function-calls"><i class="fa fa-check"></i>Function calls</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#assignment"><i class="fa fa-check"></i>Assignment</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#asking-for-help"><i class="fa fa-check"></i>Asking for help</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#reading-data"><i class="fa fa-check"></i>Reading data</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#installing-using-packages"><i class="fa fa-check"></i>Installing &amp; using packages</a></li>
<li><a href="Rintro.html#the-tidyverse">The <code>tidyverse</code></a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#readers-for-common-file-types"><i class="fa fa-check"></i>Readers for common file types</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#baby-names-data"><i class="fa fa-check"></i>Baby names data</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#exercise-1"><i class="fa fa-check"></i>Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#manipulating-data"><i class="fa fa-check"></i>Manipulating data</a>
<ul>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#filter-select-arrange"><i class="fa fa-check"></i>Filter, select, &amp; arrange</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#logical-relational-operators"><i class="fa fa-check"></i>Logical &amp; relational operators</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#exercise-2.1"><i class="fa fa-check"></i>Exercise 2.1</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#pipe-operator"><i class="fa fa-check"></i>Pipe operator</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#exercise-2.2"><i class="fa fa-check"></i>Exercise 2.2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#plotting-data"><i class="fa fa-check"></i>Plotting data</a>
<ul>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#exercise-3"><i class="fa fa-check"></i>Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#creating-variables"><i class="fa fa-check"></i>Creating variables</a>
<ul>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#create-or-modify-columns"><i class="fa fa-check"></i>Create or modify columns</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#operating-by-group"><i class="fa fa-check"></i>Operating by group</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#recoding-variables"><i class="fa fa-check"></i>Recoding variables</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#exercise-4"><i class="fa fa-check"></i>Exercise 4</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#aggregating-variables"><i class="fa fa-check"></i>Aggregating variables</a>
<ul>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#exercise-5"><i class="fa fa-check"></i>Exercise 5</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#saving-work"><i class="fa fa-check"></i>Saving work</a>
<ul>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#saving-individual-datasets"><i class="fa fa-check"></i>Saving individual datasets</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#saving-multiple-datasets"><i class="fa fa-check"></i>Saving multiple datasets</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#wrap-up-1"><i class="fa fa-check"></i>Wrap-up</a>
<ul>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#feedback-1"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="Rintro.html"><a href="Rintro.html#resources-2"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html"><i class="fa fa-check"></i>R Regression Models</a>
<ul>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#setup-1"><i class="fa fa-check"></i>Setup</a>
<ul>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#software-and-materials-1"><i class="fa fa-check"></i>Software and Materials</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#class-structure-1"><i class="fa fa-check"></i>Class Structure</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#prerequisites-1"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#goals-1"><i class="fa fa-check"></i>Goals</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#launch-an-r-session"><i class="fa fa-check"></i>Launch an R session</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#packages"><i class="fa fa-check"></i>Packages</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#modeling-workflow"><i class="fa fa-check"></i>Modeling workflow</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#r-modeling-ecosystem"><i class="fa fa-check"></i>R modeling ecosystem</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#before-fitting-a-model"><i class="fa fa-check"></i>Before fitting a model</a>
<ul>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#load-the-data"><i class="fa fa-check"></i>Load the data</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#examine-the-data"><i class="fa fa-check"></i>Examine the data</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#plot-the-data"><i class="fa fa-check"></i>Plot the data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#models-with-continuous-outcomes"><i class="fa fa-check"></i>Models with continuous outcomes</a>
<ul>
<li><a href="Rmodels.html#why-is-the-association-between-expense-sat-scores-negative">Why is the association between expense &amp; SAT scores <em>negative</em>?</a></li>
<li><a href="Rmodels.html#the-lm-class-methods">The <code>lm</code> class &amp; methods</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#ols-regression-assumptions"><i class="fa fa-check"></i>OLS regression assumptions</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#comparing-models"><i class="fa fa-check"></i>Comparing models</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#exercise-0-1"><i class="fa fa-check"></i>Exercise 0</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#interactions-factors"><i class="fa fa-check"></i>Interactions &amp; factors</a>
<ul>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#modeling-interactions"><i class="fa fa-check"></i>Modeling interactions</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#regression-with-categorical-predictors"><i class="fa fa-check"></i>Regression with categorical predictors</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#setting-factor-reference-groups-contrasts"><i class="fa fa-check"></i>Setting factor reference groups &amp; contrasts</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#exercise-1-1"><i class="fa fa-check"></i>Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#models-with-binary-outcomes"><i class="fa fa-check"></i>Models with binary outcomes</a>
<ul>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#logistic-regression"><i class="fa fa-check"></i>Logistic regression</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#logistic-regression-example"><i class="fa fa-check"></i>Logistic regression example</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#odds-ratios"><i class="fa fa-check"></i>Odds ratios</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#predicted-marginal-means"><i class="fa fa-check"></i>Predicted marginal means</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#exercise-2"><i class="fa fa-check"></i>Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#multilevel-modeling"><i class="fa fa-check"></i>Multilevel modeling</a>
<ul>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#multilevel-modeling-overview"><i class="fa fa-check"></i>Multilevel modeling overview</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#the-exam-data"><i class="fa fa-check"></i>The Exam data</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#the-null-model-icc"><i class="fa fa-check"></i>The null model &amp; ICC</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#adding-fixed-effects-predictors"><i class="fa fa-check"></i>Adding fixed-effects predictors</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#multiple-degree-of-freedom-comparisons"><i class="fa fa-check"></i>Multiple degree of freedom comparisons</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#random-slopes"><i class="fa fa-check"></i>Random slopes</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#test-the-significance-of-the-random-slope"><i class="fa fa-check"></i>Test the significance of the random slope</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#exercise-3-1"><i class="fa fa-check"></i>Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#wrap-up-2"><i class="fa fa-check"></i>Wrap-up</a>
<ul>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#feedback-2"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="Rmodels.html"><a href="Rmodels.html#resources-3"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html"><i class="fa fa-check"></i>R Graphics</a>
<ul>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#setup-2"><i class="fa fa-check"></i>Setup</a>
<ul>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#software-and-materials-2"><i class="fa fa-check"></i>Software and Materials</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#class-structure-2"><i class="fa fa-check"></i>Class Structure</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#prerequisites-2"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#launch-an-r-session-1"><i class="fa fa-check"></i>Launch an R session</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#packages-1"><i class="fa fa-check"></i>Packages</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#goals-2"><i class="fa fa-check"></i>Goals</a></li>
</ul></li>
<li><a href="Rgraphics.html#why-ggplot2">Why <code>ggplot2</code>?</a>
<ul>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#what-is-the-grammar-of-graphics"><i class="fa fa-check"></i>What is the Grammar Of Graphics?</a></li>
<li><a href="Rgraphics.html#ggplot2-vs-base-graphics"><code>ggplot2</code> VS base graphics</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#geometric-objects-aesthetics"><i class="fa fa-check"></i>Geometric objects &amp; aesthetics</a>
<ul>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#aesthetic-mapping"><i class="fa fa-check"></i>Aesthetic mapping</a></li>
<li><a href="Rgraphics.html#geometric-objects-geom">Geometric objects (<code>geom</code>)</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#aesthetic-mapping-vs-assignment"><i class="fa fa-check"></i>Aesthetic mapping VS assignment</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#mapping-variables-to-other-aesthetics"><i class="fa fa-check"></i>Mapping variables to other aesthetics</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-0-2"><i class="fa fa-check"></i>Exercise 0</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#statistical-transformations"><i class="fa fa-check"></i>Statistical transformations</a>
<ul>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#why-transform-data"><i class="fa fa-check"></i>Why transform data?</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#setting-arguments"><i class="fa fa-check"></i>Setting arguments</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#changing-the-transformation"><i class="fa fa-check"></i>Changing the transformation</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-1-2"><i class="fa fa-check"></i>Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#scales"><i class="fa fa-check"></i>Scales</a>
<ul>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#controlling-aesthetic-mapping"><i class="fa fa-check"></i>Controlling aesthetic mapping</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#common-scale-arguments"><i class="fa fa-check"></i>Common scale arguments</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#scale-modification-examples"><i class="fa fa-check"></i>Scale modification examples</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#using-different-color-scales"><i class="fa fa-check"></i>Using different color scales</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#available-scales"><i class="fa fa-check"></i>Available scales</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-2-1"><i class="fa fa-check"></i>Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#faceting"><i class="fa fa-check"></i>Faceting</a>
<ul>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#what-is-faceting"><i class="fa fa-check"></i>What is faceting?</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#what-is-the-trend-in-housing-prices-in-each-state"><i class="fa fa-check"></i>What is the trend in housing prices in each state?</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#faceting-to-the-rescue"><i class="fa fa-check"></i>Faceting to the rescue</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#themes"><i class="fa fa-check"></i>Themes</a>
<ul>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#what-are-themes"><i class="fa fa-check"></i>What are themes?</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#overriding-theme-defaults"><i class="fa fa-check"></i>Overriding theme defaults</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#creating-saving-new-themes"><i class="fa fa-check"></i>Creating &amp; saving new themes</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#saving-plots"><i class="fa fa-check"></i>Saving plots</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#the-1-faq"><i class="fa fa-check"></i>The #1 FAQ</a>
<ul>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#map-aesthetic-to-different-columns"><i class="fa fa-check"></i>Map aesthetic to different columns</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-3-2"><i class="fa fa-check"></i>Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#wrap-up-3"><i class="fa fa-check"></i>Wrap-up</a>
<ul>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#feedback-3"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="Rgraphics.html"><a href="Rgraphics.html#resources-4"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html"><i class="fa fa-check"></i>R Data Wrangling</a>
<ul>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#setup-3"><i class="fa fa-check"></i>Setup</a>
<ul>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#software-and-materials-3"><i class="fa fa-check"></i>Software and Materials</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#class-structure-3"><i class="fa fa-check"></i>Class Structure</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#prerequisites-3"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#launch-an-r-session-2"><i class="fa fa-check"></i>Launch an R session</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#packages-2"><i class="fa fa-check"></i>Packages</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#workshop-outline"><i class="fa fa-check"></i>Workshop Outline</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#working-with-excel-worksheets"><i class="fa fa-check"></i>Working with Excel worksheets</a>
<ul>
<li><a href="RDataWrangling.html#iterating-with-map">Iterating with <code>map()</code></a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#filtering-strings-using-regex"><i class="fa fa-check"></i>Filtering strings using regex</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#writing-your-own-functions"><i class="fa fa-check"></i>Writing your own functions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#reading-excel-data-files"><i class="fa fa-check"></i>Reading Excel data files</a>
<ul>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-1-3"><i class="fa fa-check"></i>Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#data-cleanup"><i class="fa fa-check"></i>Data cleanup</a>
<ul>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#selecting-columns"><i class="fa fa-check"></i>Selecting columns</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#data-types-and-structures"><i class="fa fa-check"></i>Data types and structures</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#list-indexing"><i class="fa fa-check"></i>List indexing</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#dropping-missing-values"><i class="fa fa-check"></i>Dropping missing values</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-2-2"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#reshaping-from-wide-to-long"><i class="fa fa-check"></i>Reshaping from wide to long</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-3-3"><i class="fa fa-check"></i>Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#data-organization-storage"><i class="fa fa-check"></i>Data organization &amp; storage</a>
<ul>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#a-list-of-data-frames"><i class="fa fa-check"></i>A list of data frames</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#one-big-data-frame"><i class="fa fa-check"></i>One big data frame</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-4-1"><i class="fa fa-check"></i>Exercise 4</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#complete-code"><i class="fa fa-check"></i>Complete code</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#wrap-up-4"><i class="fa fa-check"></i>Wrap-up</a>
<ul>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#feedback-4"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="RDataWrangling.html"><a href="RDataWrangling.html#resources-5"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Python</b></span></li>
<li class="chapter" data-level="" data-path="PythonInstall.html"><a href="PythonInstall.html"><i class="fa fa-check"></i>Python Installation</a>
<ul>
<li class="chapter" data-level="" data-path="PythonInstall.html"><a href="PythonInstall.html#troubleshooting-session-1"><i class="fa fa-check"></i>Troubleshooting session</a></li>
<li class="chapter" data-level="" data-path="PythonInstall.html"><a href="PythonInstall.html#materials-1"><i class="fa fa-check"></i>Materials</a></li>
<li class="chapter" data-level="" data-path="PythonInstall.html"><a href="PythonInstall.html#software-1"><i class="fa fa-check"></i>Software</a></li>
<li class="chapter" data-level="" data-path="PythonInstall.html"><a href="PythonInstall.html#jupyter-notebook-interfaces"><i class="fa fa-check"></i>Jupyter notebook interfaces</a>
<ul>
<li class="chapter" data-level="" data-path="PythonInstall.html"><a href="PythonInstall.html#launch-jupyterlab"><i class="fa fa-check"></i>Launch JupyterLab</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="PythonInstall.html"><a href="PythonInstall.html#resources-6"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html"><i class="fa fa-check"></i>Python Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#setup-4"><i class="fa fa-check"></i>Setup</a>
<ul>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#software-and-materials-4"><i class="fa fa-check"></i>Software and Materials</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#class-structure-4"><i class="fa fa-check"></i>Class Structure</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#prerequisites-4"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#goals-3"><i class="fa fa-check"></i>Goals</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#python-basics"><i class="fa fa-check"></i>Python basics</a>
<ul>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#what-is-python"><i class="fa fa-check"></i>What is Python?</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#why-use-python"><i class="fa fa-check"></i>Why use Python?</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#how-does-python-work"><i class="fa fa-check"></i>How does Python work?</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#interfaces-1"><i class="fa fa-check"></i>Interfaces</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#launch-jupyterlab-1"><i class="fa fa-check"></i>Launch JupyterLab</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#syntax-rules-1"><i class="fa fa-check"></i>Syntax rules</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#function-calls-1"><i class="fa fa-check"></i>Function calls</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#assignment-1"><i class="fa fa-check"></i>Assignment</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#reading-data-1"><i class="fa fa-check"></i>Reading data</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#object-methods"><i class="fa fa-check"></i>Object methods</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#using-object-methods-lists"><i class="fa fa-check"></i>Using object methods &amp; lists</a>
<ul>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#splitting-a-string-into-a-list-of-words"><i class="fa fa-check"></i>Splitting a string into a list of words</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#working-with-lists"><i class="fa fa-check"></i>Working with lists</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#extracting-subsets-from-lists"><i class="fa fa-check"></i>Extracting subsets from lists</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#using-sets-to-count-unique-items"><i class="fa fa-check"></i>Using sets to count unique items</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#exercise-0-3"><i class="fa fa-check"></i>Exercise 0</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#control-flow"><i class="fa fa-check"></i>Control flow</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#logical-relational-operators-1"><i class="fa fa-check"></i>Logical &amp; relational operators</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#counting-list-elements"><i class="fa fa-check"></i>Counting list elements</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#exercise-1-4"><i class="fa fa-check"></i>Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#iterating-over-collections-of-data"><i class="fa fa-check"></i>Iterating over collections of data</a>
<ul>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#iterating-over-lists-using-for-loops"><i class="fa fa-check"></i>Iterating over lists using for-loops</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#organizing-results-in-dictionaries"><i class="fa fa-check"></i>Organizing results in dictionaries</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#exercise-2-3"><i class="fa fa-check"></i>Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#importing-packages"><i class="fa fa-check"></i>Importing packages</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#wrap-up-5"><i class="fa fa-check"></i>Wrap-up</a>
<ul>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#feedback-5"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="PythonIntro.html"><a href="PythonIntro.html#resources-7"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html"><i class="fa fa-check"></i>Python Web-Scraping</a>
<ul>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#setup-5"><i class="fa fa-check"></i>Setup</a>
<ul>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#software-and-materials-5"><i class="fa fa-check"></i>Software and Materials</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#class-structure-5"><i class="fa fa-check"></i>Class Structure</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#prerequisites-5"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#goals-4"><i class="fa fa-check"></i>Goals</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#web-scraping-background"><i class="fa fa-check"></i>Web scraping background</a>
<ul>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#what-is-web-scraping"><i class="fa fa-check"></i>What is web scraping?</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#is-web-scraping-legal-is-it-ethical"><i class="fa fa-check"></i>Is web scraping legal? Is it ethical?</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#web-scraping-approaches"><i class="fa fa-check"></i>Web scraping approaches</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#how-does-the-web-work"><i class="fa fa-check"></i>How does the web work?</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#retrieve-data-in-json-format-if-you-can"><i class="fa fa-check"></i>Retrieve data in JSON format if you can</a>
<ul>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#examine-the-websites-structure"><i class="fa fa-check"></i>Examine the website’s structure</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#launch-jupyterlab-2"><i class="fa fa-check"></i>Launch JupyterLab</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#making-requests"><i class="fa fa-check"></i>Making requests</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#parsing-json-data"><i class="fa fa-check"></i>Parsing JSON data</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#organizing-saving-the-data"><i class="fa fa-check"></i>Organizing &amp; saving the data</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#iterating-to-retrieve-all-the-data"><i class="fa fa-check"></i>Iterating to retrieve all the data</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#exercise-0-4"><i class="fa fa-check"></i>Exercise 0</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#parsing-html-if-you-have-to"><i class="fa fa-check"></i>Parsing HTML if you have to</a>
<ul>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#document-object-model-dom"><i class="fa fa-check"></i>Document Object Model (DOM)</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#retrieving-html"><i class="fa fa-check"></i>Retrieving HTML</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#parsing-html-using-the-lxml-library"><i class="fa fa-check"></i>Parsing HTML using the lxml library</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#using-xpath-to-extract-content-from-html"><i class="fa fa-check"></i>Using XPath to extract content from HTML</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#iterating-to-retrieve-content-from-a-list-of-html-elements"><i class="fa fa-check"></i>Iterating to retrieve content from a list of HTML elements</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#exercise-1-5"><i class="fa fa-check"></i>Exercise 1</a></li>
</ul></li>
<li><a href="PythonWebScrape.html#scrapy-for-large-complex-projects"><code>Scrapy</code>: for large / complex projects</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#browser-drivers-a-last-resort"><i class="fa fa-check"></i>Browser drivers: a last resort</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#wrap-up-6"><i class="fa fa-check"></i>Wrap-up</a>
<ul>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#feedback-6"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#resources-8"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Stata</b></span></li>
<li class="chapter" data-level="" data-path="StataInstall.html"><a href="StataInstall.html"><i class="fa fa-check"></i>Stata Installation</a>
<ul>
<li class="chapter" data-level="" data-path="StataInstall.html"><a href="StataInstall.html#troubleshooting"><i class="fa fa-check"></i>Troubleshooting</a></li>
<li class="chapter" data-level="" data-path="StataInstall.html"><a href="StataInstall.html#materials-2"><i class="fa fa-check"></i>Materials</a></li>
<li class="chapter" data-level="" data-path="StataInstall.html"><a href="StataInstall.html#software-2"><i class="fa fa-check"></i>Software</a></li>
<li class="chapter" data-level="" data-path="StataInstall.html"><a href="StataInstall.html#resources-9"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html"><i class="fa fa-check"></i>Stata Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#setup-6"><i class="fa fa-check"></i>Setup</a>
<ul>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#class-structure-and-organization"><i class="fa fa-check"></i>Class Structure and organization</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#prerequisites-6"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#goals-5"><i class="fa fa-check"></i>Goals</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#stata-basics"><i class="fa fa-check"></i>Stata basics</a>
<ul>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#what-is-stata"><i class="fa fa-check"></i>What is Stata?</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#why-use-stata"><i class="fa fa-check"></i>Why use Stata?</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#how-does-stata-work"><i class="fa fa-check"></i>How does Stata work?</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#interfaces-2"><i class="fa fa-check"></i>Interfaces</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#stata-help"><i class="fa fa-check"></i>Stata help</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#syntax-rules-2"><i class="fa fa-check"></i>Syntax rules</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#exercise-0-5"><i class="fa fa-check"></i>Exercise 0</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#working-directory"><i class="fa fa-check"></i>Working directory</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#reading-data-2"><i class="fa fa-check"></i>Reading data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#statistics-graphs"><i class="fa fa-check"></i>Statistics &amp; graphs</a>
<ul>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#basic-graphing-commands"><i class="fa fa-check"></i>Basic graphing commands</a></li>
<li><a href="StataIntro.html#the-by-command">The <code>by</code> command</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#exercise-1-6"><i class="fa fa-check"></i>Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#basic-data-management"><i class="fa fa-check"></i>Basic data management</a>
<ul>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#variable-value-labels"><i class="fa fa-check"></i>Variable &amp; value labels</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#working-on-subsets"><i class="fa fa-check"></i>Working on subsets</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#generating-replacing-variables"><i class="fa fa-check"></i>Generating &amp; replacing variables</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#exercise-2-4"><i class="fa fa-check"></i>Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#bivariate-analyses"><i class="fa fa-check"></i>Bivariate analyses</a>
<ul>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#chi-squared-test"><i class="fa fa-check"></i>Chi-squared test</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#t-test"><i class="fa fa-check"></i>t-test</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#one-way-anova"><i class="fa fa-check"></i>One-way ANOVA</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#exercise-3-4"><i class="fa fa-check"></i>Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#wrap-up-7"><i class="fa fa-check"></i>Wrap-up</a>
<ul>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#feedback-7"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="StataIntro.html"><a href="StataIntro.html#resources-10"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html"><i class="fa fa-check"></i>Stata Data Management</a>
<ul>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#setup-7"><i class="fa fa-check"></i>Setup</a>
<ul>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#class-structure-and-organization-1"><i class="fa fa-check"></i>Class structure and organization</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#prerequisites-7"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#goals-6"><i class="fa fa-check"></i>Goals</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#opening-files"><i class="fa fa-check"></i>Opening Files</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#generating-replacing-variables-1"><i class="fa fa-check"></i>Generating &amp; replacing variables</a>
<ul>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#generate-replace"><i class="fa fa-check"></i>Generate &amp; Replace</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#recode"><i class="fa fa-check"></i>Recode</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#egen"><i class="fa fa-check"></i>egen</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#exercise-0-6"><i class="fa fa-check"></i>Exercise 0</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#missing-values"><i class="fa fa-check"></i>Missing values</a>
<ul>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#making-sure-missingness-is-preserved"><i class="fa fa-check"></i>Making sure missingness is preserved</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#bulk-conversion-to-missing-values"><i class="fa fa-check"></i>Bulk Conversion to missing values</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#variable-types"><i class="fa fa-check"></i>Variable types</a>
<ul>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#converting-to-from-strings"><i class="fa fa-check"></i>Converting to &amp; from Strings</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#converting-strings-to-date-time"><i class="fa fa-check"></i>Converting strings to date / time</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#formatting-numbers-as-dates"><i class="fa fa-check"></i>Formatting numbers as dates</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#exercise-1-7"><i class="fa fa-check"></i>Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#merging-appending-collapsing"><i class="fa fa-check"></i>Merging, appending, &amp; collapsing</a>
<ul>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#appending-datasets"><i class="fa fa-check"></i>Appending datasets</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#merging-datasets"><i class="fa fa-check"></i>Merging datasets</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#merge-options"><i class="fa fa-check"></i>Merge Options</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#many-to-many-merges---joinby-command"><i class="fa fa-check"></i>Many-to-many merges - joinby command</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#collapse"><i class="fa fa-check"></i>Collapse</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#exercise-2-5"><i class="fa fa-check"></i>Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#wrap-up-8"><i class="fa fa-check"></i>Wrap-up</a>
<ul>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#feedback-8"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="StataDatMan.html"><a href="StataDatMan.html#resources-11"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html"><i class="fa fa-check"></i>Stata Regression Models</a>
<ul>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#setup-8"><i class="fa fa-check"></i>Setup</a>
<ul>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#class-structure-and-organization-2"><i class="fa fa-check"></i>Class structure and organization</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#prerequisites-8"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#goals-7"><i class="fa fa-check"></i>Goals</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#modeling-workflow-1"><i class="fa fa-check"></i>Modeling workflow</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#before-fitting-a-model-1"><i class="fa fa-check"></i>Before fitting a model</a>
<ul>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#the-dataset"><i class="fa fa-check"></i>The dataset</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#set-working-directory"><i class="fa fa-check"></i>Set working directory</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#load-the-data-1"><i class="fa fa-check"></i>Load the data</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#examine-descriptive-statistics"><i class="fa fa-check"></i>Examine descriptive statistics</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#visualize-the-data"><i class="fa fa-check"></i>Visualize the data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#models-with-continuous-outcomes-1"><i class="fa fa-check"></i>Models with continuous outcomes</a>
<ul>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#fit-the-model"><i class="fa fa-check"></i>Fit the model</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#ols-assumptions"><i class="fa fa-check"></i>OLS assumptions</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#interactions"><i class="fa fa-check"></i>Interactions</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#categorical-predictors"><i class="fa fa-check"></i>Categorical predictors</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#exercise-0-7"><i class="fa fa-check"></i>Exercise 0</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#models-with-binary-outcomes-1"><i class="fa fa-check"></i>Models with binary outcomes</a>
<ul>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#the-dataset-1"><i class="fa fa-check"></i>The Dataset</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#load-the-dataset"><i class="fa fa-check"></i>Load the dataset</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#recode-the-outcome-variable"><i class="fa fa-check"></i>Recode the outcome variable</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#run-summary-statistics"><i class="fa fa-check"></i>Run summary statistics</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#run-the-logistic-model"><i class="fa fa-check"></i>Run the logistic model</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#exercise-1-8"><i class="fa fa-check"></i>Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#exporting-saving-results"><i class="fa fa-check"></i>Exporting &amp; saving results</a>
<ul>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#storing-results"><i class="fa fa-check"></i>Storing results</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#comparing-models-1"><i class="fa fa-check"></i>Comparing models</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#exporting-to-excel"><i class="fa fa-check"></i>Exporting to Excel</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#exercise-2-6"><i class="fa fa-check"></i>Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#obtaining-quantities-of-interest"><i class="fa fa-check"></i>Obtaining quantities of interest</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#margins-of-responses"><i class="fa fa-check"></i>Margins of responses</a>
<ul>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#the-dataset-2"><i class="fa fa-check"></i>The dataset</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#fit-a-model"><i class="fa fa-check"></i>Fit a model</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#apm-average-predictive-margins"><i class="fa fa-check"></i>APM: Average Predictive Margins</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#pmm-predictive-margins-at-the-means"><i class="fa fa-check"></i>PMM: Predictive Margins at the Means</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#pmr-predictive-margins-at-representative-values"><i class="fa fa-check"></i>PMR: Predictive Margins at Representative values</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#graph-margins-of-responses"><i class="fa fa-check"></i>Graph margins of responses</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#exercise-3-5"><i class="fa fa-check"></i>Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#margins-of-changes-in-responses"><i class="fa fa-check"></i>Margins of changes in responses</a>
<ul>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#the-dataset-3"><i class="fa fa-check"></i>The dataset</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#fit-a-model-1"><i class="fa fa-check"></i>Fit a model</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#ame-average-marginal-effects"><i class="fa fa-check"></i>AME: Average Marginal Effects</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#mem-marginal-effects-at-the-mean"><i class="fa fa-check"></i>MEM: Marginal Effects at the Mean</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#mer-marginal-effects-at-representative-values"><i class="fa fa-check"></i>MER: Marginal Effects at Representative values</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#graph-margins-of-changes-in-responses"><i class="fa fa-check"></i>Graph margins of changes in responses</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#exercise-4-2"><i class="fa fa-check"></i>Exercise 4</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#wrap-up-9"><i class="fa fa-check"></i>Wrap-up</a>
<ul>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#feedback-9"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="StataMod.html"><a href="StataMod.html#resources-12"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataGraph.html"><a href="StataGraph.html"><i class="fa fa-check"></i>Stata Graphics</a>
<ul>
<li class="chapter" data-level="" data-path="StataGraph.html"><a href="StataGraph.html#setup-9"><i class="fa fa-check"></i>Setup</a>
<ul>
<li class="chapter" data-level="" data-path="StataGraph.html"><a href="StataGraph.html#class-structure-and-organization-3"><i class="fa fa-check"></i>Class structure and organization</a></li>
<li class="chapter" data-level="" data-path="StataGraph.html"><a href="StataGraph.html#prerequisites-9"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="StataGraph.html"><a href="StataGraph.html#goals-8"><i class="fa fa-check"></i>Goals</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataGraph.html"><a href="StataGraph.html#graphing-in-stata"><i class="fa fa-check"></i>Graphing in Stata</a>
<ul>
<li class="chapter" data-level="" data-path="StataGraph.html"><a href="StataGraph.html#graphing-strategies"><i class="fa fa-check"></i>Graphing strategies</a></li>
<li class="chapter" data-level="" data-path="StataGraph.html"><a href="StataGraph.html#terrible-graph"><i class="fa fa-check"></i>Terrible graph</a></li>
<li class="chapter" data-level="" data-path="StataGraph.html"><a href="StataGraph.html#much-better-graph"><i class="fa fa-check"></i>Much better graph</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataGraph.html"><a href="StataGraph.html#univariate-graphics"><i class="fa fa-check"></i>Univariate graphics</a>
<ul>
<li class="chapter" data-level="" data-path="StataGraph.html"><a href="StataGraph.html#our-first-dataset"><i class="fa fa-check"></i>Our first dataset</a></li>
<li class="chapter" data-level="" data-path="StataGraph.html"><a href="StataGraph.html#single-continuous-variable"><i class="fa fa-check"></i>Single continuous variable</a></li>
<li class="chapter" data-level="" data-path="StataGraph.html"><a href="StataGraph.html#single-categorical-variable"><i class="fa fa-check"></i>Single categorical variable</a></li>
<li class="chapter" data-level="" data-path="StataGraph.html"><a href="StataGraph.html#exercise-0-8"><i class="fa fa-check"></i>Exercise 0</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataGraph.html"><a href="StataGraph.html#bivariate-graphics"><i class="fa fa-check"></i>Bivariate graphics</a>
<ul>
<li class="chapter" data-level="" data-path="StataGraph.html"><a href="StataGraph.html#next-dataset"><i class="fa fa-check"></i>Next dataset</a></li>
<li><a href="StataGraph.html#the-twoway-family">The <code>twoway</code> family</a></li>
<li class="chapter" data-level="" data-path="StataGraph.html"><a href="StataGraph.html#overlaying-twoway-graphs"><i class="fa fa-check"></i>Overlaying twoway graphs</a></li>
<li class="chapter" data-level="" data-path="StataGraph.html"><a href="StataGraph.html#twoway-line-graphs"><i class="fa fa-check"></i>Twoway line graphs</a></li>
<li class="chapter" data-level="" data-path="StataGraph.html"><a href="StataGraph.html#stata-graphing-lines"><i class="fa fa-check"></i>Stata graphing lines</a></li>
<li class="chapter" data-level="" data-path="StataGraph.html"><a href="StataGraph.html#exercise-1-9"><i class="fa fa-check"></i>Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="StataGraph.html"><a href="StataGraph.html#exporting-graphs"><i class="fa fa-check"></i>Exporting graphs</a></li>
<li class="chapter" data-level="" data-path="StataGraph.html"><a href="StataGraph.html#wrap-up-10"><i class="fa fa-check"></i>Wrap-up</a>
<ul>
<li class="chapter" data-level="" data-path="StataGraph.html"><a href="StataGraph.html#feedback-10"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="StataGraph.html"><a href="StataGraph.html#resources-13"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science Workshops</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-data-wrangling" class="section level1">
<h1>R Data Wrangling</h1>
<p><strong>Topics</strong></p>
<ul>
<li>Loading Excel worksheets</li>
<li>Iterating over files</li>
<li>Writing your own functions</li>
<li>Filtering with regular expressions (regex)</li>
<li>Reshaping data</li>
</ul>
<div id="setup-3" class="section level2">
<h2>Setup</h2>
<div id="software-and-materials-3" class="section level3">
<h3>Software and Materials</h3>
<p>Follow the <a href="./Rinstall.html">R Installation</a> instructions and ensure that you can successfully start RStudio.</p>
</div>
<div id="class-structure-3" class="section level3">
<h3>Class Structure</h3>
<p>Informal - Ask questions at any time. Really!</p>
<p>Collaboration is encouraged - please spend a minute introducing yourself to your neighbors!</p>
</div>
<div id="prerequisites-3" class="section level3">
<h3>Prerequisites</h3>
<p>This is an intermediate / advanced R course:</p>
<ul>
<li>Assumes intermediate knowledge of R</li>
<li>Relatively fast-paced</li>
</ul>
</div>
<div id="launch-an-r-session-2" class="section level3">
<h3>Launch an R session</h3>
<p>Start RStudio and create a new project:</p>
<ul>
<li>On Windows click the start button and search for RStudio. On Mac
RStudio will be in your applications folder.</li>
<li>In Rstudio go to <code>File -&gt; New Project</code>.</li>
<li>Choose <code>Existing Directory</code> and browse to the workshop materials directory on your desktop.</li>
<li>Choose <code>File -&gt; Open File</code> and select the file with the word “BLANK” in the name.</li>
</ul>
</div>
<div id="packages-2" class="section level3">
<h3>Packages</h3>
<p>You should have already installed the <code>tidyverse</code> and <code>rmarkdown</code>
packages onto your computer before the workshop
— see <a href="./Rinstall.html">R Installation</a>.
Now let’s load these packages into the search path of our R session.</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="RDataWrangling.html#cb369-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb369-2"><a href="RDataWrangling.html#cb369-2"></a><span class="kw">library</span>(rmarkdown)</span>
<span id="cb369-3"><a href="RDataWrangling.html#cb369-3"></a><span class="kw">library</span>(readxl) <span class="co"># installed with tidyverse, but not loaded into R session</span></span></code></pre></div>
</div>
<div id="workshop-outline" class="section level3">
<h3>Workshop Outline</h3>
<p><strong>Example data</strong></p>
<p>The UK <a href="https://www.ons.gov.uk">Office for National Statistics</a> provides yearly
data on the most popular boys names going back to 1996. The data is provided
separately for boys and girls and is stored in Excel spreadsheets.</p>
<p><strong>Overall Goal</strong></p>
<p>Our mission is to extract and graph the <strong>top 100</strong> boys names in England and Wales for every year since 1996.</p>
<center>
<img src="R/RDataWrangling/images/goal.png" title="fig:" alt="goal" />
</center>
<p><strong>Exercise 0: Problems with the data</strong></p>
<p>There are several things that make our goal challenging. Let’s take a look at the data:</p>
<ol style="list-style-type: decimal">
<li><p>Locate the files named <code>1996boys_tcm77-254026.xlsx</code> and
<code>2015boysnamesfinal.xlsx</code> and open them separately in a
spreadsheet program.</p>
<p>(If you don’t have a spreadsheet program installed on
your computer you can download one from
<a href="https://www.libreoffice.org/download/download/" class="uri">https://www.libreoffice.org/download/download/</a>).</p>
<p>What issues can you identify that might make working
with these data difficult?</p>
<p>In what ways is the format different between the two files?</p></li>
</ol>
<details>
<summary><span style="color:red"><b>Click for Exercise 0 Solution</b></span></summary>
<div class="alert alert-danger">
<ol style="list-style-type: decimal">
<li>Multiple Excel sheets in each file, each with a different name, but each file contains a <code>Table 1</code>.</li>
<li>The data does not start on row one. Headers are on row 7, followed by a blank line, followed by the actual data.</li>
<li>The data is stored in an inconvenient way, with ranks 1-50 in the first set of columns and ranks 51-100 in a second set of columns.</li>
<li>The second worksheet <code>2015boysnamesfinal.xlsx</code> contains extra columns between the data of interest, resulting in the second set of columns (ranks 51-100) being placed in a different position.</li>
<li>The year from which the data comes is only reported in the Excel file name, not within the data itself.</li>
<li>There are notes below the data.</li>
</ol>
<p>These differences will make it more difficult to automate re-arranging the data since we have to write code that can handle different input formats.</p>
</div>
</details>
<div class="alert alert-success">
<p><strong>Steps to accomplish the goal of extracting and graphing the <em>top 100</em> boys names in England and Wales for every year since 1996:</strong></p>
<ol start="0" style="list-style-type: decimal">
<li><p><strong>Explore example data to highlight problems (already done!)</strong></p></li>
<li><p><strong>Reading data from multiple Excel worksheets into R data frames</strong></p>
<ul>
<li>list Excel file names in a character vector</li>
<li>read Excel sheetnames into a list of character vectors</li>
<li>read Excel data for “Table 1” only into a list of data frames</li>
</ul></li>
<li><p><strong>Clean up data within each R data frame</strong></p>
<ul>
<li>sort and merge columns within each data frame inside the list</li>
<li>drop missing values from each data frame</li>
<li>reshape data format from wide to long</li>
</ul></li>
<li><p><strong>Organize the data into one large data frame and store it</strong></p>
<ul>
<li>create a year column within each data frame within the list</li>
<li>append all the data frames in the list into one large data frame</li>
</ul></li>
</ol>
</div>
<p>NOTE: please make sure you close the Excel files before continuing with the
workshop, otherwise you may encounter issues with file paths when reading
the data into R.</p>
</div>
</div>
<div id="working-with-excel-worksheets" class="section level2">
<h2>Working with Excel worksheets</h2>
<div class="alert alert-info">
<p><strong>GOAL: To learn how to read data from multiple Excel worksheets into R data frames.</strong> In particular:</p>
<ol style="list-style-type: decimal">
<li>List Excel file names in a character vector</li>
<li>Read Excel sheetnames into a list of character vectors</li>
<li>Read Excel data for “Table 1” only into a list of data frames</li>
</ol>
</div>
<p>As you can see, the data is in quite a messy state. Note that this is
not a contrived example; this is exactly the way the data came to us
from the UK government website! Let’s start cleaning and organizing
it.</p>
<p>Each Excel file contains a worksheet with the boy names data we want.
Each file also contains additional supplemental worksheets that we are
not currently interested in. As noted above, the worksheet of interest
differs from year to year, but always has “Table 1” in the sheet name.</p>
<p>The first step is to get a character vector of file names.</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="RDataWrangling.html#cb370-1"></a>boy_file_names &lt;-<span class="st"> </span><span class="kw">list.files</span>(<span class="st">&quot;dataSets/boys&quot;</span>, <span class="dt">full.names =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p>Now that we’ve told R the names of the data files, we can start working
with them. For example, the first file is</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="RDataWrangling.html#cb371-1"></a>boy_file_names[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] &quot;dataSets/boys/1996boys_tcm77-254026.xlsx&quot;</code></pre>
<p>and we can use the <code>excel_sheets()</code> function from the <code>readxl</code> package
within <code>tidyverse</code> to list the worksheet names from this file.</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="RDataWrangling.html#cb373-1"></a><span class="kw">excel_sheets</span>(boy_file_names[<span class="dv">1</span>])</span></code></pre></div>
<pre><code>## [1] &quot;Contents&quot;                     &quot;Table 1 - Top 100 boys, E&amp;W&quot; 
## [3] &quot;Table 2-Top 10 boys by month&quot; &quot;Table 3 - Boys names - E&amp;W&quot;</code></pre>
<div id="iterating-with-map" class="section level3">
<h3>Iterating with <code>map()</code></h3>
<p>Now that we know how to retrieve the names of the worksheets in an
Excel file, we could start writing code to extract the sheet names from
each file, e.g.,</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="RDataWrangling.html#cb375-1"></a><span class="kw">excel_sheets</span>(boy_file_names[<span class="dv">1</span>])</span></code></pre></div>
<pre><code>## [1] &quot;Contents&quot;                     &quot;Table 1 - Top 100 boys, E&amp;W&quot; 
## [3] &quot;Table 2-Top 10 boys by month&quot; &quot;Table 3 - Boys names - E&amp;W&quot;</code></pre>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="RDataWrangling.html#cb377-1"></a><span class="kw">excel_sheets</span>(boy_file_names[<span class="dv">2</span>])</span></code></pre></div>
<pre><code>## [1] &quot;Contents&quot;                        &quot;Table 1 - Top 100 boys, E&amp;W&quot;    
## [3] &quot;Table 2 - Top 100 boys, England&quot; &quot;Table 3 - Top 100 boys, Wales&quot;  
## [5] &quot;Table 4 - Top 10 boys by region&quot; &quot;Table 5 - Top 10 boys by month&quot; 
## [7] &quot;Table 6 - Boys names - E&amp;W&quot;</code></pre>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="RDataWrangling.html#cb379-1"></a><span class="co">## ...</span></span>
<span id="cb379-2"><a href="RDataWrangling.html#cb379-2"></a><span class="kw">excel_sheets</span>(boy_file_names[<span class="dv">20</span>])</span></code></pre></div>
<pre><code>##  [1] &quot;Contents&quot;             &quot;Metadata&quot;             &quot;Terms and Conditions&quot;
##  [4] &quot;Table 1&quot;              &quot;Table 2&quot;              &quot;Table 3&quot;             
##  [7] &quot;Table 4&quot;              &quot;Table 5&quot;              &quot;Table 6&quot;             
## [10] &quot;Related Publications&quot;</code></pre>
<p>This is not a terrible idea for a small number of files, but it is
more convenient to let R do the iteration for us. We could use a <code>for loop</code>,
or <code>sapply()</code>, but the <code>map()</code> family of functions from the <code>purrr</code>
package within <code>tidyverse</code> gives us a more consistent alternative,
so we’ll use that.</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="RDataWrangling.html#cb381-1"></a><span class="co"># map(object to iterate over, function that does task within each iteration)</span></span>
<span id="cb381-2"><a href="RDataWrangling.html#cb381-2"></a></span>
<span id="cb381-3"><a href="RDataWrangling.html#cb381-3"></a><span class="kw">map</span>(boy_file_names, excel_sheets)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;Contents&quot;                     &quot;Table 1 - Top 100 boys, E&amp;W&quot; 
## [3] &quot;Table 2-Top 10 boys by month&quot; &quot;Table 3 - Boys names - E&amp;W&quot;  
## 
## [[2]]
## [1] &quot;Contents&quot;                        &quot;Table 1 - Top 100 boys, E&amp;W&quot;    
## [3] &quot;Table 2 - Top 100 boys, England&quot; &quot;Table 3 - Top 100 boys, Wales&quot;  
## [5] &quot;Table 4 - Top 10 boys by region&quot; &quot;Table 5 - Top 10 boys by month&quot; 
## [7] &quot;Table 6 - Boys names - E&amp;W&quot;     
## 
## [[3]]
## [1] &quot;Contents&quot;                        &quot;Table 1 - Top 100 boys&#39; names&quot;  
## [3] &quot;Table 2 - Top 100 boys, England&quot; &quot;Table 3 - Top 100 boys, Wales&quot;  
## [5] &quot;Table 4 - Top 10 boys by region&quot; &quot;Table 5 - Top 10 boys by month&quot; 
## [7] &quot;Table 6 - Boys names - E&amp;W&quot;     
## 
## [[4]]
## [1] &quot;Contents&quot;                        &quot;Table 1 - Top 100 boys&#39; names&quot;  
## [3] &quot;Table 2 - Top 100 boys, England&quot; &quot;Table 3 - Top 100 boys, Wales&quot;  
## [5] &quot;Table 4 - Top 10 boys by region&quot; &quot;Table 5 - Top 10 boys by month&quot; 
## [7] &quot;Table 6 - Boys names - E&amp;W&quot;     
## 
## [[5]]
## [1] &quot;Contents&quot;                        &quot;Table 1 - Top 100 boys, E&amp;W&quot;    
## [3] &quot;Table 2 - Top 100 boys, England&quot; &quot;Table 3 - Top 100 boys, Wales&quot;  
## [5] &quot;Table 4 - Top 10 boys by region&quot; &quot;Table 5 - Top 10 boys by month&quot; 
## [7] &quot;Table 6 - Boys names - E&amp;W&quot;     
## 
## [[6]]
## [1] &quot;Contents&quot;                        &quot;Table 1 - Top 100 boys, E&amp;W&quot;    
## [3] &quot;Table 2 - Top 100 boys, England&quot; &quot;Table 3 - Top 100 boys, Wales&quot;  
## [5] &quot;Table 4 - Top 10 boys by region&quot; &quot;Table 5 - Top 10 boys by month&quot; 
## [7] &quot;Table 6 - Boys names - E&amp;W&quot;     
## 
## [[7]]
## [1] &quot;Contents&quot;                        &quot;Table 1 - Top 100 boys, E&amp;W&quot;    
## [3] &quot;Table 2 - Top 100 boys, England&quot; &quot;Table 3 - Top 100 boys, Wales&quot;  
## [5] &quot;Table 4 - Top 10 boys by region&quot; &quot;Table 5 - Top 10 boys by month&quot; 
## [7] &quot;Table 6 - Boys names - E&amp;W&quot;     
## 
## [[8]]
## [1] &quot;Contents&quot;                        &quot;Table 1 - Top 100 boys, E&amp;W&quot;    
## [3] &quot;Table 2 - Top 100 boys, England&quot; &quot;Table 3 - Top 100 boys, Wales&quot;  
## [5] &quot;Table 4 - Top 10 boys by region&quot; &quot;Table 5 - Top 10 boys by month&quot; 
## [7] &quot;Table 6 - Boys names - E&amp;W&quot;     
## 
## [[9]]
## [1] &quot;Contents&quot;                        &quot;Table 1 - Top 100 boys, E&amp;W&quot;    
## [3] &quot;Table 2 - Top 100 boys, England&quot; &quot;Table 3 - Top 100 boys, Wales&quot;  
## [5] &quot;Table 4 - Top 10 boys by region&quot; &quot;Table 5 - Top 10 boys by month&quot; 
## [7] &quot;Table 6 - Boys names - E&amp;W&quot;     
## 
## [[10]]
## [1] &quot;Contents&quot;                        &quot;Table 1 - Top 100 boys, E&amp;W&quot;    
## [3] &quot;Table 2 - Top 100 boys, England&quot; &quot;Table 3 - Top 100 boys, Wales&quot;  
## [5] &quot;Table 4 - Top 10 boys by region&quot; &quot;Table 5 - Top 10 boys by month&quot; 
## [7] &quot;Table 6 - Boys names - E&amp;W&quot;     
## 
## [[11]]
## [1] &quot;Contents&quot;                        &quot;Table 1 - Top 100 boys, E&amp;W&quot;    
## [3] &quot;Table 2 - Top 100 boys, England&quot; &quot;Table 3 - Top 100 boys, Wales&quot;  
## [5] &quot;Table 4 - Top 10 boys by region&quot; &quot;Table 5 - Top 10 boys by month&quot; 
## [7] &quot;Table 6 - Boys names - E&amp;W&quot;     
## 
## [[12]]
## [1] &quot;Contents&quot;                        &quot;Table 1 - Top 100 boys, E&amp;W&quot;    
## [3] &quot;Table 2 - Top 100 boys, England&quot; &quot;Table 3 - Top 100 boys, Wales&quot;  
## [5] &quot;Table 4 - Top 10 boys by region&quot; &quot;Table 5 - Top 10 boys by month&quot; 
## [7] &quot;Table 6 - Boys names - E&amp;W&quot;     
## 
## [[13]]
## [1] &quot;Contents&quot;                        &quot;Table 1 - Top 100 boys&#39; names&quot;  
## [3] &quot;Table 2 - Top 100 boys, England&quot; &quot;Table 3 - Top 100 boys, Wales&quot;  
## [5] &quot;Table 4 - Top 10 boys by region&quot; &quot;Table 5 - Top 10 boys by month&quot; 
## [7] &quot;Table 6 - Boys names - E&amp;W&quot;     
## 
## [[14]]
## [1] &quot;Contents&quot;                        &quot;Table 1 - Top 100 boys&#39; names&quot;  
## [3] &quot;Table 2 - Top 100 boys, England&quot; &quot;Table 3 - Top 100 boys, Wales&quot;  
## [5] &quot;Table 4 - Top 10 boys by region&quot; &quot;Table 5 - Top 10 boys by month&quot; 
## [7] &quot;Table 6 - Boys names - E&amp;W&quot;     
## 
## [[15]]
## [1] &quot;Contents&quot;                        &quot;Table 1 - Top 100 boys, E&amp;W&quot;    
## [3] &quot;Table 2 - Top 100 boys, England&quot; &quot;Table 3 - Top 100 boys, Wales&quot;  
## [5] &quot;Table 4 - Top 10 boys by region&quot; &quot;Table 5 - Top 10 boys by month&quot; 
## [7] &quot;Table 6 - Boys names - E&amp;W&quot;     
## 
## [[16]]
##  [1] &quot;Contents&quot;                        &quot;Metadata&quot;                       
##  [3] &quot;Terms and Conditions&quot;            &quot;Table 1 - Top 100 boys, E&amp;W&quot;    
##  [5] &quot;Table 2 - Top 100 boys, England&quot; &quot;Table 3 - Top 100 boys, Wales&quot;  
##  [7] &quot;Table 4 - Top 10 boys by region&quot; &quot;Table 5 - Top 10 boys by month&quot; 
##  [9] &quot;Table 6 - Boys names - E&amp;W&quot;      &quot;Related Publications&quot;           
## 
## [[17]]
##  [1] &quot;Contents&quot;                        &quot;Metadata&quot;                       
##  [3] &quot;Terms and Conditions&quot;            &quot;Table 1 - Top 100 boys, E&amp;W&quot;    
##  [5] &quot;Table 2 - Top 100 boys, England&quot; &quot;Table 3 - Top 100 boys, Wales&quot;  
##  [7] &quot;Table 4 - Top 10 boys by region&quot; &quot;Table 5 - Top 10 boys by month&quot; 
##  [9] &quot;Table 6 - Boys names - E&amp;W&quot;      &quot;Related Publications&quot;           
## 
## [[18]]
##  [1] &quot;Contents&quot;                        &quot;Metadata&quot;                       
##  [3] &quot;Terms and Conditions&quot;            &quot;Table 1 - Top 100 boys, E&amp;W&quot;    
##  [5] &quot;Table 2 - Top 100 boys, England&quot; &quot;Table 3 - Top 100 boys, Wales&quot;  
##  [7] &quot;Table 4 - Top 10 boys by region&quot; &quot;Table 5 - Top 10 boys by month&quot; 
##  [9] &quot;Table 6 - Boys names - E&amp;W&quot;      &quot;Related Publications&quot;           
## 
## [[19]]
##  [1] &quot;Contents&quot;                        &quot;Metadata&quot;                       
##  [3] &quot;Terms and Conditions&quot;            &quot;Table 1 - Top 100 boys, E&amp;W&quot;    
##  [5] &quot;Table 2 - Top 100 boys, England&quot; &quot;Table 3 - Top 100 boys, Wales&quot;  
##  [7] &quot;Table 4 - Top 10 boys by region&quot; &quot;Table 5 - Top 10 boys by month&quot; 
##  [9] &quot;Table 6 - Boys names - E&amp;W&quot;      &quot;Related Publications&quot;           
## 
## [[20]]
##  [1] &quot;Contents&quot;             &quot;Metadata&quot;             &quot;Terms and Conditions&quot;
##  [4] &quot;Table 1&quot;              &quot;Table 2&quot;              &quot;Table 3&quot;             
##  [7] &quot;Table 4&quot;              &quot;Table 5&quot;              &quot;Table 6&quot;             
## [10] &quot;Related Publications&quot;</code></pre>
</div>
<div id="filtering-strings-using-regex" class="section level3">
<h3>Filtering strings using regex</h3>
<p>To extract the correct worksheet names we need a way to extract
strings containing “Table 1”.</p>
<p>Base R provides some string manipulation capabilities
(see <code>?regex</code>, <code>?sub</code> and <code>?grep</code>), but we will use the
<code>stringr</code> package within <code>tidyverse</code> because it is more
user-friendly. <code>stringr</code> provides functions to:</p>
<ol style="list-style-type: decimal">
<li>detect</li>
<li>locate</li>
<li>extract</li>
<li>match</li>
<li>replace</li>
<li>combine</li>
<li>split</li>
</ol>
<p>strings. Here we want to detect the pattern “Table 1”, and only
return elements with this pattern. We can do that using the
<code>str_subset()</code> function:</p>
<ol style="list-style-type: decimal">
<li>The first argument to <code>str_subset()</code> is character vector we want to search in.</li>
<li>The second argument is a <em>regular expression</em> matching the pattern we want to retain.</li>
</ol>
<p>If you are not familiar with regular expressions (regex),
<a href="http://www.regexr.com/" class="uri">http://www.regexr.com/</a> is a good place to start. Regex is essentially
just a programmatic way of doing operations like “find” or “find and replace”
in MS Word or Excel.</p>
<p>Now that we know how to filter character vectors using <code>str_subset()</code> we can
identify the correct sheet in a particular Excel file. For example,</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="RDataWrangling.html#cb383-1"></a><span class="co"># str_subset(character_vector, regex_pattern)</span></span>
<span id="cb383-2"><a href="RDataWrangling.html#cb383-2"></a></span>
<span id="cb383-3"><a href="RDataWrangling.html#cb383-3"></a><span class="co"># nesting functions</span></span>
<span id="cb383-4"><a href="RDataWrangling.html#cb383-4"></a><span class="kw">str_subset</span>(<span class="kw">excel_sheets</span>(boy_file_names[<span class="dv">1</span>]), <span class="dt">pattern =</span> <span class="st">&quot;Table 1&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Table 1 - Top 100 boys, E&amp;W&quot;</code></pre>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="RDataWrangling.html#cb385-1"></a><span class="co"># piping functions</span></span>
<span id="cb385-2"><a href="RDataWrangling.html#cb385-2"></a><span class="kw">excel_sheets</span>(boy_file_names[<span class="dv">1</span>]) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_subset</span>(<span class="dt">pattern =</span> <span class="st">&quot;Table 1&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Table 1 - Top 100 boys, E&amp;W&quot;</code></pre>
</div>
<div id="writing-your-own-functions" class="section level3">
<h3>Writing your own functions</h3>
<p>The next step is to retrieve worksheet names and subset them.</p>
<p>The <code>map*</code> functions are useful when you want to apply a function to a
vector of inputs and obtain the return values for each input. This
is very convenient when a function already exists that does exactly what you
want. In the examples above we mapped the <code>excel_sheets()</code> function to
the elements of a character vector containing file names.</p>
<p>However, there is no function that both:</p>
<ol style="list-style-type: decimal">
<li>Retrieves worksheet names, and</li>
<li>Subsets the names</li>
</ol>
<p>So, we will have to write one. Fortunately, writing functions in R is easy.
Functions require 3 elements:</p>
<ol style="list-style-type: decimal">
<li>A <strong>name</strong></li>
<li>One or more <strong>arguments</strong></li>
<li>A <strong>body</strong> containing computations</li>
</ol>
<p>Anatomy of a function:</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="RDataWrangling.html#cb387-1"></a>function_name &lt;-<span class="st"> </span><span class="cf">function</span>(arg1, arg2, ....) {</span>
<span id="cb387-2"><a href="RDataWrangling.html#cb387-2"></a>  </span>
<span id="cb387-3"><a href="RDataWrangling.html#cb387-3"></a>    body of <span class="cf">function</span> <span class="co"># where stuff happens </span></span>
<span id="cb387-4"><a href="RDataWrangling.html#cb387-4"></a></span>
<span id="cb387-5"><a href="RDataWrangling.html#cb387-5"></a>    <span class="kw">return</span>( results ) </span>
<span id="cb387-6"><a href="RDataWrangling.html#cb387-6"></a>}</span></code></pre></div>
<p>Simple examples:</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="RDataWrangling.html#cb388-1"></a>myfun &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb388-2"><a href="RDataWrangling.html#cb388-2"></a>  x<span class="op">^</span><span class="dv">2</span></span>
<span id="cb388-3"><a href="RDataWrangling.html#cb388-3"></a>}</span>
<span id="cb388-4"><a href="RDataWrangling.html#cb388-4"></a></span>
<span id="cb388-5"><a href="RDataWrangling.html#cb388-5"></a><span class="kw">myfun</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1]   1   4   9  16  25  36  49  64  81 100</code></pre>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb390-1"><a href="RDataWrangling.html#cb390-1"></a>myfun2 &lt;-<span class="st"> </span><span class="cf">function</span>(x, y) {</span>
<span id="cb390-2"><a href="RDataWrangling.html#cb390-2"></a>  z &lt;-<span class="st"> </span>x<span class="op">^</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>y</span>
<span id="cb390-3"><a href="RDataWrangling.html#cb390-3"></a>  <span class="kw">return</span>(z)</span>
<span id="cb390-4"><a href="RDataWrangling.html#cb390-4"></a>}</span>
<span id="cb390-5"><a href="RDataWrangling.html#cb390-5"></a></span>
<span id="cb390-6"><a href="RDataWrangling.html#cb390-6"></a><span class="kw">myfun2</span>(<span class="dt">x=</span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">y=</span><span class="dv">42</span>)</span></code></pre></div>
<pre><code>##  [1]  43  46  51  58  67  78  91 106 123 142</code></pre>
<p>Examples using the Excel data:</p>
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb392-1"><a href="RDataWrangling.html#cb392-1"></a>get_data_sheet_name &lt;-<span class="st"> </span><span class="cf">function</span>(file, term){</span>
<span id="cb392-2"><a href="RDataWrangling.html#cb392-2"></a>  <span class="kw">excel_sheets</span>(file) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_subset</span>(<span class="dt">pattern =</span> term)</span>
<span id="cb392-3"><a href="RDataWrangling.html#cb392-3"></a>}</span>
<span id="cb392-4"><a href="RDataWrangling.html#cb392-4"></a></span>
<span id="cb392-5"><a href="RDataWrangling.html#cb392-5"></a><span class="co"># the goal is generalization </span></span>
<span id="cb392-6"><a href="RDataWrangling.html#cb392-6"></a><span class="kw">get_data_sheet_name</span>(boy_file_names[<span class="dv">1</span>], <span class="dt">term =</span> <span class="st">&quot;Table 1&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Table 1 - Top 100 boys, E&amp;W&quot;</code></pre>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="RDataWrangling.html#cb394-1"></a><span class="kw">get_data_sheet_name</span>(boy_file_names[<span class="dv">1</span>], <span class="dt">term =</span> <span class="st">&quot;Table 2&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Table 2-Top 10 boys by month&quot;</code></pre>
<p>Now we can map this new function over our vector of file names.</p>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="RDataWrangling.html#cb396-1"></a><span class="co"># map(object to iterate over, </span></span>
<span id="cb396-2"><a href="RDataWrangling.html#cb396-2"></a><span class="co">#     function that does task within each iteration, </span></span>
<span id="cb396-3"><a href="RDataWrangling.html#cb396-3"></a><span class="co">#     arguments to previous function)</span></span>
<span id="cb396-4"><a href="RDataWrangling.html#cb396-4"></a> </span>
<span id="cb396-5"><a href="RDataWrangling.html#cb396-5"></a><span class="kw">map</span>(boy_file_names,      <span class="co"># list object</span></span>
<span id="cb396-6"><a href="RDataWrangling.html#cb396-6"></a>    get_data_sheet_name, <span class="co"># function</span></span>
<span id="cb396-7"><a href="RDataWrangling.html#cb396-7"></a>    <span class="dt">term =</span> <span class="st">&quot;Table 1&quot;</span>)    <span class="co"># argument to previous function</span></span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;Table 1 - Top 100 boys, E&amp;W&quot;
## 
## [[2]]
## [1] &quot;Table 1 - Top 100 boys, E&amp;W&quot;
## 
## [[3]]
## [1] &quot;Table 1 - Top 100 boys&#39; names&quot;
## 
## [[4]]
## [1] &quot;Table 1 - Top 100 boys&#39; names&quot;
## 
## [[5]]
## [1] &quot;Table 1 - Top 100 boys, E&amp;W&quot;
## 
## [[6]]
## [1] &quot;Table 1 - Top 100 boys, E&amp;W&quot;
## 
## [[7]]
## [1] &quot;Table 1 - Top 100 boys, E&amp;W&quot;
## 
## [[8]]
## [1] &quot;Table 1 - Top 100 boys, E&amp;W&quot;
## 
## [[9]]
## [1] &quot;Table 1 - Top 100 boys, E&amp;W&quot;
## 
## [[10]]
## [1] &quot;Table 1 - Top 100 boys, E&amp;W&quot;
## 
## [[11]]
## [1] &quot;Table 1 - Top 100 boys, E&amp;W&quot;
## 
## [[12]]
## [1] &quot;Table 1 - Top 100 boys, E&amp;W&quot;
## 
## [[13]]
## [1] &quot;Table 1 - Top 100 boys&#39; names&quot;
## 
## [[14]]
## [1] &quot;Table 1 - Top 100 boys&#39; names&quot;
## 
## [[15]]
## [1] &quot;Table 1 - Top 100 boys, E&amp;W&quot;
## 
## [[16]]
## [1] &quot;Table 1 - Top 100 boys, E&amp;W&quot;
## 
## [[17]]
## [1] &quot;Table 1 - Top 100 boys, E&amp;W&quot;
## 
## [[18]]
## [1] &quot;Table 1 - Top 100 boys, E&amp;W&quot;
## 
## [[19]]
## [1] &quot;Table 1 - Top 100 boys, E&amp;W&quot;
## 
## [[20]]
## [1] &quot;Table 1&quot;</code></pre>
</div>
</div>
<div id="reading-excel-data-files" class="section level2">
<h2>Reading Excel data files</h2>
<p>Now that we know the correct worksheet from each file, we can actually
read those data into R. We can do that using the <code>read_excel()</code> function.</p>
<p>We’ll start by reading the data from the first file, just to check
that it works. Recall that the actual data starts on row 7, so we want
to skip the first 6 rows. We can use the <code>glimpse()</code> function from
the <code>dplyr</code> package within <code>tidyverse</code> to view the output.</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="RDataWrangling.html#cb398-1"></a>temp &lt;-<span class="st"> </span><span class="kw">read_excel</span>(</span>
<span id="cb398-2"><a href="RDataWrangling.html#cb398-2"></a>  <span class="dt">path =</span> boy_file_names[<span class="dv">1</span>],</span>
<span id="cb398-3"><a href="RDataWrangling.html#cb398-3"></a>  <span class="dt">sheet =</span> <span class="kw">get_data_sheet_name</span>(boy_file_names[<span class="dv">1</span>], <span class="dt">term =</span> <span class="st">&quot;Table 1&quot;</span>),</span>
<span id="cb398-4"><a href="RDataWrangling.html#cb398-4"></a>  <span class="dt">skip =</span> <span class="dv">6</span></span>
<span id="cb398-5"><a href="RDataWrangling.html#cb398-5"></a>)</span>
<span id="cb398-6"><a href="RDataWrangling.html#cb398-6"></a></span>
<span id="cb398-7"><a href="RDataWrangling.html#cb398-7"></a><span class="kw">glimpse</span>(temp)</span></code></pre></div>
<pre><code>## Rows: 59
## Columns: 7
## $ ...1      &lt;chr&gt; NA, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;11&quot;…
## $ Name...2  &lt;chr&gt; NA, &quot;JACK&quot;, &quot;DANIEL&quot;, &quot;THOMAS&quot;, &quot;JAMES&quot;, &quot;JOSHUA&quot;, &quot;MATTHEW…
## $ Count...3 &lt;dbl&gt; NA, 10779, 10338, 9603, 9385, 7887, 7426, 6496, 6193, 6161,…
## $ ...4      &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
## $ ...5      &lt;dbl&gt; NA, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64,…
## $ Name...6  &lt;chr&gt; NA, &quot;DOMINIC&quot;, &quot;NICHOLAS&quot;, &quot;BRANDON&quot;, &quot;RHYS&quot;, &quot;MARK&quot;, &quot;MAX&quot;…
## $ Count...7 &lt;dbl&gt; NA, 1519, 1385, 1337, 1259, 1222, 1192, 1186, 1135, 1128, 1…</code></pre>
<p>Note that R has added a suffix to each column name <code>...1</code>, <code>...2</code>,
<code>...3</code>, etc. because duplicate names are not allowed, so the suffix serves
to disambiguate. The trailing number represents the index of the column.</p>
<div id="exercise-1-3" class="section level3">
<h3>Exercise 1</h3>
<ol style="list-style-type: decimal">
<li>Write a function called <code>read_boys_names</code> that takes a file name as an argument
and reads the worksheet containing “Table 1” from that file. Don’t forget
to skip the first 6 rows.</li>
</ol>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="RDataWrangling.html#cb400-1"></a><span class="co">## </span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Test your function by using it to read <em>one</em> of the boys names
Excel files.</li>
</ol>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="RDataWrangling.html#cb401-1"></a><span class="co">## </span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Use the <code>map()</code> function to create a list of data frames called <code>boysNames</code><br />
from all the Excel files, using the function you wrote in step 1.</li>
</ol>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="RDataWrangling.html#cb402-1"></a><span class="co">## </span></span></code></pre></div>
<details>
<summary><span style="color:red"><b>Click for Exercise 1 Solution</b></span></summary>
<div class="alert alert-danger">
<ol style="list-style-type: decimal">
<li>Write a function that takes a file name as an argument and reads the worksheet containing “Table 1” from that file.</li>
</ol>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="RDataWrangling.html#cb403-1"></a>read_boys_names &lt;-<span class="st"> </span><span class="cf">function</span>(file, sheet_name) {</span>
<span id="cb403-2"><a href="RDataWrangling.html#cb403-2"></a>  <span class="kw">read_excel</span>(</span>
<span id="cb403-3"><a href="RDataWrangling.html#cb403-3"></a>    <span class="dt">path =</span> file,</span>
<span id="cb403-4"><a href="RDataWrangling.html#cb403-4"></a>    <span class="dt">sheet =</span> <span class="kw">get_data_sheet_name</span>(file, <span class="dt">term =</span> sheet_name),</span>
<span id="cb403-5"><a href="RDataWrangling.html#cb403-5"></a>    <span class="dt">skip =</span> <span class="dv">6</span></span>
<span id="cb403-6"><a href="RDataWrangling.html#cb403-6"></a>  )</span>
<span id="cb403-7"><a href="RDataWrangling.html#cb403-7"></a>}</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Test your function by using it to read <em>one</em> of the boys names Excel files.</li>
</ol>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="RDataWrangling.html#cb404-1"></a><span class="kw">read_boys_names</span>(boy_file_names[<span class="dv">1</span>], <span class="dt">sheet_name =</span> <span class="st">&quot;Table 1&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 59
## Columns: 7
## $ ...1      &lt;chr&gt; NA, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;11&quot;…
## $ Name...2  &lt;chr&gt; NA, &quot;JACK&quot;, &quot;DANIEL&quot;, &quot;THOMAS&quot;, &quot;JAMES&quot;, &quot;JOSHUA&quot;, &quot;MATTHEW…
## $ Count...3 &lt;dbl&gt; NA, 10779, 10338, 9603, 9385, 7887, 7426, 6496, 6193, 6161,…
## $ ...4      &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
## $ ...5      &lt;dbl&gt; NA, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64,…
## $ Name...6  &lt;chr&gt; NA, &quot;DOMINIC&quot;, &quot;NICHOLAS&quot;, &quot;BRANDON&quot;, &quot;RHYS&quot;, &quot;MARK&quot;, &quot;MAX&quot;…
## $ Count...7 &lt;dbl&gt; NA, 1519, 1385, 1337, 1259, 1222, 1192, 1186, 1135, 1128, 1…</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Use the <code>map()</code> function to read data from all the Excel files, using the function you wrote in step 1.</li>
</ol>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="RDataWrangling.html#cb406-1"></a>boysNames &lt;-<span class="st"> </span><span class="kw">map</span>(boy_file_names, read_boys_names, <span class="dt">sheet_name =</span> <span class="st">&quot;Table 1&quot;</span>)</span></code></pre></div>
</div>
</details>
</div>
</div>
<div id="data-cleanup" class="section level2">
<h2>Data cleanup</h2>
<div class="alert alert-info">
<p><strong>GOAL: To learn how to clean up data within each R data frame.</strong> In particular:</p>
<ol style="list-style-type: decimal">
<li>Sort and merge columns within each data frame inside the list</li>
<li>Drop missing values from each data frame</li>
<li>Reshape data format from wide to long</li>
</ol>
</div>
<p>Now that we’ve read in the data, we can see that there are some
problems we need to fix. Specifically, we need to:</p>
<ol style="list-style-type: decimal">
<li>fix column names</li>
<li>get rid of blank row at the top and the notes at the bottom</li>
<li>get rid of extraneous “changes in rank” columns if they exist</li>
<li>transform the side-by-side tables layout to a single table</li>
</ol>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="RDataWrangling.html#cb407-1"></a><span class="co"># Rank 1:50 --- Names / Counts are in columns 2 and 3 </span></span>
<span id="cb407-2"><a href="RDataWrangling.html#cb407-2"></a><span class="co"># Rank 51:100 --- Names / Counts are in columns 6 and 7</span></span>
<span id="cb407-3"><a href="RDataWrangling.html#cb407-3"></a><span class="kw">glimpse</span>(boysNames[[<span class="dv">1</span>]]) </span></code></pre></div>
<pre><code>## Rows: 59
## Columns: 7
## $ ...1      &lt;chr&gt; NA, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;11&quot;…
## $ Name...2  &lt;chr&gt; NA, &quot;JACK&quot;, &quot;DANIEL&quot;, &quot;THOMAS&quot;, &quot;JAMES&quot;, &quot;JOSHUA&quot;, &quot;MATTHEW…
## $ Count...3 &lt;dbl&gt; NA, 10779, 10338, 9603, 9385, 7887, 7426, 6496, 6193, 6161,…
## $ ...4      &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
## $ ...5      &lt;dbl&gt; NA, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64,…
## $ Name...6  &lt;chr&gt; NA, &quot;DOMINIC&quot;, &quot;NICHOLAS&quot;, &quot;BRANDON&quot;, &quot;RHYS&quot;, &quot;MARK&quot;, &quot;MAX&quot;…
## $ Count...7 &lt;dbl&gt; NA, 1519, 1385, 1337, 1259, 1222, 1192, 1186, 1135, 1128, 1…</code></pre>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb409-1"><a href="RDataWrangling.html#cb409-1"></a><span class="co"># Rank 1:50 --- Names / Counts are in columns 2 and 3 </span></span>
<span id="cb409-2"><a href="RDataWrangling.html#cb409-2"></a><span class="co"># Rank 51:100 --- Names / Counts are in columns 7 and 8</span></span>
<span id="cb409-3"><a href="RDataWrangling.html#cb409-3"></a><span class="kw">glimpse</span>(boysNames[[<span class="dv">10</span>]]) </span></code></pre></div>
<pre><code>## Rows: 61
## Columns: 9
## $ ...1             &lt;chr&gt; NA, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10…
## $ Name...2         &lt;chr&gt; NA, &quot;JACK&quot;, &quot;JOSHUA&quot;, &quot;THOMAS&quot;, &quot;JAMES&quot;, &quot;OLIVER&quot;, &quot;…
## $ Count...3        &lt;dbl&gt; NA, 7434, 7167, 6792, 5654, 5516, 5270, 5219, 5106, …
## $ `since 2004...4` &lt;chr&gt; NA, &quot;-&quot;, &quot;-&quot;, &quot;-&quot;, &quot;-&quot;, &quot;+2&quot;, &quot;-1&quot;, &quot;-1&quot;, &quot;-&quot;, &quot;+2&quot;,…
## $ ...5             &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
## $ ...6             &lt;dbl&gt; NA, 51, 52, 53, 53, 55, 56, 57, 58, 59, 60, 61, 62, …
## $ Name...7         &lt;chr&gt; NA, &quot;NOAH&quot;, &quot;MUHAMMAD&quot;, &quot;ALEX&quot;, &quot;ISAAC&quot;, &quot;OSCAR&quot;, &quot;R…
## $ Count...8        &lt;dbl&gt; NA, 1346, 1318, 1302, 1302, 1262, 1256, 1172, 1126, …
## $ `since 2004...9` &lt;chr&gt; NA, &quot;+23&quot;, &quot;-1&quot;, &quot;-7&quot;, &quot;+5&quot;, &quot;+4&quot;, &quot;-4&quot;, &quot;+6&quot;, &quot;+17&quot;…</code></pre>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="RDataWrangling.html#cb411-1"></a><span class="co"># Rank 1:50 --- Names / Counts are in columns 2 and 3 </span></span>
<span id="cb411-2"><a href="RDataWrangling.html#cb411-2"></a><span class="co"># Rank 51:100 --- Names / Counts are in columns 8 and 9</span></span>
<span id="cb411-3"><a href="RDataWrangling.html#cb411-3"></a><span class="kw">glimpse</span>(boysNames[[<span class="dv">20</span>]]) </span></code></pre></div>
<pre><code>## Rows: 61
## Columns: 11
## $ Rank...1          &lt;chr&gt; NA, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;1…
## $ Name...2          &lt;chr&gt; NA, &quot;OLIVER&quot;, &quot;JACK&quot;, &quot;HARRY&quot;, &quot;GEORGE&quot;, &quot;JACOB&quot;, &quot;…
## $ Count...3         &lt;dbl&gt; NA, 6941, 5371, 5308, 4869, 4850, 4831, 4148, 4083,…
## $ `since 2014...4`  &lt;chr&gt; NA, &quot;­ &quot;, &quot;­ &quot;, &quot;­ &quot;, &quot;+3 &quot;, &quot;-1 &quot;, &quot;-1 &quot;, &quot;+4 &quot;, &quot;…
## $ `since 2005...5`  &lt;chr&gt; NA, &quot;+4 &quot;, &quot;-1 &quot;, &quot;+6 &quot;, &quot;+13 &quot;, &quot;+16 &quot;, &quot;+6 &quot;, &quot;+4…
## $ ...6              &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
## $ Rank...7          &lt;chr&gt; NA, &quot;51&quot;, &quot;52&quot;, &quot;53&quot;, &quot;54&quot;, &quot;55&quot;, &quot;56&quot;, &quot;57&quot;, &quot;58&quot;,…
## $ Name...8          &lt;chr&gt; NA, &quot;REUBEN&quot;, &quot;HARLEY&quot;, &quot;LUCA&quot;, &quot;MICHAEL&quot;, &quot;HUGO&quot;, …
## $ Count...9         &lt;dbl&gt; NA, 1188, 1175, 1167, 1165, 1153, 1148, 1112, 1095,…
## $ `since 2014...10` &lt;chr&gt; NA, &quot;­ &quot;, &quot;-7 &quot;, &quot;+5 &quot;, &quot;-2 &quot;, &quot;+15 &quot;, &quot;-10 &quot;, &quot;+7 …
## $ `since 2005...11` &lt;chr&gt; NA, &quot;+51* &quot;, &quot;+18 &quot;, &quot;+30 &quot;, &quot;-12 &quot;, &quot;+124* &quot;, &quot;-37…</code></pre>
<p>In short, we want to go from this:</p>
<center>
<img src="R/RDataWrangling/images/messy.png" title="fig:" alt="messy" />
</center>
<p>to this:</p>
<center>
<img src="R/RDataWrangling/images/clean.png" title="fig:" alt="tidy" />
</center>
<p>There are many ways to do this kind of data manipulation in R. We’re
going to use the <code>dplyr</code> and <code>tidyr</code> packages from within <code>tidyverse</code>
to make our lives easier.</p>
<div id="selecting-columns" class="section level3">
<h3>Selecting columns</h3>
<p>Next we want to retain just the <code>Name...2</code>, <code>Name...6</code>, <code>Count...3</code> and <code>Count...7</code> columns.
We can do that using the <code>select()</code> function:</p>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="RDataWrangling.html#cb413-1"></a>boysNames[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>## # A tibble: 59 x 7
##    ...1  Name...2 Count...3 ...4   ...5 Name...6 Count...7
##    &lt;chr&gt; &lt;chr&gt;        &lt;dbl&gt; &lt;lgl&gt; &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;
##  1 &lt;NA&gt;  &lt;NA&gt;            NA NA       NA &lt;NA&gt;            NA
##  2 1     JACK         10779 NA       51 DOMINIC       1519
##  3 2     DANIEL       10338 NA       52 NICHOLAS      1385
##  4 3     THOMAS        9603 NA       53 BRANDON       1337
##  5 4     JAMES         9385 NA       54 RHYS          1259
##  6 5     JOSHUA        7887 NA       55 MARK          1222
##  7 6     MATTHEW       7426 NA       56 MAX           1192
##  8 7     RYAN          6496 NA       57 DYLAN         1186
##  9 8     JOSEPH        6193 NA       58 HENRY         1135
## 10 9     SAMUEL        6161 NA       59 PETER         1128
## # … with 49 more rows</code></pre>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="RDataWrangling.html#cb415-1"></a>boysNames[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="kw">select</span>(boysNames[[<span class="dv">1</span>]], Name...<span class="dv">2</span>, Name...<span class="dv">6</span>, Count...<span class="dv">3</span>, Count...<span class="dv">7</span>)</span>
<span id="cb415-2"><a href="RDataWrangling.html#cb415-2"></a>boysNames[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>## # A tibble: 59 x 4
##    Name...2 Name...6 Count...3 Count...7
##    &lt;chr&gt;    &lt;chr&gt;        &lt;dbl&gt;     &lt;dbl&gt;
##  1 &lt;NA&gt;     &lt;NA&gt;            NA        NA
##  2 JACK     DOMINIC      10779      1519
##  3 DANIEL   NICHOLAS     10338      1385
##  4 THOMAS   BRANDON       9603      1337
##  5 JAMES    RHYS          9385      1259
##  6 JOSHUA   MARK          7887      1222
##  7 MATTHEW  MAX           7426      1192
##  8 RYAN     DYLAN         6496      1186
##  9 JOSEPH   HENRY         6193      1135
## 10 SAMUEL   PETER         6161      1128
## # … with 49 more rows</code></pre>
</div>
<div id="data-types-and-structures" class="section level3">
<h3>Data types and structures</h3>
<p>We’ve now encountered several different data types and data structures. Let’s take a step back and survey the options available in R.</p>
<p><strong>Data structures:</strong></p>
<p>In R, the most foundational data structure is the <strong>vector</strong>. Vectors are <em>containers</em> that
can hold a <em>collection</em> of values. Vectors come in two basic forms:</p>
<ol style="list-style-type: decimal">
<li><strong>atomic</strong>: only hold elements of the same type; they are <strong>homogeneous</strong>. The <code>c()</code> function can be used to create atomic vectors.</li>
<li><strong>list</strong>: can hold elements of different types; they are <strong>heterogeneous</strong>. The <code>list()</code> function can be used to create list vectors.</li>
</ol>
<p><code>NULL</code> is closely related to vectors and often serves the role of a zero length vector.</p>
<center>
<img src="R/RDataWrangling/images/summary_tree.png" title="fig:" alt="vector tree" />
</center>
<p>From these two basic forms, the following six structures are derived:</p>
<table>
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="78%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Elements</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">atomic vector</td>
<td align="left">homogeneous</td>
<td align="left">contains elements of the same <strong>type</strong>, one of: character, integer, double, logical</td>
</tr>
<tr class="even">
<td align="left">array</td>
<td align="left">homogeneous</td>
<td align="left">an atomic vector with attributes giving dimensions (1, 2, or &gt;2)</td>
</tr>
<tr class="odd">
<td align="left">matrix</td>
<td align="left">homogeneous</td>
<td align="left">an array with 2 dimensions</td>
</tr>
<tr class="even">
<td align="left">factor</td>
<td align="left">homogeneous</td>
<td align="left">an atomic integer vector containing only predefined values, storing categorical data</td>
</tr>
<tr class="odd">
<td align="left">list</td>
<td align="left">heterogeneous</td>
<td align="left">a container whose elements can encompass any mixture of data types</td>
</tr>
<tr class="even">
<td align="left">data.frame</td>
<td align="left">heterogeneous</td>
<td align="left">a rectangular list with elements (columns) containing atomic vectors of equal length</td>
</tr>
</tbody>
</table>
<p>Each vector can have <strong>attributes</strong>, which are a named list of metadata that can include the vector’s <strong>dimensions</strong> and its <strong>class</strong>. The latter is a property assigned to an object that determines how <strong>generic functions</strong> operate with it, and thus which <strong>methods</strong> are available for it. The class of an object can be queried using the <code>class()</code> function. You can learn more details about R data structures here: <a href="https://adv-r.hadley.nz/vectors-chap.html" class="uri">https://adv-r.hadley.nz/vectors-chap.html</a></p>
<p><strong>Data types:</strong></p>
<p>There are four primary types of atomic vectors. Collectively, integer and double vectors are known as numeric vectors. You can query the <strong>type</strong> of an object using the <code>typeof()</code> function.</p>
<center>
<img src="R/RDataWrangling/images/summary_tree_atomic.png" title="fig:" alt="atomic tree" />
</center>
<table>
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">character</td>
<td align="left">“a”, “swc”</td>
</tr>
<tr class="even">
<td align="left">integer</td>
<td align="left">2L (the L tells R to store this as an integer)</td>
</tr>
<tr class="odd">
<td align="left">double (floating point)</td>
<td align="left">2, 15.5</td>
</tr>
<tr class="even">
<td align="left">logical</td>
<td align="left">TRUE, FALSE</td>
</tr>
</tbody>
</table>
<p><strong>Coercion:</strong></p>
<p>If heterogeneous elements are stored in an atomic vector, R will <strong>coerce</strong> the vector to the simplest type required to store all the information. The order of coercion is roughly: logical -&gt; integer -&gt; double -&gt; character -&gt; list. For example:</p>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="RDataWrangling.html#cb417-1"></a>x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">1.5</span>, <span class="fl">2.7</span>, <span class="fl">3.9</span>)</span>
<span id="cb417-2"><a href="RDataWrangling.html#cb417-2"></a><span class="kw">typeof</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="RDataWrangling.html#cb419-1"></a>y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">1.5</span>, <span class="fl">2.7</span>, <span class="fl">3.9</span>, <span class="st">&quot;a&quot;</span>)</span>
<span id="cb419-2"><a href="RDataWrangling.html#cb419-2"></a><span class="kw">typeof</span>(y)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
</div>
<div id="list-indexing" class="section level3">
<h3>List indexing</h3>
<p>Now that we know about data structures more generally, let’s focus on the <em>list</em> structure we created for <code>boysNames</code>.
Why are we using <strong>double brackets</strong> <code>[[</code> to index this list object, instead of the single brackets <code>[</code> we used to index atomic vectors?</p>
<center>
<img src="R/RDataWrangling/images/indexing_lists.png" title="fig:" alt="list indexing" />
</center>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="RDataWrangling.html#cb421-1"></a><span class="co"># various data structures</span></span>
<span id="cb421-2"><a href="RDataWrangling.html#cb421-2"></a>numbers &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></span>
<span id="cb421-3"><a href="RDataWrangling.html#cb421-3"></a>letters &lt;-<span class="st"> </span>LETTERS[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>]</span>
<span id="cb421-4"><a href="RDataWrangling.html#cb421-4"></a>dat &lt;-<span class="st"> </span><span class="kw">head</span>(mtcars)</span>
<span id="cb421-5"><a href="RDataWrangling.html#cb421-5"></a>x &lt;-<span class="st"> </span>237L</span>
<span id="cb421-6"><a href="RDataWrangling.html#cb421-6"></a></span>
<span id="cb421-7"><a href="RDataWrangling.html#cb421-7"></a><span class="co"># combine in a list</span></span>
<span id="cb421-8"><a href="RDataWrangling.html#cb421-8"></a>mylist &lt;-<span class="st"> </span><span class="kw">list</span>(numbers, letters, dat, x)</span>
<span id="cb421-9"><a href="RDataWrangling.html#cb421-9"></a></span>
<span id="cb421-10"><a href="RDataWrangling.html#cb421-10"></a><span class="co"># indexing the list</span></span>
<span id="cb421-11"><a href="RDataWrangling.html#cb421-11"></a>mylist[<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot;</code></pre>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="RDataWrangling.html#cb423-1"></a><span class="kw">class</span>(mylist[<span class="dv">2</span>]) <span class="co"># a list</span></span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="RDataWrangling.html#cb425-1"></a>mylist[[<span class="dv">2</span>]]</span></code></pre></div>
<pre><code>## [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot;</code></pre>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb427-1"><a href="RDataWrangling.html#cb427-1"></a><span class="kw">class</span>(mylist[[<span class="dv">2</span>]]) <span class="co"># a character vector</span></span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
</div>
<div id="dropping-missing-values" class="section level3">
<h3>Dropping missing values</h3>
<p>Next we want to remove blank rows and rows used for notes. An easy way
to do that is to use <code>drop_na()</code> from the <code>tidyr</code> package within <code>tidyverse</code>
to remove rows with missing values.</p>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="RDataWrangling.html#cb429-1"></a>boysNames[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>## # A tibble: 59 x 4
##    Name...2 Name...6 Count...3 Count...7
##    &lt;chr&gt;    &lt;chr&gt;        &lt;dbl&gt;     &lt;dbl&gt;
##  1 &lt;NA&gt;     &lt;NA&gt;            NA        NA
##  2 JACK     DOMINIC      10779      1519
##  3 DANIEL   NICHOLAS     10338      1385
##  4 THOMAS   BRANDON       9603      1337
##  5 JAMES    RHYS          9385      1259
##  6 JOSHUA   MARK          7887      1222
##  7 MATTHEW  MAX           7426      1192
##  8 RYAN     DYLAN         6496      1186
##  9 JOSEPH   HENRY         6193      1135
## 10 SAMUEL   PETER         6161      1128
## # … with 49 more rows</code></pre>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="RDataWrangling.html#cb431-1"></a>boysNames[[<span class="dv">1</span>]] &lt;-<span class="st"> </span>boysNames[[<span class="dv">1</span>]] <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">drop_na</span>()</span>
<span id="cb431-2"><a href="RDataWrangling.html#cb431-2"></a></span>
<span id="cb431-3"><a href="RDataWrangling.html#cb431-3"></a>boysNames[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>## # A tibble: 50 x 4
##    Name...2 Name...6 Count...3 Count...7
##    &lt;chr&gt;    &lt;chr&gt;        &lt;dbl&gt;     &lt;dbl&gt;
##  1 JACK     DOMINIC      10779      1519
##  2 DANIEL   NICHOLAS     10338      1385
##  3 THOMAS   BRANDON       9603      1337
##  4 JAMES    RHYS          9385      1259
##  5 JOSHUA   MARK          7887      1222
##  6 MATTHEW  MAX           7426      1192
##  7 RYAN     DYLAN         6496      1186
##  8 JOSEPH   HENRY         6193      1135
##  9 SAMUEL   PETER         6161      1128
## 10 LIAM     STEPHEN       5802      1122
## # … with 40 more rows</code></pre>
</div>
<div id="exercise-2-2" class="section level3">
<h3>Exercise 2</h3>
<ol style="list-style-type: decimal">
<li>Write a function called <code>namecount</code> that takes a data frame as an
argument and returns a modified version, which keeps only columns that
include the strings <code>Name</code> and <code>Count</code> in the column names.
HINT: see the <code>?matches</code> function.</li>
</ol>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="RDataWrangling.html#cb433-1"></a><span class="co">## </span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Test your function on the first data frame in the list of boys
names data.</li>
</ol>
<div class="sourceCode" id="cb434"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb434-1"><a href="RDataWrangling.html#cb434-1"></a><span class="co">## </span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Use the <code>map()</code> function to each data frame in the list of boys
names data and save it to the list called <code>boysNames</code>.</li>
</ol>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="RDataWrangling.html#cb435-1"></a><span class="co">## </span></span></code></pre></div>
<details>
<summary><span style="color:red"><b>Click for Exercise 2 Solution</b></span></summary>
<div class="alert alert-danger">
<ol style="list-style-type: decimal">
<li>Write a function that takes a data frame as an argument and returns a modified version, which keeps only columns that include the strings <code>Name</code> and <code>Count</code> in the column names. HINT: see the <code>?matches</code> function.</li>
</ol>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb436-1"><a href="RDataWrangling.html#cb436-1"></a>  namecount &lt;-<span class="st"> </span><span class="cf">function</span>(data) {</span>
<span id="cb436-2"><a href="RDataWrangling.html#cb436-2"></a>      <span class="kw">select</span>(data, <span class="kw">matches</span>(<span class="st">&quot;Name|Count&quot;</span>))</span>
<span id="cb436-3"><a href="RDataWrangling.html#cb436-3"></a>  }</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Test your function on the first data frame in the list of boys names data.</li>
</ol>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="RDataWrangling.html#cb437-1"></a>  <span class="kw">namecount</span>(boysNames[[<span class="dv">1</span>]])</span></code></pre></div>
<pre><code>## # A tibble: 50 x 4
##    Name...2 Name...6 Count...3 Count...7
##    &lt;chr&gt;    &lt;chr&gt;        &lt;dbl&gt;     &lt;dbl&gt;
##  1 JACK     DOMINIC      10779      1519
##  2 DANIEL   NICHOLAS     10338      1385
##  3 THOMAS   BRANDON       9603      1337
##  4 JAMES    RHYS          9385      1259
##  5 JOSHUA   MARK          7887      1222
##  6 MATTHEW  MAX           7426      1192
##  7 RYAN     DYLAN         6496      1186
##  8 JOSEPH   HENRY         6193      1135
##  9 SAMUEL   PETER         6161      1128
## 10 LIAM     STEPHEN       5802      1122
## # … with 40 more rows</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Use the <code>map()</code> function to each data frame in the list of boys names data.</li>
</ol>
<div class="sourceCode" id="cb439"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb439-1"><a href="RDataWrangling.html#cb439-1"></a>  boysNames &lt;-<span class="st"> </span><span class="kw">map</span>(boysNames, namecount)</span></code></pre></div>
</div>
</details>
</div>
<div id="reshaping-from-wide-to-long" class="section level3">
<h3>Reshaping from wide to long</h3>
<p>Our final task is to re-arrange the data so that it is all in a single
table instead of in two side-by-side tables. For many similar tasks
the <code>gather()</code> function in the <code>tidyr</code> package is useful, but in this
case we will be better off using a combination of <code>select()</code> and
<code>bind_rows()</code>. Here’s the logic behind this step:</p>
<center>
<img src="R/RDataWrangling/images/wide_vs_long.png" />
</center>
<p>Here’s the code that implements the transformation:</p>
<div class="sourceCode" id="cb440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb440-1"><a href="RDataWrangling.html#cb440-1"></a>boysNames[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>## # A tibble: 50 x 4
##    Name...2 Name...6 Count...3 Count...7
##    &lt;chr&gt;    &lt;chr&gt;        &lt;dbl&gt;     &lt;dbl&gt;
##  1 JACK     DOMINIC      10779      1519
##  2 DANIEL   NICHOLAS     10338      1385
##  3 THOMAS   BRANDON       9603      1337
##  4 JAMES    RHYS          9385      1259
##  5 JOSHUA   MARK          7887      1222
##  6 MATTHEW  MAX           7426      1192
##  7 RYAN     DYLAN         6496      1186
##  8 JOSEPH   HENRY         6193      1135
##  9 SAMUEL   PETER         6161      1128
## 10 LIAM     STEPHEN       5802      1122
## # … with 40 more rows</code></pre>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb442-1"><a href="RDataWrangling.html#cb442-1"></a>first_columns &lt;-<span class="st"> </span><span class="kw">select</span>(boysNames[[<span class="dv">1</span>]], <span class="dt">Name =</span> Name...<span class="dv">2</span>, <span class="dt">Count =</span> Count...<span class="dv">3</span>)</span>
<span id="cb442-2"><a href="RDataWrangling.html#cb442-2"></a>second_columns &lt;-<span class="st"> </span><span class="kw">select</span>(boysNames[[<span class="dv">1</span>]], <span class="dt">Name =</span> Name...<span class="dv">6</span>, <span class="dt">Count =</span> Count...<span class="dv">7</span>)</span>
<span id="cb442-3"><a href="RDataWrangling.html#cb442-3"></a></span>
<span id="cb442-4"><a href="RDataWrangling.html#cb442-4"></a><span class="kw">bind_rows</span>(first_columns, second_columns)</span></code></pre></div>
<pre><code>## # A tibble: 100 x 2
##    Name    Count
##    &lt;chr&gt;   &lt;dbl&gt;
##  1 JACK    10779
##  2 DANIEL  10338
##  3 THOMAS   9603
##  4 JAMES    9385
##  5 JOSHUA   7887
##  6 MATTHEW  7426
##  7 RYAN     6496
##  8 JOSEPH   6193
##  9 SAMUEL   6161
## 10 LIAM     5802
## # … with 90 more rows</code></pre>
</div>
<div id="exercise-3-3" class="section level3">
<h3>Exercise 3</h3>
<p><strong>Cleanup all the data</strong></p>
<p>In the previous examples we learned how to drop empty rows with
<code>drop_na()</code>, select only relevant columns with <code>select()</code>, and re-arrange
our data with <code>select()</code> and <code>bind_rows()</code>. In each case we applied the
changes only to the first element of our <code>boysNames</code> list.</p>
<p>NOTE: some Excel files include extra blank columns between the first and second
set of <code>Name</code> and <code>Count</code> columns, resulting in different numeric suffixes
for the second set of columns. You will need to use a regular expression
to match each of these different column names. HINT: see the <code>?matches</code>
function.</p>
<ol style="list-style-type: decimal">
<li>Create a new function called <code>cleanupNamesData</code> that:</li>
</ol>
<div class="sourceCode" id="cb444"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb444-1"><a href="RDataWrangling.html#cb444-1"></a><span class="co"># 1) subsets data to include only those columns that include the term `Name` and `Count` and apply listwise deletion</span></span>
<span id="cb444-2"><a href="RDataWrangling.html#cb444-2"></a></span>
<span id="cb444-3"><a href="RDataWrangling.html#cb444-3"></a><span class="co"># 2) subset two separate data frames, with first and second set of `Name` and `Count` columns</span></span>
<span id="cb444-4"><a href="RDataWrangling.html#cb444-4"></a></span>
<span id="cb444-5"><a href="RDataWrangling.html#cb444-5"></a><span class="co"># 3) append the two datasets</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Your task now is to use the <code>map()</code> function to apply each of these
transformations to all the elements in <code>boysNames</code>.</li>
</ol>
<div class="sourceCode" id="cb445"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb445-1"><a href="RDataWrangling.html#cb445-1"></a><span class="co">## </span></span></code></pre></div>
<details>
<summary><span style="color:red"><b>Click for Exercise 3 Solution</b></span></summary>
<div class="alert alert-danger">
<ol style="list-style-type: decimal">
<li>Create a new function called <code>cleanupNamesData</code> that:</li>
</ol>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="RDataWrangling.html#cb446-1"></a>cleanupNamesData &lt;-<span class="st"> </span><span class="cf">function</span>(file){</span>
<span id="cb446-2"><a href="RDataWrangling.html#cb446-2"></a></span>
<span id="cb446-3"><a href="RDataWrangling.html#cb446-3"></a>  <span class="co"># subset data to include only those columns that include the term `Name` and `Count`</span></span>
<span id="cb446-4"><a href="RDataWrangling.html#cb446-4"></a>  subsetted_file &lt;-<span class="st"> </span>file <span class="op">%&gt;%</span></span>
<span id="cb446-5"><a href="RDataWrangling.html#cb446-5"></a><span class="st">    </span><span class="kw">select</span>(<span class="kw">matches</span>(<span class="st">&quot;Name|Count&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb446-6"><a href="RDataWrangling.html#cb446-6"></a><span class="st">    </span><span class="kw">drop_na</span>()</span>
<span id="cb446-7"><a href="RDataWrangling.html#cb446-7"></a></span>
<span id="cb446-8"><a href="RDataWrangling.html#cb446-8"></a>  <span class="co"># subset two separate data frames, with first and second set of `Name` and `Count` columns </span></span>
<span id="cb446-9"><a href="RDataWrangling.html#cb446-9"></a>  first_columns &lt;-<span class="st"> </span><span class="kw">select</span>(subsetted_file, <span class="dt">Name =</span> Name...<span class="dv">2</span>, <span class="dt">Count =</span> Count...<span class="dv">3</span>) </span>
<span id="cb446-10"><a href="RDataWrangling.html#cb446-10"></a></span>
<span id="cb446-11"><a href="RDataWrangling.html#cb446-11"></a>  second_columns &lt;-<span class="st"> </span><span class="kw">select</span>(subsetted_file, <span class="dt">Name =</span> <span class="kw">matches</span>(<span class="st">&quot;Name...6|Name...7|Name...8&quot;</span>),</span>
<span id="cb446-12"><a href="RDataWrangling.html#cb446-12"></a>                                           <span class="dt">Count =</span> <span class="kw">matches</span>(<span class="st">&quot;Count...7|Count...8|Count...9&quot;</span>))</span>
<span id="cb446-13"><a href="RDataWrangling.html#cb446-13"></a></span>
<span id="cb446-14"><a href="RDataWrangling.html#cb446-14"></a>  <span class="co"># append the two datasets</span></span>
<span id="cb446-15"><a href="RDataWrangling.html#cb446-15"></a>  <span class="kw">bind_rows</span>(first_columns, second_columns)</span>
<span id="cb446-16"><a href="RDataWrangling.html#cb446-16"></a>}</span>
<span id="cb446-17"><a href="RDataWrangling.html#cb446-17"></a></span>
<span id="cb446-18"><a href="RDataWrangling.html#cb446-18"></a></span>
<span id="cb446-19"><a href="RDataWrangling.html#cb446-19"></a><span class="co">## test it out on the second data frame in the list</span></span>
<span id="cb446-20"><a href="RDataWrangling.html#cb446-20"></a>boysNames[[<span class="dv">2</span>]] <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">glimpse</span>() <span class="co"># before cleanup</span></span></code></pre></div>
<pre><code>## Rows: 61
## Columns: 4
## $ Name...2  &lt;chr&gt; NA, &quot;JACK&quot;, &quot;JAMES&quot;, &quot;THOMAS&quot;, &quot;DANIEL&quot;, &quot;JOSHUA&quot;, &quot;MATTHEW…
## $ Count...3 &lt;dbl&gt; NA, 10145, 9853, 9479, 9047, 7698, 7443, 6367, 5809, 5631, …
## $ Name...7  &lt;chr&gt; NA, &quot;SEAN&quot;, &quot;DYLAN&quot;, &quot;DOMINIC&quot;, &quot;LOUIS&quot;, &quot;RHYS&quot;, &quot;NICHOLAS&quot;…
## $ Count...8 &lt;dbl&gt; NA, 1388, 1380, 1359, 1325, 1291, 1274, 1244, 1241, 1158, 1…</code></pre>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="RDataWrangling.html#cb448-1"></a>boysNames[[<span class="dv">2</span>]] <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">cleanupNamesData</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">glimpse</span>() <span class="co"># after cleanup</span></span></code></pre></div>
<pre><code>## Rows: 100
## Columns: 2
## $ Name  &lt;chr&gt; &quot;JACK&quot;, &quot;JAMES&quot;, &quot;THOMAS&quot;, &quot;DANIEL&quot;, &quot;JOSHUA&quot;, &quot;MATTHEW&quot;, &quot;SAMU…
## $ Count &lt;dbl&gt; 10145, 9853, 9479, 9047, 7698, 7443, 6367, 5809, 5631, 5404, 51…</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Your task now is to use the <code>map()</code> function to apply each of these transformations to all the elements in <code>boysNames</code>.</li>
</ol>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="RDataWrangling.html#cb450-1"></a>boysNames &lt;-<span class="st"> </span><span class="kw">map</span>(boysNames, cleanupNamesData)</span></code></pre></div>
</div>
</details>
</div>
</div>
<div id="data-organization-storage" class="section level2">
<h2>Data organization &amp; storage</h2>
<div class="alert alert-info">
<p><strong>GOAL: To learn how to organize the data into one large data frame and store it.</strong> In particular:</p>
<ol style="list-style-type: decimal">
<li>Create a year column within each data frame within the list</li>
<li>Append all the data frames in the list into one large data frame</li>
</ol>
</div>
<p>Now that we have the data cleaned up and augmented, we can turn our attention to organizing and storing the data.</p>
<div id="a-list-of-data-frames" class="section level3">
<h3>A list of data frames</h3>
<p>Right now we have a list of data frames; one for each year. This is not a bad way to go. It has the advantage of making it easy to work with individual years; it has the disadvantage of making it more difficult to examine questions that require data from multiple years. To make the arrangement of the data clearer it helps to name each element of the list with the year it corresponds to.</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb451-1"><a href="RDataWrangling.html#cb451-1"></a><span class="kw">head</span>(boysNames) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">glimpse</span>()</span></code></pre></div>
<pre><code>## List of 6
##  $ : tibble [100 × 2] (S3: tbl_df/tbl/data.frame)
##   ..$ Name : chr [1:100] &quot;JACK&quot; &quot;DANIEL&quot; &quot;THOMAS&quot; &quot;JAMES&quot; ...
##   ..$ Count: num [1:100] 10779 10338 9603 9385 7887 ...
##  $ : tibble [100 × 2] (S3: tbl_df/tbl/data.frame)
##   ..$ Name : chr [1:100] &quot;JACK&quot; &quot;JAMES&quot; &quot;THOMAS&quot; &quot;DANIEL&quot; ...
##   ..$ Count: num [1:100] 10145 9853 9479 9047 7698 ...
##  $ : tibble [100 × 2] (S3: tbl_df/tbl/data.frame)
##   ..$ Name : chr [1:100] &quot;JACK&quot; &quot;THOMAS&quot; &quot;JAMES&quot; &quot;DANIEL&quot; ...
##   ..$ Count: num [1:100] 9845 9468 9197 7732 7672 ...
##  $ : tibble [100 × 2] (S3: tbl_df/tbl/data.frame)
##   ..$ Name : chr [1:100] &quot;JACK&quot; &quot;THOMAS&quot; &quot;JAMES&quot; &quot;JOSHUA&quot; ...
##   ..$ Count: num [1:100] 9785 9454 8748 7275 6935 ...
##  $ : tibble [100 × 2] (S3: tbl_df/tbl/data.frame)
##   ..$ Name : chr [1:100] &quot;JACK&quot; &quot;THOMAS&quot; &quot;JAMES&quot; &quot;JOSHUA&quot; ...
##   ..$ Count: num [1:100] 9079 8672 7489 7097 6229 ...
##  $ : tibble [100 × 2] (S3: tbl_df/tbl/data.frame)
##   ..$ Name : chr [1:100] &quot;JACK&quot; &quot;THOMAS&quot; &quot;JOSHUA&quot; &quot;JAMES&quot; ...
##   ..$ Count: num [1:100] 9000 8337 7182 7026 5759 ...</code></pre>
<div class="sourceCode" id="cb453"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb453-1"><a href="RDataWrangling.html#cb453-1"></a><span class="kw">head</span>(boy_file_names)</span></code></pre></div>
<pre><code>## [1] &quot;dataSets/boys/1996boys_tcm77-254026.xlsx&quot;
## [2] &quot;dataSets/boys/1997boys_tcm77-254022.xlsx&quot;
## [3] &quot;dataSets/boys/1998boys_tcm77-254018.xlsx&quot;
## [4] &quot;dataSets/boys/1999boys_tcm77-254014.xlsx&quot;
## [5] &quot;dataSets/boys/2000boys_tcm77-254008.xlsx&quot;
## [6] &quot;dataSets/boys/2001boys_tcm77-254000.xlsx&quot;</code></pre>
<div class="sourceCode" id="cb455"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb455-1"><a href="RDataWrangling.html#cb455-1"></a><span class="co"># use regex to extract years from file names</span></span>
<span id="cb455-2"><a href="RDataWrangling.html#cb455-2"></a>Years &lt;-<span class="st"> </span><span class="kw">str_extract</span>(boy_file_names, <span class="dt">pattern =</span> <span class="st">&quot;[0-9]{4}&quot;</span>)</span>
<span id="cb455-3"><a href="RDataWrangling.html#cb455-3"></a>Years</span></code></pre></div>
<pre><code>##  [1] &quot;1996&quot; &quot;1997&quot; &quot;1998&quot; &quot;1999&quot; &quot;2000&quot; &quot;2001&quot; &quot;2002&quot; &quot;2003&quot; &quot;2004&quot; &quot;2005&quot;
## [11] &quot;2006&quot; &quot;2007&quot; &quot;2008&quot; &quot;2009&quot; &quot;2010&quot; &quot;2011&quot; &quot;2012&quot; &quot;2013&quot; &quot;2014&quot; &quot;2015&quot;</code></pre>
<div class="sourceCode" id="cb457"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb457-1"><a href="RDataWrangling.html#cb457-1"></a><span class="kw">names</span>(boysNames) <span class="co"># returns NULL - no names in the list</span></span></code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode" id="cb459"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb459-1"><a href="RDataWrangling.html#cb459-1"></a><span class="co"># assign years to list names</span></span>
<span id="cb459-2"><a href="RDataWrangling.html#cb459-2"></a><span class="kw">names</span>(boysNames) &lt;-<span class="st"> </span>Years </span>
<span id="cb459-3"><a href="RDataWrangling.html#cb459-3"></a></span>
<span id="cb459-4"><a href="RDataWrangling.html#cb459-4"></a><span class="kw">names</span>(boysNames) <span class="co"># returns the years as list names</span></span></code></pre></div>
<pre><code>##  [1] &quot;1996&quot; &quot;1997&quot; &quot;1998&quot; &quot;1999&quot; &quot;2000&quot; &quot;2001&quot; &quot;2002&quot; &quot;2003&quot; &quot;2004&quot; &quot;2005&quot;
## [11] &quot;2006&quot; &quot;2007&quot; &quot;2008&quot; &quot;2009&quot; &quot;2010&quot; &quot;2011&quot; &quot;2012&quot; &quot;2013&quot; &quot;2014&quot; &quot;2015&quot;</code></pre>
<div class="sourceCode" id="cb461"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb461-1"><a href="RDataWrangling.html#cb461-1"></a><span class="kw">head</span>(boysNames) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">glimpse</span>() </span></code></pre></div>
<pre><code>## List of 6
##  $ 1996: tibble [100 × 2] (S3: tbl_df/tbl/data.frame)
##   ..$ Name : chr [1:100] &quot;JACK&quot; &quot;DANIEL&quot; &quot;THOMAS&quot; &quot;JAMES&quot; ...
##   ..$ Count: num [1:100] 10779 10338 9603 9385 7887 ...
##  $ 1997: tibble [100 × 2] (S3: tbl_df/tbl/data.frame)
##   ..$ Name : chr [1:100] &quot;JACK&quot; &quot;JAMES&quot; &quot;THOMAS&quot; &quot;DANIEL&quot; ...
##   ..$ Count: num [1:100] 10145 9853 9479 9047 7698 ...
##  $ 1998: tibble [100 × 2] (S3: tbl_df/tbl/data.frame)
##   ..$ Name : chr [1:100] &quot;JACK&quot; &quot;THOMAS&quot; &quot;JAMES&quot; &quot;DANIEL&quot; ...
##   ..$ Count: num [1:100] 9845 9468 9197 7732 7672 ...
##  $ 1999: tibble [100 × 2] (S3: tbl_df/tbl/data.frame)
##   ..$ Name : chr [1:100] &quot;JACK&quot; &quot;THOMAS&quot; &quot;JAMES&quot; &quot;JOSHUA&quot; ...
##   ..$ Count: num [1:100] 9785 9454 8748 7275 6935 ...
##  $ 2000: tibble [100 × 2] (S3: tbl_df/tbl/data.frame)
##   ..$ Name : chr [1:100] &quot;JACK&quot; &quot;THOMAS&quot; &quot;JAMES&quot; &quot;JOSHUA&quot; ...
##   ..$ Count: num [1:100] 9079 8672 7489 7097 6229 ...
##  $ 2001: tibble [100 × 2] (S3: tbl_df/tbl/data.frame)
##   ..$ Name : chr [1:100] &quot;JACK&quot; &quot;THOMAS&quot; &quot;JOSHUA&quot; &quot;JAMES&quot; ...
##   ..$ Count: num [1:100] 9000 8337 7182 7026 5759 ...</code></pre>
</div>
<div id="one-big-data-frame" class="section level3">
<h3>One big data frame</h3>
<p>While storing the data in separate data frames by year makes some sense,
many operations will be easier if the data is simply stored in one big
data frame. We’ve already seen how to turn a list of data frames into a
single data.frame using <code>bind_rows()</code>, but there is a problem; The year
information is stored in the names of the list elements, and so
flattening the data.frames into one will result in losing the year
information! Fortunately it is not too much trouble to add the year
information to each data frame before flattening.</p>
<div class="sourceCode" id="cb463"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb463-1"><a href="RDataWrangling.html#cb463-1"></a><span class="co"># apply name of the list element (.y) as a new column in the data.frame (.x)</span></span>
<span id="cb463-2"><a href="RDataWrangling.html#cb463-2"></a>boysNames &lt;-<span class="st"> </span><span class="kw">imap</span>(boysNames, <span class="op">~</span><span class="st"> </span><span class="kw">mutate</span>(.x, <span class="dt">Year =</span> <span class="kw">as.integer</span>(.y)))</span>
<span id="cb463-3"><a href="RDataWrangling.html#cb463-3"></a></span>
<span id="cb463-4"><a href="RDataWrangling.html#cb463-4"></a>boysNames[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## $`1996`
## # A tibble: 100 x 3
##    Name    Count  Year
##    &lt;chr&gt;   &lt;dbl&gt; &lt;int&gt;
##  1 JACK    10779  1996
##  2 DANIEL  10338  1996
##  3 THOMAS   9603  1996
##  4 JAMES    9385  1996
##  5 JOSHUA   7887  1996
##  6 MATTHEW  7426  1996
##  7 RYAN     6496  1996
##  8 JOSEPH   6193  1996
##  9 SAMUEL   6161  1996
## 10 LIAM     5802  1996
## # … with 90 more rows</code></pre>
</div>
<div id="exercise-4-1" class="section level3">
<h3>Exercise 4</h3>
<p><strong>Make one big <code>data.frame</code></strong></p>
<ol style="list-style-type: decimal">
<li>Turn the list of boys names data frames into a single data frame. HINT: see <code>?bind_rows</code>.</li>
</ol>
<div class="sourceCode" id="cb465"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb465-1"><a href="RDataWrangling.html#cb465-1"></a><span class="co">## </span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Create a new directory called <code>all</code> within <code>dataSets</code> and write the data to a <code>.csv</code> file.
HINT: see the <code>?dir.create</code> and <code>?write_csv</code> functions.</li>
</ol>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="RDataWrangling.html#cb466-1"></a><span class="co">## </span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>What were the five most popular names in 2013?</li>
</ol>
<div class="sourceCode" id="cb467"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb467-1"><a href="RDataWrangling.html#cb467-1"></a><span class="co">## </span></span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>How has the popularity of the name “ANDREW” changed over time?</li>
</ol>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="RDataWrangling.html#cb468-1"></a><span class="co">## </span></span></code></pre></div>
<details>
<summary><span style="color:red"><b>Click for Exercise 4 Solution</b></span></summary>
<div class="alert alert-danger">
<ol style="list-style-type: decimal">
<li>Turn the list of boys names data frames into a single data frame.</li>
</ol>
<div class="sourceCode" id="cb469"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb469-1"><a href="RDataWrangling.html#cb469-1"></a>boysNames &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(boysNames)</span>
<span id="cb469-2"><a href="RDataWrangling.html#cb469-2"></a><span class="kw">glimpse</span>(boysNames)</span></code></pre></div>
<pre><code>## Rows: 2,000
## Columns: 3
## $ Name  &lt;chr&gt; &quot;JACK&quot;, &quot;DANIEL&quot;, &quot;THOMAS&quot;, &quot;JAMES&quot;, &quot;JOSHUA&quot;, &quot;MATTHEW&quot;, &quot;RYAN…
## $ Count &lt;dbl&gt; 10779, 10338, 9603, 9385, 7887, 7426, 6496, 6193, 6161, 5802, 5…
## $ Year  &lt;int&gt; 1996, 1996, 1996, 1996, 1996, 1996, 1996, 1996, 1996, 1996, 199…</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Create a new directory called <code>all</code> within <code>dataSets</code> and write the data to a <code>.csv</code> file. HINT: see the <code>?dir.create</code> and <code>?write_csv</code> functions.</li>
</ol>
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb471-1"><a href="RDataWrangling.html#cb471-1"></a><span class="kw">dir.create</span>(<span class="st">&quot;dataSets/all&quot;</span>)</span>
<span id="cb471-2"><a href="RDataWrangling.html#cb471-2"></a></span>
<span id="cb471-3"><a href="RDataWrangling.html#cb471-3"></a><span class="kw">write_csv</span>(boysNames, <span class="st">&quot;dataSets/all/boys_names.csv&quot;</span>)</span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>What were the five most popular names in 2013?</li>
</ol>
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb472-1"><a href="RDataWrangling.html#cb472-1"></a>boysNames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb472-2"><a href="RDataWrangling.html#cb472-2"></a><span class="st">  </span><span class="kw">filter</span>(Year <span class="op">==</span><span class="st"> </span><span class="dv">2013</span>) <span class="op">%&gt;%</span></span>
<span id="cb472-3"><a href="RDataWrangling.html#cb472-3"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(Count)) <span class="op">%&gt;%</span></span>
<span id="cb472-4"><a href="RDataWrangling.html#cb472-4"></a><span class="st">  </span><span class="kw">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   Name    Count  Year
##   &lt;chr&gt;   &lt;dbl&gt; &lt;int&gt;
## 1 OLIVER   6949  2013
## 2 JACK     6212  2013
## 3 HARRY    5888  2013
## 4 JACOB    5126  2013
## 5 CHARLIE  5039  2013
## 6 THOMAS   4591  2013</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>How has the popularity of the name “ANDREW” changed over time?</li>
</ol>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb474-1"><a href="RDataWrangling.html#cb474-1"></a>andrew &lt;-<span class="st"> </span><span class="kw">filter</span>(boysNames, Name <span class="op">==</span><span class="st"> &quot;ANDREW&quot;</span>)</span>
<span id="cb474-2"><a href="RDataWrangling.html#cb474-2"></a></span>
<span id="cb474-3"><a href="RDataWrangling.html#cb474-3"></a><span class="kw">ggplot</span>(andrew, <span class="kw">aes</span>(<span class="dt">x =</span> Year, <span class="dt">y =</span> Count)) <span class="op">+</span></span>
<span id="cb474-4"><a href="RDataWrangling.html#cb474-4"></a><span class="st">    </span><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb474-5"><a href="RDataWrangling.html#cb474-5"></a><span class="st">    </span><span class="kw">ggtitle</span>(<span class="st">&quot;Popularity of Andrew, over time&quot;</span>)</span></code></pre></div>
<p><img src="R/RDataWrangling/figures/unnamed-chunk-260-1.png" width="672" /></p>
</div>
</details>
</div>
</div>
<div id="complete-code" class="section level2">
<h2>Complete code</h2>
<ol style="list-style-type: decimal">
<li>Code for Section 1: Reading data from multiple Excel worksheets into R data frames</li>
</ol>
<div class="sourceCode" id="cb475"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb475-1"><a href="RDataWrangling.html#cb475-1"></a>boy_file_names &lt;-<span class="st"> </span><span class="kw">list.files</span>(<span class="st">&quot;dataSets/boys&quot;</span>, <span class="dt">full.names =</span> <span class="ot">TRUE</span>)</span>
<span id="cb475-2"><a href="RDataWrangling.html#cb475-2"></a></span>
<span id="cb475-3"><a href="RDataWrangling.html#cb475-3"></a>get_data_sheet_name &lt;-<span class="st"> </span><span class="cf">function</span>(file, term){</span>
<span id="cb475-4"><a href="RDataWrangling.html#cb475-4"></a>  <span class="kw">excel_sheets</span>(file) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_subset</span>(<span class="dt">pattern =</span> term)</span>
<span id="cb475-5"><a href="RDataWrangling.html#cb475-5"></a>}</span>
<span id="cb475-6"><a href="RDataWrangling.html#cb475-6"></a></span>
<span id="cb475-7"><a href="RDataWrangling.html#cb475-7"></a>read_boys_names &lt;-<span class="st"> </span><span class="cf">function</span>(file, sheet_name) {</span>
<span id="cb475-8"><a href="RDataWrangling.html#cb475-8"></a>  <span class="kw">read_excel</span>(</span>
<span id="cb475-9"><a href="RDataWrangling.html#cb475-9"></a>    <span class="dt">path =</span> file,</span>
<span id="cb475-10"><a href="RDataWrangling.html#cb475-10"></a>    <span class="dt">sheet =</span> <span class="kw">get_data_sheet_name</span>(file, <span class="dt">term =</span> sheet_name),</span>
<span id="cb475-11"><a href="RDataWrangling.html#cb475-11"></a>    <span class="dt">skip =</span> <span class="dv">6</span></span>
<span id="cb475-12"><a href="RDataWrangling.html#cb475-12"></a>  )</span>
<span id="cb475-13"><a href="RDataWrangling.html#cb475-13"></a>}</span>
<span id="cb475-14"><a href="RDataWrangling.html#cb475-14"></a></span>
<span id="cb475-15"><a href="RDataWrangling.html#cb475-15"></a>boysNames &lt;-<span class="st"> </span><span class="kw">map</span>(boy_file_names, read_boys_names, <span class="dt">sheet_name =</span> <span class="st">&quot;Table 1&quot;</span>)</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Code for Section 2: Clean up data within each R data frame</li>
</ol>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="RDataWrangling.html#cb476-1"></a>cleanupNamesData &lt;-<span class="st"> </span><span class="cf">function</span>(file){</span>
<span id="cb476-2"><a href="RDataWrangling.html#cb476-2"></a>  <span class="co"># subset data to include only those columns that include the term `Name` and `Count`</span></span>
<span id="cb476-3"><a href="RDataWrangling.html#cb476-3"></a>  subsetted_file &lt;-<span class="st"> </span>file <span class="op">%&gt;%</span></span>
<span id="cb476-4"><a href="RDataWrangling.html#cb476-4"></a><span class="st">    </span><span class="kw">select</span>(<span class="kw">matches</span>(<span class="st">&quot;Name|Count&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb476-5"><a href="RDataWrangling.html#cb476-5"></a><span class="st">    </span><span class="kw">drop_na</span>()</span>
<span id="cb476-6"><a href="RDataWrangling.html#cb476-6"></a>  <span class="co"># subset two separate data frames, with first and second set of `Name` and `Count` columns </span></span>
<span id="cb476-7"><a href="RDataWrangling.html#cb476-7"></a>  first_columns &lt;-<span class="st"> </span><span class="kw">select</span>(subsetted_file, <span class="dt">Name =</span> Name...<span class="dv">2</span>, <span class="dt">Count =</span> Count...<span class="dv">3</span>) </span>
<span id="cb476-8"><a href="RDataWrangling.html#cb476-8"></a>  second_columns &lt;-<span class="st"> </span><span class="kw">select</span>(subsetted_file, <span class="dt">Name =</span> <span class="kw">matches</span>(<span class="st">&quot;Name...6|Name...7|Name...8&quot;</span>),</span>
<span id="cb476-9"><a href="RDataWrangling.html#cb476-9"></a>                                           <span class="dt">Count =</span> <span class="kw">matches</span>(<span class="st">&quot;Count...7|Count...8|Count...9&quot;</span>))</span>
<span id="cb476-10"><a href="RDataWrangling.html#cb476-10"></a>  <span class="co"># append the two datasets</span></span>
<span id="cb476-11"><a href="RDataWrangling.html#cb476-11"></a>  <span class="kw">bind_rows</span>(first_columns, second_columns)</span>
<span id="cb476-12"><a href="RDataWrangling.html#cb476-12"></a>}</span>
<span id="cb476-13"><a href="RDataWrangling.html#cb476-13"></a></span>
<span id="cb476-14"><a href="RDataWrangling.html#cb476-14"></a>boysNames &lt;-<span class="st"> </span><span class="kw">map</span>(boysNames, cleanupNamesData)</span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Code for Section 3: Organize the data into one large data frame and store it</li>
</ol>
<div class="sourceCode" id="cb477"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb477-1"><a href="RDataWrangling.html#cb477-1"></a>Years &lt;-<span class="st"> </span><span class="kw">str_extract</span>(boy_file_names, <span class="dt">pattern =</span> <span class="st">&quot;[0-9]{4}&quot;</span>)</span>
<span id="cb477-2"><a href="RDataWrangling.html#cb477-2"></a></span>
<span id="cb477-3"><a href="RDataWrangling.html#cb477-3"></a><span class="kw">names</span>(boysNames) &lt;-<span class="st"> </span>Years</span>
<span id="cb477-4"><a href="RDataWrangling.html#cb477-4"></a></span>
<span id="cb477-5"><a href="RDataWrangling.html#cb477-5"></a>boysNames &lt;-<span class="st"> </span><span class="kw">imap</span>(boysNames, <span class="op">~</span><span class="st"> </span><span class="kw">mutate</span>(.x, <span class="dt">Year =</span> <span class="kw">as.integer</span>(.y)))</span>
<span id="cb477-6"><a href="RDataWrangling.html#cb477-6"></a></span>
<span id="cb477-7"><a href="RDataWrangling.html#cb477-7"></a>boysNames &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(boysNames)</span></code></pre></div>
</div>
<div id="wrap-up-4" class="section level2">
<h2>Wrap-up</h2>
<div id="feedback-4" class="section level3">
<h3>Feedback</h3>
<p>These workshops are a work in progress, please provide any feedback to: <a href="mailto:help@iq.harvard.edu" class="email">help@iq.harvard.edu</a></p>
</div>
<div id="resources-5" class="section level3">
<h3>Resources</h3>
<ul>
<li>IQSS
<ul>
<li>Workshops: <a href="https://dss.iq.harvard.edu/workshop-materials" class="uri">https://dss.iq.harvard.edu/workshop-materials</a></li>
<li>Data Science Services: <a href="https://dss.iq.harvard.edu/" class="uri">https://dss.iq.harvard.edu/</a></li>
<li>Research Computing Environment: <a href="https://iqss.github.io/dss-rce/" class="uri">https://iqss.github.io/dss-rce/</a></li>
</ul></li>
<li>HBS
<ul>
<li>Research Computing Services workshops: <a href="https://training.rcs.hbs.org/workshops" class="uri">https://training.rcs.hbs.org/workshops</a></li>
<li>Other HBS RCS resources: <a href="https://training.rcs.hbs.org/workshop-materials" class="uri">https://training.rcs.hbs.org/workshop-materials</a></li>
<li>RCS consulting email: <a href="mailto:research@hbs.edu" class="uri">mailto:research@hbs.edu</a></li>
</ul></li>
<li>R
<ul>
<li>Learn from the best: <a href="http://adv-r.had.co.nz/" class="uri">http://adv-r.had.co.nz/</a>; <a href="http://r4ds.had.co.nz/" class="uri">http://r4ds.had.co.nz/</a></li>
<li>R documentation: <a href="http://cran.r-project.org/manuals.html" class="uri">http://cran.r-project.org/manuals.html</a></li>
<li>Collection of R tutorials: <a href="http://cran.r-project.org/other-docs.html" class="uri">http://cran.r-project.org/other-docs.html</a></li>
<li>R for Programmers (by Norman Matloff, UC–Davis) <a href="http://heather.cs.ucdavis.edu/~matloff/R/RProg.pdf" class="uri">http://heather.cs.ucdavis.edu/~matloff/R/RProg.pdf</a></li>
<li>Calling C and Fortran from R (by Charles Geyer, UMinn) <a href="http://www.stat.umn.edu/~charlie/rc/" class="uri">http://www.stat.umn.edu/~charlie/rc/</a></li>
<li>State of the Art in Parallel Computing with R (Schmidberger et al.) <a href="http://www.jstatso" class="uri">http://www.jstatso</a>|.org/v31/i01/paper</li>
</ul></li>
</ul>

</div>
</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="Rgraphics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="PythonInstall.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/IQSS/dss-workshops/edit/master/R/RDataWrangling/RDataWrangling.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Data_Science_Workshops.pdf", "Data_Science_Workshops.epub"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
