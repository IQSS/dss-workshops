<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Python Web-Scraping | IQSS Workshops</title>
  <meta name="description" content="IQSS Data Science Workshops" />
  <meta name="generator" content="bookdown 0.13 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Python Web-Scraping | IQSS Workshops" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="IQSS Data Science Workshops" />
  <meta name="github-repo" content="IQSS/dss-workshops-redux" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Python Web-Scraping | IQSS Workshops" />
  
  <meta name="twitter:description" content="IQSS Data Science Workshops" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="PythonIntro.html"/>
<link rel="next" href="StataIntro.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">IQSS Workshop Materials</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#table-of-contents"><i class="fa fa-check"></i>Table of Contents</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#authors-and-sources"><i class="fa fa-check"></i>Authors and Sources</a></li>
</ul></li>
<li class="part"><span><b>I R</b></span></li>
<li class="chapter" data-level="1" data-path="Rintro.html"><a href="Rintro.html"><i class="fa fa-check"></i><b>1</b> R Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="Rintro.html"><a href="Rintro.html#setup-instructions"><i class="fa fa-check"></i><b>1.1</b> Setup instructions</a><ul>
<li class="chapter" data-level="1.1.1" data-path="Rintro.html"><a href="Rintro.html#workshop-goals-and-approach"><i class="fa fa-check"></i><b>1.1.1</b> Workshop goals and approach</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="Rintro.html"><a href="Rintro.html#graphical-user-interfaces-guis"><i class="fa fa-check"></i><b>1.2</b> Graphical User Interfaces (GUIs)</a><ul>
<li class="chapter" data-level="1.2.1" data-path="Rintro.html"><a href="Rintro.html#launch-rstudio-skip-if-not-using-rstudio"><i class="fa fa-check"></i><b>1.2.1</b> Launch RStudio (skip if not using Rstudio)</a></li>
<li class="chapter" data-level="1.2.2" data-path="Rintro.html"><a href="Rintro.html#exercise-0"><i class="fa fa-check"></i><b>1.2.2</b> Exercise 0</a></li>
<li class="chapter" data-level="1.2.3" data-path="Rintro.html"><a href="Rintro.html#exercise-0-solution"><i class="fa fa-check"></i><b>1.2.3</b> Exercise 0 solution</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="Rintro.html"><a href="Rintro.html#r-basics"><i class="fa fa-check"></i><b>1.3</b> R basics</a><ul>
<li class="chapter" data-level="1.3.1" data-path="Rintro.html"><a href="Rintro.html#function-calls"><i class="fa fa-check"></i><b>1.3.1</b> Function calls</a></li>
<li class="chapter" data-level="1.3.2" data-path="Rintro.html"><a href="Rintro.html#assignment"><i class="fa fa-check"></i><b>1.3.2</b> Assignment</a></li>
<li class="chapter" data-level="1.3.3" data-path="Rintro.html"><a href="Rintro.html#asking-r-for-help"><i class="fa fa-check"></i><b>1.3.3</b> Asking R for help</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="Rintro.html"><a href="Rintro.html#getting-data-into-r"><i class="fa fa-check"></i><b>1.4</b> Getting data into R</a><ul>
<li class="chapter" data-level="1.4.1" data-path="Rintro.html"><a href="Rintro.html#installing-and-using-r-packages"><i class="fa fa-check"></i><b>1.4.1</b> Installing and using R packages</a></li>
<li class="chapter" data-level="1.4.2" data-path="Rintro.html"><a href="Rintro.html#readers-for-common-file-types"><i class="fa fa-check"></i><b>1.4.2</b> Readers for common file types</a></li>
<li class="chapter" data-level="1.4.3" data-path="Rintro.html"><a href="Rintro.html#baby-names-data"><i class="fa fa-check"></i><b>1.4.3</b> Baby names data</a></li>
<li class="chapter" data-level="1.4.4" data-path="Rintro.html"><a href="Rintro.html#exercise-1-reading-the-baby-names-data"><i class="fa fa-check"></i><b>1.4.4</b> Exercise 1: Reading the baby names data</a></li>
<li class="chapter" data-level="1.4.5" data-path="Rintro.html"><a href="Rintro.html#exercise-1-solution"><i class="fa fa-check"></i><b>1.4.5</b> Exercise 1 solution</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="Rintro.html"><a href="Rintro.html#popularity-of-your-name"><i class="fa fa-check"></i><b>1.5</b> Popularity of your name</a></li>
<li class="chapter" data-level="1.6" data-path="Rintro.html"><a href="Rintro.html#filtering-and-arranging-data"><i class="fa fa-check"></i><b>1.6</b> Filtering and arranging data</a></li>
<li class="chapter" data-level="1.7" data-path="Rintro.html"><a href="Rintro.html#other-logical-operators"><i class="fa fa-check"></i><b>1.7</b> Other logical operators</a><ul>
<li class="chapter" data-level="1.7.1" data-path="Rintro.html"><a href="Rintro.html#exercise-2-peak-popularity-of-your-name"><i class="fa fa-check"></i><b>1.7.1</b> Exercise 2: Peak popularity of your name</a></li>
<li class="chapter" data-level="1.7.2" data-path="Rintro.html"><a href="Rintro.html#exercise-2-solution"><i class="fa fa-check"></i><b>1.7.2</b> Exercise 2 solution</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="Rintro.html"><a href="Rintro.html#plotting-baby-name-trends-over-time"><i class="fa fa-check"></i><b>1.8</b> Plotting baby name trends over time</a><ul>
<li class="chapter" data-level="1.8.1" data-path="Rintro.html"><a href="Rintro.html#exercise-3-plotting-peak-popularity-of-your-name"><i class="fa fa-check"></i><b>1.8.1</b> Exercise 3: Plotting peak popularity of your name</a></li>
<li class="chapter" data-level="1.8.2" data-path="Rintro.html"><a href="Rintro.html#exercise-3-solution"><i class="fa fa-check"></i><b>1.8.2</b> Exercise 3 solution</a></li>
</ul></li>
<li class="chapter" data-level="1.9" data-path="Rintro.html"><a href="Rintro.html#finding-the-most-popular-names"><i class="fa fa-check"></i><b>1.9</b> Finding the most popular names</a><ul>
<li class="chapter" data-level="1.9.1" data-path="Rintro.html"><a href="Rintro.html#computing-better-measures-of-popularity"><i class="fa fa-check"></i><b>1.9.1</b> Computing better measures of popularity</a></li>
<li class="chapter" data-level="1.9.2" data-path="Rintro.html"><a href="Rintro.html#operating-by-group"><i class="fa fa-check"></i><b>1.9.2</b> Operating by group</a></li>
<li class="chapter" data-level="1.9.3" data-path="Rintro.html"><a href="Rintro.html#exercise-4-most-popular-names"><i class="fa fa-check"></i><b>1.9.3</b> Exercise 4: Most popular names</a></li>
<li class="chapter" data-level="1.9.4" data-path="Rintro.html"><a href="Rintro.html#exercise-4-solution"><i class="fa fa-check"></i><b>1.9.4</b> Exercise 4 solution</a></li>
</ul></li>
<li class="chapter" data-level="1.10" data-path="Rintro.html"><a href="Rintro.html#percent-choosing-one-of-the-top-10-names"><i class="fa fa-check"></i><b>1.10</b> Percent choosing one of the top 10 names</a><ul>
<li class="chapter" data-level="1.10.1" data-path="Rintro.html"><a href="Rintro.html#exercise-4-popularity-of-the-most-popular-names"><i class="fa fa-check"></i><b>1.10.1</b> Exercise 4: Popularity of the most popular names</a></li>
<li class="chapter" data-level="1.10.2" data-path="Rintro.html"><a href="Rintro.html#exercise-4-solution-1"><i class="fa fa-check"></i><b>1.10.2</b> Exercise 4 solution</a></li>
</ul></li>
<li class="chapter" data-level="1.11" data-path="Rintro.html"><a href="Rintro.html#saving-our-work"><i class="fa fa-check"></i><b>1.11</b> Saving our Work</a><ul>
<li class="chapter" data-level="1.11.1" data-path="Rintro.html"><a href="Rintro.html#saving-individual-datasets"><i class="fa fa-check"></i><b>1.11.1</b> Saving individual datasets</a></li>
<li class="chapter" data-level="1.11.2" data-path="Rintro.html"><a href="Rintro.html#saving-and-loading-r-workspaces"><i class="fa fa-check"></i><b>1.11.2</b> Saving and loading R workspaces</a></li>
</ul></li>
<li class="chapter" data-level="1.12" data-path="Rintro.html"><a href="Rintro.html#wrap-up"><i class="fa fa-check"></i><b>1.12</b> Wrap-up</a><ul>
<li class="chapter" data-level="1.12.1" data-path="Rintro.html"><a href="Rintro.html#help-us-make-this-workshop-better"><i class="fa fa-check"></i><b>1.12.1</b> Help us make this workshop better!</a></li>
<li class="chapter" data-level="1.12.2" data-path="Rintro.html"><a href="Rintro.html#additional-resources"><i class="fa fa-check"></i><b>1.12.2</b> Additional resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Rmodels.html"><a href="Rmodels.html"><i class="fa fa-check"></i><b>2</b> R Regression Models</a><ul>
<li class="chapter" data-level="2.1" data-path="Rmodels.html"><a href="Rmodels.html#setup-instructions-1"><i class="fa fa-check"></i><b>2.1</b> Setup instructions</a><ul>
<li class="chapter" data-level="2.1.1" data-path="Rmodels.html"><a href="Rmodels.html#launch-rstudio"><i class="fa fa-check"></i><b>2.1.1</b> Launch RStudio</a></li>
<li class="chapter" data-level="2.1.2" data-path="Rmodels.html"><a href="Rmodels.html#set-working-directory"><i class="fa fa-check"></i><b>2.1.2</b> Set working directory</a></li>
<li class="chapter" data-level="2.1.3" data-path="Rmodels.html"><a href="Rmodels.html#load-the-states-data"><i class="fa fa-check"></i><b>2.1.3</b> Load the states data</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="Rmodels.html"><a href="Rmodels.html#ordinary-least-squares-ols-regression"><i class="fa fa-check"></i><b>2.2</b> Ordinary least squares (OLS) regression</a><ul>
<li class="chapter" data-level="2.2.1" data-path="Rmodels.html"><a href="Rmodels.html#examine-the-data-before-fitting-models"><i class="fa fa-check"></i><b>2.2.1</b> Examine the data before fitting models</a></li>
<li class="chapter" data-level="2.2.2" data-path="Rmodels.html"><a href="Rmodels.html#plot-the-data-before-fitting-models"><i class="fa fa-check"></i><b>2.2.2</b> Plot the data before fitting models</a></li>
<li class="chapter" data-level="2.2.3" data-path="Rmodels.html"><a href="Rmodels.html#ols-example"><i class="fa fa-check"></i><b>2.2.3</b> OLS example</a></li>
<li class="chapter" data-level="2.2.4" data-path="Rmodels.html"><a href="Rmodels.html#why-is-the-association-between-expense-and-sat-scores-negative"><i class="fa fa-check"></i><b>2.2.4</b> Why is the association between expense and SAT scores <em>negative</em>?</a></li>
<li class="chapter" data-level="2.2.5" data-path="Rmodels.html"><a href="Rmodels.html#the-lm-class-and-methods"><i class="fa fa-check"></i><b>2.2.5</b> The lm class and methods</a></li>
<li class="chapter" data-level="2.2.6" data-path="Rmodels.html"><a href="Rmodels.html#ols-regression-assumptions"><i class="fa fa-check"></i><b>2.2.6</b> OLS Regression Assumptions</a></li>
<li class="chapter" data-level="2.2.7" data-path="Rmodels.html"><a href="Rmodels.html#comparing-models"><i class="fa fa-check"></i><b>2.2.7</b> Comparing models</a></li>
<li class="chapter" data-level="2.2.8" data-path="Rmodels.html"><a href="Rmodels.html#exercise-0-ordinary-least-squares-regression"><i class="fa fa-check"></i><b>2.2.8</b> Exercise 0: ordinary least squares regression</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="Rmodels.html"><a href="Rmodels.html#interactions-and-factors"><i class="fa fa-check"></i><b>2.3</b> Interactions and factors</a><ul>
<li class="chapter" data-level="2.3.1" data-path="Rmodels.html"><a href="Rmodels.html#modeling-interactions"><i class="fa fa-check"></i><b>2.3.1</b> Modeling interactions</a></li>
<li class="chapter" data-level="2.3.2" data-path="Rmodels.html"><a href="Rmodels.html#regression-with-categorical-predictors"><i class="fa fa-check"></i><b>2.3.2</b> Regression with categorical predictors</a></li>
<li class="chapter" data-level="2.3.3" data-path="Rmodels.html"><a href="Rmodels.html#setting-factor-reference-groups-and-contrasts"><i class="fa fa-check"></i><b>2.3.3</b> Setting factor reference groups and contrasts</a></li>
<li class="chapter" data-level="2.3.4" data-path="Rmodels.html"><a href="Rmodels.html#exercise-1-interactions-and-factors"><i class="fa fa-check"></i><b>2.3.4</b> Exercise 1: interactions and factors</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="Rmodels.html"><a href="Rmodels.html#regression-with-binary-outcomes"><i class="fa fa-check"></i><b>2.4</b> Regression with binary outcomes</a><ul>
<li class="chapter" data-level="2.4.1" data-path="Rmodels.html"><a href="Rmodels.html#logistic-regression"><i class="fa fa-check"></i><b>2.4.1</b> Logistic regression</a></li>
<li class="chapter" data-level="2.4.2" data-path="Rmodels.html"><a href="Rmodels.html#logistic-regression-example"><i class="fa fa-check"></i><b>2.4.2</b> Logistic regression example</a></li>
<li class="chapter" data-level="2.4.3" data-path="Rmodels.html"><a href="Rmodels.html#logistic-regression-coefficients"><i class="fa fa-check"></i><b>2.4.3</b> Logistic regression coefficients</a></li>
<li class="chapter" data-level="2.4.4" data-path="Rmodels.html"><a href="Rmodels.html#generating-predicted-values"><i class="fa fa-check"></i><b>2.4.4</b> Generating predicted values</a></li>
<li class="chapter" data-level="2.4.5" data-path="Rmodels.html"><a href="Rmodels.html#packages-for-computing-and-graphing-predicted-values"><i class="fa fa-check"></i><b>2.4.5</b> Packages for computing and graphing predicted values</a></li>
<li class="chapter" data-level="2.4.6" data-path="Rmodels.html"><a href="Rmodels.html#exercise-2-logistic-regression"><i class="fa fa-check"></i><b>2.4.6</b> Exercise 2: logistic regression</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="Rmodels.html"><a href="Rmodels.html#multilevel-modeling"><i class="fa fa-check"></i><b>2.5</b> Multilevel Modeling</a><ul>
<li class="chapter" data-level="2.5.1" data-path="Rmodels.html"><a href="Rmodels.html#multilevel-modeling-overview"><i class="fa fa-check"></i><b>2.5.1</b> Multilevel modeling overview</a></li>
<li class="chapter" data-level="2.5.2" data-path="Rmodels.html"><a href="Rmodels.html#the-exam-data"><i class="fa fa-check"></i><b>2.5.2</b> The Exam data</a></li>
<li class="chapter" data-level="2.5.3" data-path="Rmodels.html"><a href="Rmodels.html#the-null-model-and-icc"><i class="fa fa-check"></i><b>2.5.3</b> The null model and ICC</a></li>
<li class="chapter" data-level="2.5.4" data-path="Rmodels.html"><a href="Rmodels.html#adding-fixed-effects-predictors"><i class="fa fa-check"></i><b>2.5.4</b> Adding fixed-effects predictors</a></li>
<li class="chapter" data-level="2.5.5" data-path="Rmodels.html"><a href="Rmodels.html#multiple-degree-of-freedom-comparisons"><i class="fa fa-check"></i><b>2.5.5</b> Multiple degree of freedom comparisons</a></li>
<li class="chapter" data-level="2.5.6" data-path="Rmodels.html"><a href="Rmodels.html#random-slopes"><i class="fa fa-check"></i><b>2.5.6</b> Random slopes</a></li>
<li class="chapter" data-level="2.5.7" data-path="Rmodels.html"><a href="Rmodels.html#test-the-significance-of-the-random-slope"><i class="fa fa-check"></i><b>2.5.7</b> Test the significance of the random slope</a></li>
<li class="chapter" data-level="2.5.8" data-path="Rmodels.html"><a href="Rmodels.html#exercise-3-multilevel-modeling"><i class="fa fa-check"></i><b>2.5.8</b> Exercise 3: multilevel modeling</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="Rmodels.html"><a href="Rmodels.html#exercise-solutions"><i class="fa fa-check"></i><b>2.6</b> Exercise solutions</a><ul>
<li class="chapter" data-level="2.6.1" data-path="Rmodels.html"><a href="Rmodels.html#exercise-0-prototype"><i class="fa fa-check"></i><b>2.6.1</b> Exercise 0 prototype</a></li>
<li class="chapter" data-level="2.6.2" data-path="Rmodels.html"><a href="Rmodels.html#exercise-1-prototype"><i class="fa fa-check"></i><b>2.6.2</b> Exercise 1: prototype</a></li>
<li class="chapter" data-level="2.6.3" data-path="Rmodels.html"><a href="Rmodels.html#exercise-2-prototype"><i class="fa fa-check"></i><b>2.6.3</b> Exercise 2 prototype</a></li>
<li class="chapter" data-level="2.6.4" data-path="Rmodels.html"><a href="Rmodels.html#exercise-3-prototype"><i class="fa fa-check"></i><b>2.6.4</b> Exercise 3 prototype</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="Rmodels.html"><a href="Rmodels.html#wrap-up-1"><i class="fa fa-check"></i><b>2.7</b> Wrap-up</a><ul>
<li class="chapter" data-level="2.7.1" data-path="Rmodels.html"><a href="Rmodels.html#help-us-make-this-workshop-better-1"><i class="fa fa-check"></i><b>2.7.1</b> Help us make this workshop better!</a></li>
<li class="chapter" data-level="2.7.2" data-path="Rmodels.html"><a href="Rmodels.html#additional-resources-1"><i class="fa fa-check"></i><b>2.7.2</b> Additional resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="Rgraphics.html"><a href="Rgraphics.html"><i class="fa fa-check"></i><b>3</b> R Graphics</a><ul>
<li class="chapter" data-level="3.1" data-path="Rgraphics.html"><a href="Rgraphics.html#setup-instructions-2"><i class="fa fa-check"></i><b>3.1</b> Setup instructions</a><ul>
<li class="chapter" data-level="3.1.1" data-path="Rgraphics.html"><a href="Rgraphics.html#laptop-users-you-should-have-r-installed-if-not"><i class="fa fa-check"></i><b>3.1.1</b> Laptop users: You should have R installed; if not:</a></li>
<li class="chapter" data-level="3.1.2" data-path="Rgraphics.html"><a href="Rgraphics.html#everyone-download-workshop-materials"><i class="fa fa-check"></i><b>3.1.2</b> Everyone: Download workshop materials:</a></li>
<li class="chapter" data-level="3.1.3" data-path="Rgraphics.html"><a href="Rgraphics.html#everyone-install-the-tidyverse-package"><i class="fa fa-check"></i><b>3.1.3</b> Everyone: install the tidyverse package</a></li>
<li class="chapter" data-level="3.1.4" data-path="Rgraphics.html"><a href="Rgraphics.html#workshop-overview"><i class="fa fa-check"></i><b>3.1.4</b> Workshop Overview</a></li>
<li class="chapter" data-level="3.1.5" data-path="Rgraphics.html"><a href="Rgraphics.html#starting-at-the-end"><i class="fa fa-check"></i><b>3.1.5</b> Starting At The End</a></li>
<li class="chapter" data-level="3.1.6" data-path="Rgraphics.html"><a href="Rgraphics.html#why-ggplot2"><i class="fa fa-check"></i><b>3.1.6</b> Why <code>ggplot2</code>?</a></li>
<li class="chapter" data-level="3.1.7" data-path="Rgraphics.html"><a href="Rgraphics.html#what-is-the-grammar-of-graphics"><i class="fa fa-check"></i><b>3.1.7</b> What Is The Grammar Of Graphics?</a></li>
<li class="chapter" data-level="3.1.8" data-path="Rgraphics.html"><a href="Rgraphics.html#example-data-housing-prices"><i class="fa fa-check"></i><b>3.1.8</b> Example Data: <code>Housing prices</code></a></li>
<li class="chapter" data-level="3.1.9" data-path="Rgraphics.html"><a href="Rgraphics.html#ggplot2-vs-base-graphics"><i class="fa fa-check"></i><b>3.1.9</b> <code>ggplot2</code> VS Base Graphics</a></li>
<li class="chapter" data-level="3.1.10" data-path="Rgraphics.html"><a href="Rgraphics.html#ggplot2-vs-base-for-simple-graphs"><i class="fa fa-check"></i><b>3.1.10</b> <code>ggplot2</code> VS Base for simple graphs</a></li>
<li class="chapter" data-level="3.1.11" data-path="Rgraphics.html"><a href="Rgraphics.html#ggplot2-base-graphics-vs-ggplot-for-more-complex-graphs"><i class="fa fa-check"></i><b>3.1.11</b> <code>ggplot2</code> Base graphics VS <code>ggplot</code> for more complex graphs:</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="Rgraphics.html"><a href="Rgraphics.html#geometric-objects-and-aesthetics"><i class="fa fa-check"></i><b>3.2</b> Geometric Objects And Aesthetics</a><ul>
<li class="chapter" data-level="3.2.1" data-path="Rgraphics.html"><a href="Rgraphics.html#aesthetic-mapping"><i class="fa fa-check"></i><b>3.2.1</b> Aesthetic Mapping</a></li>
<li class="chapter" data-level="3.2.2" data-path="Rgraphics.html"><a href="Rgraphics.html#geometic-objects-geom"><i class="fa fa-check"></i><b>3.2.2</b> Geometic Objects (<code>geom</code>)</a></li>
<li class="chapter" data-level="3.2.3" data-path="Rgraphics.html"><a href="Rgraphics.html#points-scatterplot"><i class="fa fa-check"></i><b>3.2.3</b> Points (Scatterplot)</a></li>
<li class="chapter" data-level="3.2.4" data-path="Rgraphics.html"><a href="Rgraphics.html#lines-prediction-line"><i class="fa fa-check"></i><b>3.2.4</b> Lines (Prediction Line)</a></li>
<li class="chapter" data-level="3.2.5" data-path="Rgraphics.html"><a href="Rgraphics.html#smoothers"><i class="fa fa-check"></i><b>3.2.5</b> Smoothers</a></li>
<li class="chapter" data-level="3.2.6" data-path="Rgraphics.html"><a href="Rgraphics.html#text-label-points"><i class="fa fa-check"></i><b>3.2.6</b> Text (Label Points)</a></li>
<li class="chapter" data-level="3.2.7" data-path="Rgraphics.html"><a href="Rgraphics.html#aesthetic-mapping-vs-assignment"><i class="fa fa-check"></i><b>3.2.7</b> Aesthetic Mapping VS Assignment</a></li>
<li class="chapter" data-level="3.2.8" data-path="Rgraphics.html"><a href="Rgraphics.html#mapping-variables-to-other-aesthetics"><i class="fa fa-check"></i><b>3.2.8</b> Mapping Variables To Other Aesthetics</a></li>
<li class="chapter" data-level="3.2.9" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-i"><i class="fa fa-check"></i><b>3.2.9</b> Exercise I</a></li>
<li class="chapter" data-level="3.2.10" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-i-prototype"><i class="fa fa-check"></i><b>3.2.10</b> Exercise I prototype:</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="Rgraphics.html"><a href="Rgraphics.html#statistical-transformations"><i class="fa fa-check"></i><b>3.3</b> Statistical Transformations</a><ul>
<li class="chapter" data-level="3.3.1" data-path="Rgraphics.html"><a href="Rgraphics.html#statistical-transformations-1"><i class="fa fa-check"></i><b>3.3.1</b> Statistical Transformations</a></li>
<li class="chapter" data-level="3.3.2" data-path="Rgraphics.html"><a href="Rgraphics.html#setting-statistical-transformation-arguments"><i class="fa fa-check"></i><b>3.3.2</b> Setting Statistical Transformation Arguments</a></li>
<li class="chapter" data-level="3.3.3" data-path="Rgraphics.html"><a href="Rgraphics.html#changing-the-statistical-transformation"><i class="fa fa-check"></i><b>3.3.3</b> Changing The Statistical Transformation</a></li>
<li class="chapter" data-level="3.3.4" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-ii"><i class="fa fa-check"></i><b>3.3.4</b> Exercise II</a></li>
<li class="chapter" data-level="3.3.5" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-ii-prototype"><i class="fa fa-check"></i><b>3.3.5</b> Exercise II prototype:</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="Rgraphics.html"><a href="Rgraphics.html#scales"><i class="fa fa-check"></i><b>3.4</b> Scales</a><ul>
<li class="chapter" data-level="3.4.1" data-path="Rgraphics.html"><a href="Rgraphics.html#scales-controlling-aesthetic-mapping"><i class="fa fa-check"></i><b>3.4.1</b> Scales: Controlling Aesthetic Mapping</a></li>
<li class="chapter" data-level="3.4.2" data-path="Rgraphics.html"><a href="Rgraphics.html#common-scale-arguments"><i class="fa fa-check"></i><b>3.4.2</b> Common Scale Arguments</a></li>
<li class="chapter" data-level="3.4.3" data-path="Rgraphics.html"><a href="Rgraphics.html#scale-modification-examples"><i class="fa fa-check"></i><b>3.4.3</b> Scale Modification Examples</a></li>
<li class="chapter" data-level="3.4.4" data-path="Rgraphics.html"><a href="Rgraphics.html#using-different-color-scales"><i class="fa fa-check"></i><b>3.4.4</b> Using different color scales</a></li>
<li class="chapter" data-level="3.4.5" data-path="Rgraphics.html"><a href="Rgraphics.html#available-scales"><i class="fa fa-check"></i><b>3.4.5</b> Available Scales</a></li>
<li class="chapter" data-level="3.4.6" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-iii"><i class="fa fa-check"></i><b>3.4.6</b> Exercise III</a></li>
<li class="chapter" data-level="3.4.7" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-iii-prototype-prototype"><i class="fa fa-check"></i><b>3.4.7</b> Exercise III prototype :prototype:</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="Rgraphics.html"><a href="Rgraphics.html#faceting"><i class="fa fa-check"></i><b>3.5</b> Faceting</a><ul>
<li class="chapter" data-level="3.5.1" data-path="Rgraphics.html"><a href="Rgraphics.html#faceting-1"><i class="fa fa-check"></i><b>3.5.1</b> Faceting</a></li>
<li class="chapter" data-level="3.5.2" data-path="Rgraphics.html"><a href="Rgraphics.html#what-is-the-trend-in-housing-prices-in-each-state"><i class="fa fa-check"></i><b>3.5.2</b> What is the trend in housing prices in each state?</a></li>
<li class="chapter" data-level="3.5.3" data-path="Rgraphics.html"><a href="Rgraphics.html#faceting-to-the-rescue"><i class="fa fa-check"></i><b>3.5.3</b> Faceting to the rescue</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="Rgraphics.html"><a href="Rgraphics.html#themes"><i class="fa fa-check"></i><b>3.6</b> Themes</a><ul>
<li class="chapter" data-level="3.6.1" data-path="Rgraphics.html"><a href="Rgraphics.html#themes-1"><i class="fa fa-check"></i><b>3.6.1</b> Themes</a></li>
<li class="chapter" data-level="3.6.2" data-path="Rgraphics.html"><a href="Rgraphics.html#overriding-theme-defaults"><i class="fa fa-check"></i><b>3.6.2</b> Overriding theme defaults</a></li>
<li class="chapter" data-level="3.6.3" data-path="Rgraphics.html"><a href="Rgraphics.html#creating-and-saving-new-themes"><i class="fa fa-check"></i><b>3.6.3</b> Creating and saving new themes</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="Rgraphics.html"><a href="Rgraphics.html#the-1-faq"><i class="fa fa-check"></i><b>3.7</b> The #1 FAQ</a><ul>
<li class="chapter" data-level="3.7.1" data-path="Rgraphics.html"><a href="Rgraphics.html#map-aesthetic-to-different-columns"><i class="fa fa-check"></i><b>3.7.1</b> Map Aesthetic To Different Columns</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="Rgraphics.html"><a href="Rgraphics.html#putting-it-all-together"><i class="fa fa-check"></i><b>3.8</b> Putting It All Together</a><ul>
<li class="chapter" data-level="3.8.1" data-path="Rgraphics.html"><a href="Rgraphics.html#challenge-recreate-this-economist-graph"><i class="fa fa-check"></i><b>3.8.1</b> Challenge: Recreate This <code>Economist</code> Graph</a></li>
<li class="chapter" data-level="3.8.2" data-path="Rgraphics.html"><a href="Rgraphics.html#challenge-solution"><i class="fa fa-check"></i><b>3.8.2</b> Challenge Solution:</a></li>
<li class="chapter" data-level="3.8.3" data-path="Rgraphics.html"><a href="Rgraphics.html#adding-the-trend-line"><i class="fa fa-check"></i><b>3.8.3</b> Adding the trend line</a></li>
<li class="chapter" data-level="3.8.4" data-path="Rgraphics.html"><a href="Rgraphics.html#use-open-points"><i class="fa fa-check"></i><b>3.8.4</b> Use open points</a></li>
<li class="chapter" data-level="3.8.5" data-path="Rgraphics.html"><a href="Rgraphics.html#labelling-points"><i class="fa fa-check"></i><b>3.8.5</b> Labelling points</a></li>
<li class="chapter" data-level="3.8.6" data-path="Rgraphics.html"><a href="Rgraphics.html#change-the-region-labels-and-order"><i class="fa fa-check"></i><b>3.8.6</b> Change the region labels and order</a></li>
<li class="chapter" data-level="3.8.7" data-path="Rgraphics.html"><a href="Rgraphics.html#add-title-and-format-axes"><i class="fa fa-check"></i><b>3.8.7</b> Add title and format axes</a></li>
<li class="chapter" data-level="3.8.8" data-path="Rgraphics.html"><a href="Rgraphics.html#theme-tweaks"><i class="fa fa-check"></i><b>3.8.8</b> Theme tweaks</a></li>
<li class="chapter" data-level="3.8.9" data-path="Rgraphics.html"><a href="Rgraphics.html#add-model-r2-and-source-note"><i class="fa fa-check"></i><b>3.8.9</b> Add model R<sup>2</sup> and source note</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="Rgraphics.html"><a href="Rgraphics.html#wrap-up-2"><i class="fa fa-check"></i><b>3.9</b> Wrap-up</a><ul>
<li class="chapter" data-level="3.9.1" data-path="Rgraphics.html"><a href="Rgraphics.html#help-us-make-this-workshop-better-2"><i class="fa fa-check"></i><b>3.9.1</b> Help Us Make This Workshop Better!</a></li>
<li class="chapter" data-level="3.9.2" data-path="Rgraphics.html"><a href="Rgraphics.html#additional-resources-2"><i class="fa fa-check"></i><b>3.9.2</b> Additional resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="RDataWrangling.html"><a href="RDataWrangling.html"><i class="fa fa-check"></i><b>4</b> R Data Wrangling</a><ul>
<li class="chapter" data-level="4.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#setup-instructions-3"><i class="fa fa-check"></i><b>4.1</b> Setup instructions</a><ul>
<li class="chapter" data-level="4.1.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#workshop-description"><i class="fa fa-check"></i><b>4.1.1</b> Workshop description</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#example-project-overview"><i class="fa fa-check"></i><b>4.2</b> Example project overview</a><ul>
<li class="chapter" data-level="4.2.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#problems-with-the-data"><i class="fa fa-check"></i><b>4.2.1</b> Problems with the data</a></li>
<li class="chapter" data-level="4.2.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-0-1"><i class="fa fa-check"></i><b>4.2.2</b> Exercise 0</a></li>
<li class="chapter" data-level="4.2.3" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-0-prototype-1"><i class="fa fa-check"></i><b>4.2.3</b> Exercise 0 Prototype</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="RDataWrangling.html"><a href="RDataWrangling.html#useful-data-manipulation-packages"><i class="fa fa-check"></i><b>4.3</b> Useful data manipulation packages</a></li>
<li class="chapter" data-level="4.4" data-path="RDataWrangling.html"><a href="RDataWrangling.html#working-with-excel-worksheets"><i class="fa fa-check"></i><b>4.4</b> Working with Excel worksheets</a><ul>
<li class="chapter" data-level="4.4.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#iterating-over-file-names-with-map"><i class="fa fa-check"></i><b>4.4.1</b> Iterating over file names with <code>map</code></a></li>
<li class="chapter" data-level="4.4.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#filtering-strings-using-regular-expressions"><i class="fa fa-check"></i><b>4.4.2</b> Filtering strings using regular expressions</a></li>
<li class="chapter" data-level="4.4.3" data-path="RDataWrangling.html"><a href="RDataWrangling.html#writing-your-own-functions"><i class="fa fa-check"></i><b>4.4.3</b> Writing your own functions</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="RDataWrangling.html"><a href="RDataWrangling.html#reading-excel-data-files"><i class="fa fa-check"></i><b>4.5</b> Reading Excel data files</a><ul>
<li class="chapter" data-level="4.5.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-1"><i class="fa fa-check"></i><b>4.5.1</b> Exercise 1</a></li>
<li class="chapter" data-level="4.5.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-1-solution-1"><i class="fa fa-check"></i><b>4.5.2</b> Exercise 1 solution</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="RDataWrangling.html"><a href="RDataWrangling.html#data-cleanup"><i class="fa fa-check"></i><b>4.6</b> Data cleanup</a><ul>
<li class="chapter" data-level="4.6.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#selecting-columns"><i class="fa fa-check"></i><b>4.6.1</b> Selecting columns</a></li>
<li class="chapter" data-level="4.6.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#dropping-missing-values"><i class="fa fa-check"></i><b>4.6.2</b> Dropping missing values</a></li>
<li class="chapter" data-level="4.6.3" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-2"><i class="fa fa-check"></i><b>4.6.3</b> Exercise 2</a></li>
<li class="chapter" data-level="4.6.4" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-2-prototype-1"><i class="fa fa-check"></i><b>4.6.4</b> Exercise 2 prototype</a></li>
<li class="chapter" data-level="4.6.5" data-path="RDataWrangling.html"><a href="RDataWrangling.html#re-arranging-into-a-single-table"><i class="fa fa-check"></i><b>4.6.5</b> Re-arranging into a single table</a></li>
<li class="chapter" data-level="4.6.6" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-3-cleanup-all-the-data"><i class="fa fa-check"></i><b>4.6.6</b> Exercise 3: Cleanup all the data</a></li>
<li class="chapter" data-level="4.6.7" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-prototype"><i class="fa fa-check"></i><b>4.6.7</b> Exercise prototype</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="RDataWrangling.html"><a href="RDataWrangling.html#data-organization-and-storage"><i class="fa fa-check"></i><b>4.7</b> Data organization and storage</a><ul>
<li class="chapter" data-level="4.7.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#one-table-for-each-year"><i class="fa fa-check"></i><b>4.7.1</b> One table for each year</a></li>
<li class="chapter" data-level="4.7.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#one-big-table"><i class="fa fa-check"></i><b>4.7.2</b> One big table</a></li>
<li class="chapter" data-level="4.7.3" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-make-one-big-table"><i class="fa fa-check"></i><b>4.7.3</b> Exercise: Make one big table</a></li>
<li class="chapter" data-level="4.7.4" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-prototype-1"><i class="fa fa-check"></i><b>4.7.4</b> Exercise prototype</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="RDataWrangling.html"><a href="RDataWrangling.html#additional-reading-and-resources"><i class="fa fa-check"></i><b>4.8</b> Additional reading and resources</a></li>
</ul></li>
<li class="part"><span><b>II Python</b></span></li>
<li class="chapter" data-level="5" data-path="PythonIntro.html"><a href="PythonIntro.html"><i class="fa fa-check"></i><b>5</b> Python Introduction</a><ul>
<li class="chapter" data-level="5.1" data-path="PythonIntro.html"><a href="PythonIntro.html#setup-instructions-4"><i class="fa fa-check"></i><b>5.1</b> Setup instructions</a><ul>
<li class="chapter" data-level="5.1.1" data-path="PythonIntro.html"><a href="PythonIntro.html#install-the-anaconda-python-distribution"><i class="fa fa-check"></i><b>5.1.1</b> Install the Anaconda Python distribution</a></li>
<li class="chapter" data-level="5.1.2" data-path="PythonIntro.html"><a href="PythonIntro.html#download-workshop-materials"><i class="fa fa-check"></i><b>5.1.2</b> Download workshop materials</a></li>
<li class="chapter" data-level="5.1.3" data-path="PythonIntro.html"><a href="PythonIntro.html#launch-jupyter-notebook"><i class="fa fa-check"></i><b>5.1.3</b> Launch Jupyter Notebook</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="PythonIntro.html"><a href="PythonIntro.html#workshop-goals-and-approach-1"><i class="fa fa-check"></i><b>5.2</b> Workshop goals and approach</a></li>
<li class="chapter" data-level="5.3" data-path="PythonIntro.html"><a href="PythonIntro.html#what-is-python"><i class="fa fa-check"></i><b>5.3</b> What is Python?</a></li>
<li class="chapter" data-level="5.4" data-path="PythonIntro.html"><a href="PythonIntro.html#how-can-i-interact-with-python"><i class="fa fa-check"></i><b>5.4</b> How can I interact with Python?</a></li>
<li class="chapter" data-level="5.5" data-path="PythonIntro.html"><a href="PythonIntro.html#reading-the-text-of-alice-in-wonderland-from-a-file"><i class="fa fa-check"></i><b>5.5</b> Reading the text of Alice in Wonderland from a file</a></li>
<li class="chapter" data-level="5.6" data-path="PythonIntro.html"><a href="PythonIntro.html#counting-chapters-lines-and-words"><i class="fa fa-check"></i><b>5.6</b> Counting chapters, lines, and words</a><ul>
<li class="chapter" data-level="5.6.1" data-path="PythonIntro.html"><a href="PythonIntro.html#splitting-a-string-into-a-list-of-words"><i class="fa fa-check"></i><b>5.6.1</b> Splitting a string into a list of words</a></li>
<li class="chapter" data-level="5.6.2" data-path="PythonIntro.html"><a href="PythonIntro.html#using-sets-to-calculate-the-number-of-unique-words"><i class="fa fa-check"></i><b>5.6.2</b> Using sets to calculate the number of unique words</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="PythonIntro.html"><a href="PythonIntro.html#exercise-reading-text-from-a-file-and-splitting"><i class="fa fa-check"></i><b>5.7</b> Exercise: Reading text from a file and splitting</a><ul>
<li class="chapter" data-level="5.7.1" data-path="PythonIntro.html"><a href="PythonIntro.html#working-with-lists"><i class="fa fa-check"></i><b>5.7.1</b> Working with lists</a></li>
<li class="chapter" data-level="5.7.2" data-path="PythonIntro.html"><a href="PythonIntro.html#counting-chapters-and-paragraphs"><i class="fa fa-check"></i><b>5.7.2</b> Counting chapters and paragraphs</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="PythonIntro.html"><a href="PythonIntro.html#exercise-count-the-number-of-main-characters"><i class="fa fa-check"></i><b>5.8</b> Exercise: count the number of main characters</a></li>
<li class="chapter" data-level="5.9" data-path="PythonIntro.html"><a href="PythonIntro.html#working-with-nested-structures-words-within-paragraphs-within-chapters"><i class="fa fa-check"></i><b>5.9</b> Working with nested structures: words within paragraphs within chapters</a><ul>
<li class="chapter" data-level="5.9.1" data-path="PythonIntro.html"><a href="PythonIntro.html#iterating-over-paragraphs-using-for-loops"><i class="fa fa-check"></i><b>5.9.1</b> Iterating over paragraphs using for-loops</a></li>
<li class="chapter" data-level="5.9.2" data-path="PythonIntro.html"><a href="PythonIntro.html#iterating-and-collecting-paragraphs-per-chapter-using-list-comprehension"><i class="fa fa-check"></i><b>5.9.2</b> Iterating and collecting paragraphs per chapter using list comprehension</a></li>
<li class="chapter" data-level="5.9.3" data-path="PythonIntro.html"><a href="PythonIntro.html#organizing-results-in-dictionaries"><i class="fa fa-check"></i><b>5.9.3</b> Organizing results in dictionaries</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="PythonIntro.html"><a href="PythonIntro.html#exercise-iterating-and-counting-things"><i class="fa fa-check"></i><b>5.10</b> Exercise: Iterating and counting things</a></li>
<li class="chapter" data-level="5.11" data-path="PythonIntro.html"><a href="PythonIntro.html#importing-numpy-and-calculating-simple-statistics"><i class="fa fa-check"></i><b>5.11</b> Importing numpy and calculating simple statistics</a></li>
<li class="chapter" data-level="5.12" data-path="PythonIntro.html"><a href="PythonIntro.html#where-to-go-from-here"><i class="fa fa-check"></i><b>5.12</b> Where to go from here</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html"><i class="fa fa-check"></i><b>6</b> Python Web-Scraping</a><ul>
<li class="chapter" data-level="6.1" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#setup-instructions-5"><i class="fa fa-check"></i><b>6.1</b> Setup instructions</a><ul>
<li class="chapter" data-level="6.1.1" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#install-the-anaconda-python-distribution-1"><i class="fa fa-check"></i><b>6.1.1</b> Install the Anaconda Python distribution</a></li>
<li class="chapter" data-level="6.1.2" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#workshop-notes"><i class="fa fa-check"></i><b>6.1.2</b> Workshop notes</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#workshop-goals-and-approach-2"><i class="fa fa-check"></i><b>6.2</b> Workshop goals and approach</a></li>
<li class="chapter" data-level="6.3" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#preliminary-questions"><i class="fa fa-check"></i><b>6.3</b> Preliminary questions</a><ul>
<li class="chapter" data-level="6.3.1" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#what-is-web-scraping"><i class="fa fa-check"></i><b>6.3.1</b> What is web scraping?</a></li>
<li class="chapter" data-level="6.3.2" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#is-web-scraping-legal-is-it-ethical"><i class="fa fa-check"></i><b>6.3.2</b> Is web scraping legal? Is it ethical?</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#example-project-overview-and-goals"><i class="fa fa-check"></i><b>6.4</b> Example project overview and goals</a></li>
<li class="chapter" data-level="6.5" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#take-shortcuts-if-you-can"><i class="fa fa-check"></i><b>6.5</b> Take shortcuts if you can</a><ul>
<li class="chapter" data-level="6.5.1" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#examining-the-structure-of-our-target-web-service"><i class="fa fa-check"></i><b>6.5.1</b> Examining the structure of our target web service</a></li>
<li class="chapter" data-level="6.5.2" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#making-requests-using-python"><i class="fa fa-check"></i><b>6.5.2</b> Making requests using python</a></li>
<li class="chapter" data-level="6.5.3" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#organizing-and-saving-the-data"><i class="fa fa-check"></i><b>6.5.3</b> Organizing and saving the data</a></li>
<li class="chapter" data-level="6.5.4" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#iterating-to-retrieve-all-the-data"><i class="fa fa-check"></i><b>6.5.4</b> Iterating to retrieve all the data</a></li>
<li class="chapter" data-level="6.5.5" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#exercise-retrieve-exhibits-data"><i class="fa fa-check"></i><b>6.5.5</b> Exercise: Retrieve exhibits data</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#parse-html-if-you-have-to"><i class="fa fa-check"></i><b>6.6</b> Parse html if you have to</a><ul>
<li class="chapter" data-level="6.6.1" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#retrieving-html"><i class="fa fa-check"></i><b>6.6.1</b> Retrieving HTML</a></li>
<li class="chapter" data-level="6.6.2" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#parsing-html-using-the-lxml-library"><i class="fa fa-check"></i><b>6.6.2</b> Parsing HTML using the lxml library</a></li>
<li class="chapter" data-level="6.6.3" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#using-xpath-to-extract-content-from-html"><i class="fa fa-check"></i><b>6.6.3</b> Using xpath to extract content from HTML</a></li>
<li class="chapter" data-level="6.6.4" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#iterating-to-retrieve-content-from-a-list-of-html-elements"><i class="fa fa-check"></i><b>6.6.4</b> Iterating to retrieve content from a list of HTML elements</a></li>
<li class="chapter" data-level="6.6.5" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#exercise-parsing-html"><i class="fa fa-check"></i><b>6.6.5</b> Exercise: parsing HTML</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#use-scrapy-for-large-or-complicated-projects"><i class="fa fa-check"></i><b>6.7</b> Use Scrapy for large or complicated projects</a></li>
<li class="chapter" data-level="6.8" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#use-a-browser-driver-as-a-last-resort"><i class="fa fa-check"></i><b>6.8</b> Use a browser driver as a last resort</a></li>
</ul></li>
<li class="part"><span><b>III Stata</b></span></li>
<li class="chapter" data-level="7" data-path="StataIntro.html"><a href="StataIntro.html"><i class="fa fa-check"></i><b>7</b> Stata Introduction</a><ul>
<li class="chapter" data-level="7.1" data-path="StataIntro.html"><a href="StataIntro.html#setup-instructions-6"><i class="fa fa-check"></i><b>7.1</b> Setup instructions</a><ul>
<li class="chapter" data-level="7.1.1" data-path="StataIntro.html"><a href="StataIntro.html#organization"><i class="fa fa-check"></i><b>7.1.1</b> Organization</a></li>
<li class="chapter" data-level="7.1.2" data-path="StataIntro.html"><a href="StataIntro.html#workshop-description-1"><i class="fa fa-check"></i><b>7.1.2</b> Workshop description</a></li>
<li class="chapter" data-level="7.1.3" data-path="StataIntro.html"><a href="StataIntro.html#why-stata"><i class="fa fa-check"></i><b>7.1.3</b> Why stata?</a></li>
<li class="chapter" data-level="7.1.4" data-path="StataIntro.html"><a href="StataIntro.html#stata-interface"><i class="fa fa-check"></i><b>7.1.4</b> Stata interface</a></li>
<li class="chapter" data-level="7.1.5" data-path="StataIntro.html"><a href="StataIntro.html#do-files"><i class="fa fa-check"></i><b>7.1.5</b> Do-files</a></li>
<li class="chapter" data-level="7.1.6" data-path="StataIntro.html"><a href="StataIntro.html#stata-help"><i class="fa fa-check"></i><b>7.1.6</b> Stata help</a></li>
<li class="chapter" data-level="7.1.7" data-path="StataIntro.html"><a href="StataIntro.html#general-stata-command-syntax"><i class="fa fa-check"></i><b>7.1.7</b> General Stata command syntax</a></li>
<li class="chapter" data-level="7.1.8" data-path="StataIntro.html"><a href="StataIntro.html#commenting-and-formatting-syntax"><i class="fa fa-check"></i><b>7.1.8</b> Commenting and formatting syntax</a></li>
<li class="chapter" data-level="7.1.9" data-path="StataIntro.html"><a href="StataIntro.html#lets-get-started"><i class="fa fa-check"></i><b>7.1.9</b> Let’s get started</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="StataIntro.html"><a href="StataIntro.html#getting-data-into-stata"><i class="fa fa-check"></i><b>7.2</b> Getting data into Stata</a><ul>
<li class="chapter" data-level="7.2.1" data-path="StataIntro.html"><a href="StataIntro.html#data-file-commands"><i class="fa fa-check"></i><b>7.2.1</b> Data file commands</a></li>
<li class="chapter" data-level="7.2.2" data-path="StataIntro.html"><a href="StataIntro.html#a-note-about-path-names"><i class="fa fa-check"></i><b>7.2.2</b> A note about path names</a></li>
<li class="chapter" data-level="7.2.3" data-path="StataIntro.html"><a href="StataIntro.html#wheres-my-data"><i class="fa fa-check"></i><b>7.2.3</b> Where’s my data?</a></li>
<li class="chapter" data-level="7.2.4" data-path="StataIntro.html"><a href="StataIntro.html#what-if-my-data-is-not-a-stata-file"><i class="fa fa-check"></i><b>7.2.4</b> What if my data is not a Stata file?</a></li>
<li class="chapter" data-level="7.2.5" data-path="StataIntro.html"><a href="StataIntro.html#what-if-my-data-is-from-another-statistical-software-program"><i class="fa fa-check"></i><b>7.2.5</b> What if my data is from another statistical software program?</a></li>
<li class="chapter" data-level="7.2.6" data-path="StataIntro.html"><a href="StataIntro.html#exercise-1-importing-data"><i class="fa fa-check"></i><b>7.2.6</b> Exercise 1: Importing data</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="StataIntro.html"><a href="StataIntro.html#statistics-and-graphs"><i class="fa fa-check"></i><b>7.3</b> Statistics and graphs</a><ul>
<li class="chapter" data-level="7.3.1" data-path="StataIntro.html"><a href="StataIntro.html#frequently-used-commands"><i class="fa fa-check"></i><b>7.3.1</b> Frequently used commands</a></li>
<li class="chapter" data-level="7.3.2" data-path="StataIntro.html"><a href="StataIntro.html#basic-graphing-commands"><i class="fa fa-check"></i><b>7.3.2</b> Basic graphing commands</a></li>
<li class="chapter" data-level="7.3.3" data-path="StataIntro.html"><a href="StataIntro.html#the-by-command"><i class="fa fa-check"></i><b>7.3.3</b> The “by” command</a></li>
<li class="chapter" data-level="7.3.4" data-path="StataIntro.html"><a href="StataIntro.html#exercise-2-descriptive-statistics"><i class="fa fa-check"></i><b>7.3.4</b> Exercise 2: Descriptive statistics</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="StataIntro.html"><a href="StataIntro.html#basic-data-management"><i class="fa fa-check"></i><b>7.4</b> Basic data management</a><ul>
<li class="chapter" data-level="7.4.1" data-path="StataIntro.html"><a href="StataIntro.html#labels"><i class="fa fa-check"></i><b>7.4.1</b> Labels</a></li>
<li class="chapter" data-level="7.4.2" data-path="StataIntro.html"><a href="StataIntro.html#variable-and-value-labels"><i class="fa fa-check"></i><b>7.4.2</b> Variable and value labels</a></li>
<li class="chapter" data-level="7.4.3" data-path="StataIntro.html"><a href="StataIntro.html#exercise-3-variable-labels-and-value-labels"><i class="fa fa-check"></i><b>7.4.3</b> Exercise 3: Variable labels and value labels</a></li>
<li class="chapter" data-level="7.4.4" data-path="StataIntro.html"><a href="StataIntro.html#working-on-subsets"><i class="fa fa-check"></i><b>7.4.4</b> Working on subsets</a></li>
<li class="chapter" data-level="7.4.5" data-path="StataIntro.html"><a href="StataIntro.html#generating-and-replacing-variables"><i class="fa fa-check"></i><b>7.4.5</b> Generating and replacing variables</a></li>
<li class="chapter" data-level="7.4.6" data-path="StataIntro.html"><a href="StataIntro.html#exercise-4-manipulating-variables"><i class="fa fa-check"></i><b>7.4.6</b> Exercise 4: Manipulating variables</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="StataIntro.html"><a href="StataIntro.html#wrap-up-3"><i class="fa fa-check"></i><b>7.5</b> Wrap-up</a><ul>
<li class="chapter" data-level="7.5.1" data-path="StataIntro.html"><a href="StataIntro.html#help-us-make-this-workshop-better-3"><i class="fa fa-check"></i><b>7.5.1</b> Help us make this workshop better!</a></li>
<li class="chapter" data-level="7.5.2" data-path="StataIntro.html"><a href="StataIntro.html#additional-resources-3"><i class="fa fa-check"></i><b>7.5.2</b> Additional resources</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">IQSS Workshops</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="python-web-scraping" class="section level1">
<h1><span class="header-section-number">6</span> Python Web-Scraping</h1>
<p><strong>Topics</strong> * Assignment * Function arguments * Finding help * Reading data * Filtering and arranging data * Conditional operations * Saving data</p>
<div id="setup-instructions-5" class="section level2">
<h2><span class="header-section-number">6.1</span> Setup instructions</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">eval=</span><span class="ot">FALSE</span>, <span class="dt">results=</span><span class="ot">FALSE</span>, <span class="dt">message=</span><span class="ot">FALSE</span>, <span class="dt">warning=</span><span class="ot">FALSE</span>, <span class="dt">error=</span><span class="ot">FALSE</span>)</code></pre></div>
<div id="install-the-anaconda-python-distribution-1" class="section level3">
<h3><span class="header-section-number">6.1.1</span> Install the Anaconda Python distribution</h3>
<p>If using your own computer please install the Anaconda Python distribution from <a href="https://www.anaconda.com/download/" class="uri">https://www.anaconda.com/download/</a>. (Note that Python version <span class="math inline">\(\leq\)</span> 3.0 differs considerably from more recent releases. For this workshop you will need version <span class="math inline">\(\geq\)</span> 3.4.)</p>
<p>Accepting the defaults proposed by the Anaconda installer is generally recommended.</p>
</div>
<div id="workshop-notes" class="section level3">
<h3><span class="header-section-number">6.1.2</span> Workshop notes</h3>
<p>The class notes for this workshop are available on our website at <a href="https://dss.iq.harvard.edu">dss.iq.harvard.edu</a> under <code>Workshop Materials ==&gt; Python Workshop Materials =&gt; Python Web Scraping</code>. Click the <code>All workshop materials</code> link to download the workshop materials.</p>
<p>Extract the <code>PythonWebScraping.zip</code> directory (<code>Right-click =&gt; Extract All</code> on Windows, <code>double-click</code> on Mac).</p>
<p>Start the <code>Jupyter Notebook</code> application and open the <code>Exercises.ipynb</code> file in the <code>PythonWebScraping</code> folder you downloaded previously. You may also wish to start a new notebook for your own notes.</p>
</div>
</div>
<div id="workshop-goals-and-approach-2" class="section level2">
<h2><span class="header-section-number">6.2</span> Workshop goals and approach</h2>
<p>In this workshop you will</p>
<ul>
<li>learn basic web scraping principles and techniques,</li>
<li>learn how to use the <code>requests</code> package in Python,</li>
<li>practice making requests and manipulating responses from the server.</li>
</ul>
<p>This workshop is relatively <em>informal</em>, <em>example-oriented</em>, and <em>hands-on</em>. We will learn by working through an example web scraping project.</p>
<p>Note that this is <strong>not</strong> an introductory workshop. Familiarity with Python, including but not limited to knowledge of lists and dictionaries, indexing, and loops and / or comprehensions is assumed. If you need an introduction to Python or a refresher, we recommend the <a href="https://dss.iq.harvard.edu/workshop-materials#widget-0">IQSS Introduction to Python</a>.</p>
<p>Note also that this workshop will not teach you everything you need to know in order to retrieve data from any web service you might wish to scrape. You can expect to learn just enough to be dangerous.</p>
</div>
<div id="preliminary-questions" class="section level2">
<h2><span class="header-section-number">6.3</span> Preliminary questions</h2>
<div id="what-is-web-scraping" class="section level3">
<h3><span class="header-section-number">6.3.1</span> What is web scraping?</h3>
<p>Web scraping is the activity of automating retrieval of information from a web service designed for human interaction.</p>
</div>
<div id="is-web-scraping-legal-is-it-ethical" class="section level3">
<h3><span class="header-section-number">6.3.2</span> Is web scraping legal? Is it ethical?</h3>
<p>It depends. If you have legal questions seek legal counsel. You can mitigate some ethical issues by building delays and restrictions into your web scraping program so as to avoid impacting the availability of the web service for other users or the cost of hosting the service for the service provider.</p>
</div>
</div>
<div id="example-project-overview-and-goals" class="section level2">
<h2><span class="header-section-number">6.4</span> Example project overview and goals</h2>
<p>In this workshop I will demonstrate web scraping techniques using the Collections page at <a href="https://www.harvardartmuseums.org/collections" class="uri">https://www.harvardartmuseums.org/collections</a> and let you use the skills you’ll learn to retrieve information from other parts of the Harvard Art Museums website.</p>
<p>The basic strategy is pretty much the same for most scraping projects. We will use our web browser (Chrome or Firefox recommended) to examine the page you wish to retrieve data from, and copy/paste information from your web browser into your scraping program.</p>
</div>
<div id="take-shortcuts-if-you-can" class="section level2">
<h2><span class="header-section-number">6.5</span> Take shortcuts if you can</h2>
<p>We wish to extract information from <a href="https://www.harvardartmuseums.org/collections" class="uri">https://www.harvardartmuseums.org/collections</a>. Like most modern web pages, a lot goes on behind the scenes to produce the page we see in our browser. Our goal is to pull back the curtain to see what the website does when we interact with it. Once we see how the website works we can start retrieving data from it. If we are lucky we’ll find a resource that returns the data we’re looking for in a structured format like <a href="https://json.org/">JSON</a> or <a href="https://en.wikipedia.org/wiki/XML">XML</a>.</p>
<div id="examining-the-structure-of-our-target-web-service" class="section level3">
<h3><span class="header-section-number">6.5.1</span> Examining the structure of our target web service</h3>
<p>We start by opening the collections web page in a web browser and inspecting it.</p>
<div class="figure">
<img src="Python/PythonWebScrape/images/dev_tools.png" />

</div>
<div class="figure">
<img src="Python/PythonWebScrape/images/dev_tools_pane.png" />

</div>
<p>If we scroll down to the bottom of the Collections page, we’ll see a button that says “Load More”. Let’s see what happens when we click on that button. To do so, click on “Network” in the developer tools window, then click the “Load More Collections” button. You should see a list of requests that were made as a result of clicking that button, as shown below.</p>
<div class="figure">
<img src="Python/PythonWebScrape/images/dev_tools_network.png" />

</div>
<p>If we look at that second request, the one to a script named <code>browse</code>, we’ll see that it returns all the information we need, in a convenient format called <code>JSON</code>. All we need to retrieve collection data is call make <code>GET</code> requests to <a href="https://www.harvardartmuseums.org/browse" class="uri">https://www.harvardartmuseums.org/browse</a> with the correct parameters.</p>
</div>
<div id="making-requests-using-python" class="section level3">
<h3><span class="header-section-number">6.5.2</span> Making requests using python</h3>
<p>The URL we want to retrieve data from has the following structure</p>
<pre><code>scheme                    domain    path  parameters
 https www.harvardartmuseums.org  browse  load_amount=10&amp;offset=0</code></pre>
<p>It is often convenient to create variables containing the domain(s) and path(s) you’ll be working with, as this allows you to swap out paths and parameters as needed. Note that the path is separated from the domain with <code>/</code> and the parameters are separated from the path with <code>?</code>. If there are multiple parameters they are separated from each other with a <code>&amp;</code>.</p>
<p>For example, we can define the domain and path of the collections URL as follows:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">museum_domain <span class="op">=</span> <span class="st">&#39;https://www.harvardartmuseums.org&#39;</span>
collection_path <span class="op">=</span> <span class="st">&#39;browse&#39;</span>

collection_url <span class="op">=</span> (museum_domain
                  <span class="op">+</span> <span class="st">&quot;/&quot;</span>
                  <span class="op">+</span> collection_path)

<span class="bu">print</span>(collection_url)</code></pre></div>
<p>Note that we omit the parameters here because it is usually easier to pass them as a <code>dict</code> when using the <code>requests</code> library in Python. This will become clearer shortly.</p>
<p>Now that we’ve constructed the URL we wish interact with we’re ready to make our first request in Python.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> requests

collections1 <span class="op">=</span> requests.get(
    collection_url,
    params <span class="op">=</span> {<span class="st">&#39;load_amount&#39;</span>: <span class="dv">10</span>,
                  <span class="st">&#39;offset&#39;</span>: <span class="dv">0</span>}
)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># </span><span class="al">###</span><span class="co"> Parsing JSON data</span>
<span class="co"># We already know from inspecting network traffic in our web</span>
<span class="co"># browser that this URL returns JSON, but we can use Python to verify</span>
<span class="co"># this assumption.</span>
collections1.headers[<span class="st">&#39;Content-Type&#39;</span>]</code></pre></div>
<p>Since JSON is a structured data format, parsing it into python data structures is easy. In fact, there’s a method for that!</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">collections1 <span class="op">=</span> collections1.json()
<span class="bu">print</span>(collections1)</code></pre></div>
<p>That’s it. Really, we are done here. Everyone go home!</p>
<p>OK not really, there is still more we can lean. But you have to admit that was pretty easy. If you can identify a service that returns the data you want in structured from, web scraping becomes a pretty trivial enterprise. We’ll discuss several other scenarios and topics, but for some web scraping tasks this is really all you need to know.</p>
</div>
<div id="organizing-and-saving-the-data" class="section level3">
<h3><span class="header-section-number">6.5.3</span> Organizing and saving the data</h3>
<p>The records we retrieved from <code>https://www.harvardartmuseums.org/browse</code> are arranged as a list of dictionaries. We can easily select the fields of arrange these data into a pandas <code>DataFrame</code> to facilitate subsequent analysis.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> pandas <span class="im">as</span> pd</code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">records1 <span class="op">=</span> pd.DataFrame.from_records(collections1[<span class="st">&#39;records&#39;</span>])</code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="bu">print</span>(records1)</code></pre></div>
<p>and write the data to a file.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">records1.to_csv(<span class="st">&quot;records1.csv&quot;</span>)</code></pre></div>
</div>
<div id="iterating-to-retrieve-all-the-data" class="section level3">
<h3><span class="header-section-number">6.5.4</span> Iterating to retrieve all the data</h3>
<p>Of course we don’t want just the first page of collections. How can we retrieve all of them?</p>
<p>Now that we know the web service works, and how to make requests in Python, we can iterate in the usual way.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">records <span class="op">=</span> []
<span class="cf">for</span> offset <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="dv">50</span>, <span class="dv">10</span>):
    param_values <span class="op">=</span> {<span class="st">&#39;load_amount&#39;</span>: <span class="dv">10</span>, <span class="st">&#39;offset&#39;</span>: offset}
    current_request <span class="op">=</span> requests.get(collection_url, params <span class="op">=</span> param_values)
    records <span class="op">+=</span> current_request.json()[<span class="st">&#39;records&#39;</span>]</code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co">## convert list of dicts to a `DataFrame`</span>
records_final <span class="op">=</span> pd.DataFrame.from_records(records)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># write the data to a file.</span>
records_final.to_csv(<span class="st">&quot;records_final.csv&quot;</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="bu">print</span>(records_final)</code></pre></div>
</div>
<div id="exercise-retrieve-exhibits-data" class="section level3">
<h3><span class="header-section-number">6.5.5</span> Exercise: Retrieve exhibits data</h3>
<p>In this exercise you will retrieve information about the art exhibitions at Harvard Art Museums from <code>https://www.harvardartmuseums.org/visit/exhibitions</code></p>
<ol style="list-style-type: decimal">
<li>Using a web browser (Firefox or Chrome recommended) inspect the page at <code>https://www.harvardartmuseums.org/visit/exhibitions</code>. Examine the network traffic as you interact with the page. Try to find where the data displayed on that page comes from.</li>
<li>Make a <code>get</code> request in Python to retrieve the data from the URL identified in step1.</li>
<li>Write a <em>loop</em> or <em>list comprehension</em> in Python to retrieve data for the first 5 pages of exhibitions data.</li>
<li>Bonus (optional): Convert the data you retrieved into a pandas <code>DataFrame</code> and save it to a <code>.csv</code> file.</li>
</ol>
</div>
</div>
<div id="parse-html-if-you-have-to" class="section level2">
<h2><span class="header-section-number">6.6</span> Parse html if you have to</h2>
<p>As we’ve seen, you can often inspect network traffic or other sources to locate the source of the data you are interested in and the API used to retrieve it. You should always start by looking for these shortcuts and using them where possible. If you are really lucky, you’ll find a shortcut that returns the data as JSON or XML. If you are not quite so lucky, you will have to parse HTML to retrieve the information you need.</p>
<p>For example, when I inspected the network traffic while interacting with <a href="https://www.harvardartmuseums.org/visit/calendar" class="uri">https://www.harvardartmuseums.org/visit/calendar</a> I didn’t see any requests that returned JSON data. The best we can do appears to be <a href="https://www.harvardartmuseums.org/visit/calendar?date=" class="uri">https://www.harvardartmuseums.org/visit/calendar?date=</a>, which unfortunately returns HTML.</p>
<div id="retrieving-html" class="section level3">
<h3><span class="header-section-number">6.6.1</span> Retrieving HTML</h3>
<p>The first step is the same as before: we make at <code>GET</code> request.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">calendar_path <span class="op">=</span> <span class="st">&#39;visit/calendar&#39;</span>

calendar_url <span class="op">=</span> (museum_domain <span class="co"># recall that we defined museum_domain earlier</span>
                  <span class="op">+</span> <span class="st">&quot;/&quot;</span>
                  <span class="op">+</span> calendar_path)

<span class="bu">print</span>(calendar_url)

events0 <span class="op">=</span> requests.get(calendar_url, params <span class="op">=</span> {<span class="st">&#39;date&#39;</span>: <span class="st">&#39;2018-11&#39;</span>})</code></pre></div>
<p>As before we can check the headers to see what type of content we received in response to our request.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">events0.headers[<span class="st">&#39;Content-Type&#39;</span>]</code></pre></div>
</div>
<div id="parsing-html-using-the-lxml-library" class="section level3">
<h3><span class="header-section-number">6.6.2</span> Parsing HTML using the lxml library</h3>
<p>Like JSON, HTML is structured; unlike JSON it is designed to be rendered into a human-readable page rather than simply to store and exchange data in a computer-readable format. Consequently, parsing HTML and extracting information from it is somewhat more difficult than parsing JSON.</p>
<p>While JSON parsing is built into the Python <code>requests</code> library, parsing HTML requires a separate library. I recommend using the HTML parser from the <code>lxml</code> library; others prefer an alternative called <code>BeautyfulSoup</code>.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">from</span> lxml <span class="im">import</span> html

events_html <span class="op">=</span> html.fromstring(events0.text)</code></pre></div>
</div>
<div id="using-xpath-to-extract-content-from-html" class="section level3">
<h3><span class="header-section-number">6.6.3</span> Using xpath to extract content from HTML</h3>
<p><code>XPath</code> is a tool for identifying particular elements withing a HTML document. The developer tools built into modern web browsers make it easy to generate <code>XPath</code>s that can used to identify the elements of a web page that we wish to extract.</p>
<p>We can open the html document we retrieved and inspect it using our web browser.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">html.open_in_browser(events_html, encoding <span class="op">=</span> <span class="st">&#39;UTF-8&#39;</span>)</code></pre></div>
<div class="figure">
<img src="Python/PythonWebScrape/images/dev_tools_right_click.png" />

</div>
<div class="figure">
<img src="Python/PythonWebScrape/images/dev_tools_inspect.png" />

</div>
<p>Once we identify the element containing the information of interest we can use our web browser to copy the <code>XPath</code> that uniquely identifies that element.</p>
<div class="figure">
<img src="Python/PythonWebScrape/images/dev_tools_xpath.png" />

</div>
<p>Next we can use python to extract the element of interest:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">events_list_html <span class="op">=</span> events_html.xpath(<span class="st">&#39;//*[@id=&quot;events_list&quot;]&#39;</span>)[<span class="dv">0</span>]</code></pre></div>
<p>Once again we can use a web browser to inspect the HTML we’re currently working with, and to figure out what we want to extract from it. Let’s look at the first element in our events list.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">first_event_html <span class="op">=</span> events_list_html[<span class="dv">0</span>]
html.open_in_browser(first_event_html, encoding <span class="op">=</span> <span class="st">&#39;UTF-8&#39;</span>)</code></pre></div>
<p>As before we can use our browser to find the xpath of the elements we want.</p>
<div class="figure">
<img src="Python/PythonWebScrape/images/dev_tools_figcaption.png" />

</div>
<p>(Note that the <code>html.open_in_browser</code> function adds enclosing <code>html</code> and <code>body</code> tags in order to create a complete web page for viewing. This requires that we adjust the <code>xpath</code> accordingly.)</p>
<p>By repeating this process for each element we want, we can build a list of the xpaths to those elements.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">elements_we_want <span class="op">=</span> {<span class="st">&#39;figcaption&#39;</span>: <span class="st">&#39;div/figure/div/figcaption&#39;</span>,
                    <span class="st">&#39;date&#39;</span>: <span class="st">&#39;div/div/header/time&#39;</span>,
                    <span class="st">&#39;title&#39;</span>: <span class="st">&#39;div/div/header/h2/a&#39;</span>,
                    <span class="st">&#39;time&#39;</span>: <span class="st">&#39;div/div/div/p[1]/time&#39;</span>,
                    <span class="st">&#39;localtion1&#39;</span>: <span class="st">&#39;div/div/div/p[2]/span/span[1]&#39;</span>,
                    <span class="st">&#39;location2&#39;</span>: <span class="st">&#39;div/div/div/p[2]/span/span[2]&#39;</span>
                    }</code></pre></div>
<p>Finally, we can iterate over the elements we want and extract them.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">first_event_values <span class="op">=</span> {}
<span class="cf">for</span> key <span class="kw">in</span> elements_we_want.keys():
    element <span class="op">=</span> first_event_html.xpath(elements_we_want[key])[<span class="dv">0</span>]
    first_event_values[key] <span class="op">=</span> element.text_content().strip()

<span class="bu">print</span>(first_event_values)</code></pre></div>
</div>
<div id="iterating-to-retrieve-content-from-a-list-of-html-elements" class="section level3">
<h3><span class="header-section-number">6.6.4</span> Iterating to retrieve content from a list of HTML elements</h3>
<p>So far we’ve retrieved information only for the first event. To retrieve data for all the events listed on the page we need to iterate over the events. If we are very lucky, each event will have exactly the same information structured in exactly the same way and we can simply extend the code we wrote above to iterate over the events list.</p>
<p>Unfortunately not all these elements are available for every event, so we need to take care to handle the case where one or more of these elements is not available. We can do that by defining a function that tries to retrieve a value and returns an empty string if it fails.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> get_event_info(event, path):
    <span class="cf">try</span>:
        info <span class="op">=</span> event.xpath(path)[<span class="dv">0</span>].text.strip()
    <span class="cf">except</span>:
        info <span class="op">=</span> <span class="st">&#39;&#39;</span>
    <span class="cf">return</span> info</code></pre></div>
<p>Armed with this function we can iterate over the list of events and extract the available information for each one.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">all_event_values <span class="op">=</span> {}
<span class="cf">for</span> key <span class="kw">in</span> elements_we_want.keys():
    key_values <span class="op">=</span> []
    <span class="cf">for</span> event <span class="kw">in</span> events_list_html: 
        key_values.append(get_event_info(event, elements_we_want[key]))
    all_event_values[key] <span class="op">=</span> key_values</code></pre></div>
<p>For convenience we can arrange these values in a pandas <code>DataFrame</code> and save them as .csv files, just as we did with our exhibitions data earlier.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">all_event_values <span class="op">=</span> pd.DataFrame.from_dict(all_event_values)

all_event_values.to_csv(<span class="st">&quot;all_event_values.csv&quot;</span>)

<span class="bu">print</span>(all_event_values)</code></pre></div>
</div>
<div id="exercise-parsing-html" class="section level3">
<h3><span class="header-section-number">6.6.5</span> Exercise: parsing HTML</h3>
<p>In this exercise you will retrieve information about the physical layout of the Harvard Art Museums. The web page at <a href="https://www.harvardartmuseums.org/visit/floor-plan" class="uri">https://www.harvardartmuseums.org/visit/floor-plan</a> contains this information in HTML from.</p>
<ol style="list-style-type: decimal">
<li>Using a web browser (Firefox or Chrome recommended) inspect the page at <code>https://www.harvardartmuseums.org/visit/floor-plan</code>. Copy the <code>XPath</code> to the element containing the list of level information. (HINT: the element if interest is a <code>ul</code>, i.e., <code>unordered list</code>.)</li>
<li>Make a <code>get</code> request in Python to retrieve the web page at <a href="https://www.harvardartmuseums.org/visit/floor-plan" class="uri">https://www.harvardartmuseums.org/visit/floor-plan</a>. Extract the content from your request object and parse it using <code>html.fromstring</code> from the <code>lxml</code> library.</li>
<li>Use your web browser to find the <code>XPath</code>s to the facilities housed on level one. Use Python to extract the text from those <code>Xpath</code>s.</li>
<li>Bonus (optional): Write a <em>loop</em> or <em>list comprehension</em> in Python to retrieve data for all the levels.</li>
</ol>
</div>
</div>
<div id="use-scrapy-for-large-or-complicated-projects" class="section level2">
<h2><span class="header-section-number">6.7</span> Use Scrapy for large or complicated projects</h2>
<p>Scraping websites using the <code>requests</code> library to make GET and POST requests, and the <code>lxml</code> library to process HTML is a good way to learn basic web scraping techniques. It is a good choice for small to medium size projects. For very large or complicated scraping tasks the <code>scrapy</code> library offers a number of conveniences, including asynchronously retrieval, session management, convenient methods for extracting and storing values, and more. More information about <code>scrapy</code> can be found at <a href="https://doc.scrapy.org" class="uri">https://doc.scrapy.org</a>.</p>
</div>
<div id="use-a-browser-driver-as-a-last-resort" class="section level2">
<h2><span class="header-section-number">6.8</span> Use a browser driver as a last resort</h2>
<p>It is sometimes necessary (or sometimes just easier) to use a web browser as an intermediary rather than communicating directly with a web service. This method has the advantage of being about to use the javascript engine and session management features of a web browser; the main disadvantage is that it is slower and tends to be more fragile than using <code>requests</code> or <code>scrapy</code> to make requests directly from python. For small scraping projects involving complicated sites with CAPTHAs or lots of complicated javascript using a browser driver can be a good option. More information is available at <a href="https://www.seleniumhq.org/docs/03_webdriver.jsp" class="uri">https://www.seleniumhq.org/docs/03_webdriver.jsp</a>.</p>

</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="PythonIntro.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="StataIntro.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/IQSS/dss-workshops-redux/edit/master/Python/PythonWebScrape/PythonWebScrape.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["IQSS_Workshops.pdf", "IQSS_Workshops.epub"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
