<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 R Graphics | IQSS Workshops</title>
  <meta name="description" content="IQSS Data Science Workshops" />
  <meta name="generator" content="bookdown 0.13 and GitBook 2.6.7" />

  <meta property="og:title" content="3 R Graphics | IQSS Workshops" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="IQSS Data Science Workshops" />
  <meta name="github-repo" content="IQSS/dss-workshops-redux" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 R Graphics | IQSS Workshops" />
  
  <meta name="twitter:description" content="IQSS Data Science Workshops" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="Rmodels.html"/>
<link rel="next" href="RDataWrangling.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">IQSS Workshop Materials</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#table-of-contents"><i class="fa fa-check"></i>Table of Contents</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#authors-and-sources"><i class="fa fa-check"></i>Authors and Sources</a></li>
</ul></li>
<li class="part"><span><b>I R</b></span></li>
<li class="chapter" data-level="1" data-path="Rintro.html"><a href="Rintro.html"><i class="fa fa-check"></i><b>1</b> R Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="Rintro.html"><a href="Rintro.html#setup"><i class="fa fa-check"></i><b>1.1</b> Setup</a><ul>
<li class="chapter" data-level="1.1.1" data-path="Rintro.html"><a href="Rintro.html#software-materials"><i class="fa fa-check"></i><b>1.1.1</b> Software &amp; materials</a></li>
<li class="chapter" data-level="1.1.2" data-path="Rintro.html"><a href="Rintro.html#goals"><i class="fa fa-check"></i><b>1.1.2</b> Goals</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="Rintro.html"><a href="Rintro.html#r-interfaces"><i class="fa fa-check"></i><b>1.2</b> R Interfaces</a></li>
<li class="chapter" data-level="1.3" data-path="Rintro.html"><a href="Rintro.html#exercise-0"><i class="fa fa-check"></i><b>1.3</b> Exercise 0</a></li>
<li class="chapter" data-level="1.4" data-path="Rintro.html"><a href="Rintro.html#r-basics"><i class="fa fa-check"></i><b>1.4</b> R basics</a><ul>
<li class="chapter" data-level="1.4.1" data-path="Rintro.html"><a href="Rintro.html#function-calls"><i class="fa fa-check"></i><b>1.4.1</b> Function calls</a></li>
<li class="chapter" data-level="1.4.2" data-path="Rintro.html"><a href="Rintro.html#assignment"><i class="fa fa-check"></i><b>1.4.2</b> Assignment</a></li>
<li class="chapter" data-level="1.4.3" data-path="Rintro.html"><a href="Rintro.html#asking-r-for-help"><i class="fa fa-check"></i><b>1.4.3</b> Asking R for help</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="Rintro.html"><a href="Rintro.html#getting-data-into-r"><i class="fa fa-check"></i><b>1.5</b> Getting data into R</a><ul>
<li class="chapter" data-level="1.5.1" data-path="Rintro.html"><a href="Rintro.html#installing-and-using-r-packages"><i class="fa fa-check"></i><b>1.5.1</b> Installing and using R packages</a></li>
<li class="chapter" data-level="1.5.2" data-path="Rintro.html"><a href="Rintro.html#readers-for-common-file-types"><i class="fa fa-check"></i><b>1.5.2</b> Readers for common file types</a></li>
<li class="chapter" data-level="1.5.3" data-path="Rintro.html"><a href="Rintro.html#baby-names-data"><i class="fa fa-check"></i><b>1.5.3</b> Baby names data</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="Rintro.html"><a href="Rintro.html#exercise-1"><i class="fa fa-check"></i><b>1.6</b> Exercise 1</a></li>
<li class="chapter" data-level="1.7" data-path="Rintro.html"><a href="Rintro.html#popularity-of-your-name"><i class="fa fa-check"></i><b>1.7</b> Popularity of your name</a><ul>
<li class="chapter" data-level="1.7.1" data-path="Rintro.html"><a href="Rintro.html#filtering-and-arranging-data"><i class="fa fa-check"></i><b>1.7.1</b> Filtering and arranging data</a></li>
<li class="chapter" data-level="1.7.2" data-path="Rintro.html"><a href="Rintro.html#other-logical-operators"><i class="fa fa-check"></i><b>1.7.2</b> Other logical operators</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="Rintro.html"><a href="Rintro.html#exercise-2.1"><i class="fa fa-check"></i><b>1.8</b> Exercise 2.1</a></li>
<li class="chapter" data-level="1.9" data-path="Rintro.html"><a href="Rintro.html#pipe-operator-in-r"><i class="fa fa-check"></i><b>1.9</b> Pipe operator in R</a></li>
<li class="chapter" data-level="1.10" data-path="Rintro.html"><a href="Rintro.html#exercise-2.2"><i class="fa fa-check"></i><b>1.10</b> Exercise 2.2</a></li>
<li class="chapter" data-level="1.11" data-path="Rintro.html"><a href="Rintro.html#plotting-baby-name-trends-over-time"><i class="fa fa-check"></i><b>1.11</b> Plotting baby name trends over time</a></li>
<li class="chapter" data-level="1.12" data-path="Rintro.html"><a href="Rintro.html#exercise-3"><i class="fa fa-check"></i><b>1.12</b> Exercise 3</a></li>
<li class="chapter" data-level="1.13" data-path="Rintro.html"><a href="Rintro.html#finding-the-most-popular-names"><i class="fa fa-check"></i><b>1.13</b> Finding the most popular names</a><ul>
<li class="chapter" data-level="1.13.1" data-path="Rintro.html"><a href="Rintro.html#computing-better-measures-of-popularity"><i class="fa fa-check"></i><b>1.13.1</b> Computing better measures of popularity</a></li>
<li class="chapter" data-level="1.13.2" data-path="Rintro.html"><a href="Rintro.html#operating-by-group"><i class="fa fa-check"></i><b>1.13.2</b> Operating by group</a></li>
</ul></li>
<li class="chapter" data-level="1.14" data-path="Rintro.html"><a href="Rintro.html#exercise-4"><i class="fa fa-check"></i><b>1.14</b> Exercise 4</a></li>
<li class="chapter" data-level="1.15" data-path="Rintro.html"><a href="Rintro.html#percent-choosing-one-of-the-top-10-names"><i class="fa fa-check"></i><b>1.15</b> Percent choosing one of the top 10 names</a></li>
<li class="chapter" data-level="1.16" data-path="Rintro.html"><a href="Rintro.html#exercise-5"><i class="fa fa-check"></i><b>1.16</b> Exercise 5</a></li>
<li class="chapter" data-level="1.17" data-path="Rintro.html"><a href="Rintro.html#saving-our-work"><i class="fa fa-check"></i><b>1.17</b> Saving our Work</a><ul>
<li class="chapter" data-level="1.17.1" data-path="Rintro.html"><a href="Rintro.html#saving-individual-datasets"><i class="fa fa-check"></i><b>1.17.1</b> Saving individual datasets</a></li>
<li class="chapter" data-level="1.17.2" data-path="Rintro.html"><a href="Rintro.html#saving-and-loading-r-workspaces"><i class="fa fa-check"></i><b>1.17.2</b> Saving and loading R workspaces</a></li>
</ul></li>
<li class="chapter" data-level="1.18" data-path="Rintro.html"><a href="Rintro.html#exercise-solutions"><i class="fa fa-check"></i><b>1.18</b> Exercise solutions</a><ul>
<li class="chapter" data-level="1.18.1" data-path="Rintro.html"><a href="Rintro.html#ex-0-prototype"><i class="fa fa-check"></i><b>1.18.1</b> Ex 0: prototype</a></li>
<li class="chapter" data-level="1.18.2" data-path="Rintro.html"><a href="Rintro.html#ex-1-prototype"><i class="fa fa-check"></i><b>1.18.2</b> Ex 1: prototype</a></li>
<li class="chapter" data-level="1.18.3" data-path="Rintro.html"><a href="Rintro.html#ex-2.1-prototype"><i class="fa fa-check"></i><b>1.18.3</b> Ex 2.1: prototype</a></li>
<li class="chapter" data-level="1.18.4" data-path="Rintro.html"><a href="Rintro.html#ex-2.2-prototype"><i class="fa fa-check"></i><b>1.18.4</b> Ex 2.2: prototype</a></li>
<li class="chapter" data-level="1.18.5" data-path="Rintro.html"><a href="Rintro.html#ex-3-prototype"><i class="fa fa-check"></i><b>1.18.5</b> Ex 3: prototype</a></li>
<li class="chapter" data-level="1.18.6" data-path="Rintro.html"><a href="Rintro.html#ex-4-prototype"><i class="fa fa-check"></i><b>1.18.6</b> Ex 4: prototype</a></li>
<li class="chapter" data-level="1.18.7" data-path="Rintro.html"><a href="Rintro.html#ex-5-prototype"><i class="fa fa-check"></i><b>1.18.7</b> Ex 5: prototype</a></li>
</ul></li>
<li class="chapter" data-level="1.19" data-path="Rintro.html"><a href="Rintro.html#wrap-up"><i class="fa fa-check"></i><b>1.19</b> Wrap-up</a><ul>
<li class="chapter" data-level="1.19.1" data-path="Rintro.html"><a href="Rintro.html#feedback"><i class="fa fa-check"></i><b>1.19.1</b> Feedback</a></li>
<li class="chapter" data-level="1.19.2" data-path="Rintro.html"><a href="Rintro.html#resources"><i class="fa fa-check"></i><b>1.19.2</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Rmodels.html"><a href="Rmodels.html"><i class="fa fa-check"></i><b>2</b> R Regression Models</a><ul>
<li class="chapter" data-level="2.1" data-path="Rmodels.html"><a href="Rmodels.html#setup-1"><i class="fa fa-check"></i><b>2.1</b> Setup</a><ul>
<li class="chapter" data-level="2.1.1" data-path="Rmodels.html"><a href="Rmodels.html#software-materials-1"><i class="fa fa-check"></i><b>2.1.1</b> Software &amp; materials</a></li>
<li class="chapter" data-level="2.1.2" data-path="Rmodels.html"><a href="Rmodels.html#goals-1"><i class="fa fa-check"></i><b>2.1.2</b> Goals</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="Rmodels.html"><a href="Rmodels.html#before-fitting-a-model"><i class="fa fa-check"></i><b>2.2</b> Before fitting a model</a><ul>
<li class="chapter" data-level="2.2.1" data-path="Rmodels.html"><a href="Rmodels.html#load-the-data"><i class="fa fa-check"></i><b>2.2.1</b> Load the data</a></li>
<li class="chapter" data-level="2.2.2" data-path="Rmodels.html"><a href="Rmodels.html#examine-the-data"><i class="fa fa-check"></i><b>2.2.2</b> Examine the data</a></li>
<li class="chapter" data-level="2.2.3" data-path="Rmodels.html"><a href="Rmodels.html#plot-the-data"><i class="fa fa-check"></i><b>2.2.3</b> Plot the data</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="Rmodels.html"><a href="Rmodels.html#regression-with-continuous-outcomes"><i class="fa fa-check"></i><b>2.3</b> Regression with continuous outcomes</a><ul>
<li class="chapter" data-level="2.3.1" data-path="Rmodels.html"><a href="Rmodels.html#why-is-the-association-between-expense-and-sat-scores-negative"><i class="fa fa-check"></i><b>2.3.1</b> Why is the association between expense and SAT scores <em>negative</em>?</a></li>
<li class="chapter" data-level="2.3.2" data-path="Rmodels.html"><a href="Rmodels.html#the-lm-class-and-methods"><i class="fa fa-check"></i><b>2.3.2</b> The <code>lm</code> class and methods</a></li>
<li class="chapter" data-level="2.3.3" data-path="Rmodels.html"><a href="Rmodels.html#ols-regression-assumptions"><i class="fa fa-check"></i><b>2.3.3</b> OLS regression assumptions</a></li>
<li class="chapter" data-level="2.3.4" data-path="Rmodels.html"><a href="Rmodels.html#comparing-models"><i class="fa fa-check"></i><b>2.3.4</b> Comparing models</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="Rmodels.html"><a href="Rmodels.html#exercise-0-1"><i class="fa fa-check"></i><b>2.4</b> Exercise 0</a></li>
<li class="chapter" data-level="2.5" data-path="Rmodels.html"><a href="Rmodels.html#interactions-and-factors"><i class="fa fa-check"></i><b>2.5</b> Interactions and factors</a><ul>
<li class="chapter" data-level="2.5.1" data-path="Rmodels.html"><a href="Rmodels.html#modeling-interactions"><i class="fa fa-check"></i><b>2.5.1</b> Modeling interactions</a></li>
<li class="chapter" data-level="2.5.2" data-path="Rmodels.html"><a href="Rmodels.html#regression-with-categorical-predictors"><i class="fa fa-check"></i><b>2.5.2</b> Regression with categorical predictors</a></li>
<li class="chapter" data-level="2.5.3" data-path="Rmodels.html"><a href="Rmodels.html#setting-factor-reference-groups-and-contrasts"><i class="fa fa-check"></i><b>2.5.3</b> Setting factor reference groups and contrasts</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="Rmodels.html"><a href="Rmodels.html#exercise-1-1"><i class="fa fa-check"></i><b>2.6</b> Exercise 1</a></li>
<li class="chapter" data-level="2.7" data-path="Rmodels.html"><a href="Rmodels.html#regression-with-binary-outcomes"><i class="fa fa-check"></i><b>2.7</b> Regression with binary outcomes</a><ul>
<li class="chapter" data-level="2.7.1" data-path="Rmodels.html"><a href="Rmodels.html#logistic-regression"><i class="fa fa-check"></i><b>2.7.1</b> Logistic regression</a></li>
<li class="chapter" data-level="2.7.2" data-path="Rmodels.html"><a href="Rmodels.html#logistic-regression-example"><i class="fa fa-check"></i><b>2.7.2</b> Logistic regression example</a></li>
<li class="chapter" data-level="2.7.3" data-path="Rmodels.html"><a href="Rmodels.html#logistic-regression-coefficients"><i class="fa fa-check"></i><b>2.7.3</b> Logistic regression coefficients</a></li>
<li class="chapter" data-level="2.7.4" data-path="Rmodels.html"><a href="Rmodels.html#packages-for-computing-and-graphing-predicted-values"><i class="fa fa-check"></i><b>2.7.4</b> Packages for computing and graphing predicted values</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="Rmodels.html"><a href="Rmodels.html#exercise-2"><i class="fa fa-check"></i><b>2.8</b> Exercise 2</a></li>
<li class="chapter" data-level="2.9" data-path="Rmodels.html"><a href="Rmodels.html#multilevel-modeling"><i class="fa fa-check"></i><b>2.9</b> Multilevel modeling</a><ul>
<li class="chapter" data-level="2.9.1" data-path="Rmodels.html"><a href="Rmodels.html#multilevel-modeling-overview"><i class="fa fa-check"></i><b>2.9.1</b> Multilevel modeling overview</a></li>
<li class="chapter" data-level="2.9.2" data-path="Rmodels.html"><a href="Rmodels.html#the-exam-data"><i class="fa fa-check"></i><b>2.9.2</b> The Exam data</a></li>
<li class="chapter" data-level="2.9.3" data-path="Rmodels.html"><a href="Rmodels.html#the-null-model-and-icc"><i class="fa fa-check"></i><b>2.9.3</b> The null model and ICC</a></li>
<li class="chapter" data-level="2.9.4" data-path="Rmodels.html"><a href="Rmodels.html#adding-fixed-effects-predictors"><i class="fa fa-check"></i><b>2.9.4</b> Adding fixed-effects predictors</a></li>
<li class="chapter" data-level="2.9.5" data-path="Rmodels.html"><a href="Rmodels.html#multiple-degree-of-freedom-comparisons"><i class="fa fa-check"></i><b>2.9.5</b> Multiple degree of freedom comparisons</a></li>
<li class="chapter" data-level="2.9.6" data-path="Rmodels.html"><a href="Rmodels.html#random-slopes"><i class="fa fa-check"></i><b>2.9.6</b> Random slopes</a></li>
<li class="chapter" data-level="2.9.7" data-path="Rmodels.html"><a href="Rmodels.html#test-the-significance-of-the-random-slope"><i class="fa fa-check"></i><b>2.9.7</b> Test the significance of the random slope</a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="Rmodels.html"><a href="Rmodels.html#exercise-3-1"><i class="fa fa-check"></i><b>2.10</b> Exercise 3</a></li>
<li class="chapter" data-level="2.11" data-path="Rmodels.html"><a href="Rmodels.html#exercise-solutions-1"><i class="fa fa-check"></i><b>2.11</b> Exercise solutions</a><ul>
<li class="chapter" data-level="2.11.1" data-path="Rmodels.html"><a href="Rmodels.html#ex-0-prototype-1"><i class="fa fa-check"></i><b>2.11.1</b> Ex 0: prototype</a></li>
<li class="chapter" data-level="2.11.2" data-path="Rmodels.html"><a href="Rmodels.html#ex-1-prototype-1"><i class="fa fa-check"></i><b>2.11.2</b> Ex 1: prototype</a></li>
<li class="chapter" data-level="2.11.3" data-path="Rmodels.html"><a href="Rmodels.html#ex-2-prototype"><i class="fa fa-check"></i><b>2.11.3</b> Ex 2: prototype</a></li>
<li class="chapter" data-level="2.11.4" data-path="Rmodels.html"><a href="Rmodels.html#ex-3-prototype-1"><i class="fa fa-check"></i><b>2.11.4</b> Ex 3: prototype</a></li>
</ul></li>
<li class="chapter" data-level="2.12" data-path="Rmodels.html"><a href="Rmodels.html#wrap-up-1"><i class="fa fa-check"></i><b>2.12</b> Wrap-up</a><ul>
<li class="chapter" data-level="2.12.1" data-path="Rmodels.html"><a href="Rmodels.html#feedback-1"><i class="fa fa-check"></i><b>2.12.1</b> Feedback</a></li>
<li class="chapter" data-level="2.12.2" data-path="Rmodels.html"><a href="Rmodels.html#resources-1"><i class="fa fa-check"></i><b>2.12.2</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="Rgraphics.html"><a href="Rgraphics.html"><i class="fa fa-check"></i><b>3</b> R Graphics</a><ul>
<li class="chapter" data-level="3.1" data-path="Rgraphics.html"><a href="Rgraphics.html#setup-2"><i class="fa fa-check"></i><b>3.1</b> Setup</a><ul>
<li class="chapter" data-level="3.1.1" data-path="Rgraphics.html"><a href="Rgraphics.html#software-materials-2"><i class="fa fa-check"></i><b>3.1.1</b> Software &amp; materials</a></li>
<li class="chapter" data-level="3.1.2" data-path="Rgraphics.html"><a href="Rgraphics.html#goals-2"><i class="fa fa-check"></i><b>3.1.2</b> Goals</a></li>
<li class="chapter" data-level="3.1.3" data-path="Rgraphics.html"><a href="Rgraphics.html#starting-at-the-end"><i class="fa fa-check"></i><b>3.1.3</b> Starting at the end</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="Rgraphics.html"><a href="Rgraphics.html#why-ggplot2"><i class="fa fa-check"></i><b>3.2</b> Why <code>ggplot2</code>?</a><ul>
<li class="chapter" data-level="3.2.1" data-path="Rgraphics.html"><a href="Rgraphics.html#what-is-the-grammar-of-graphics"><i class="fa fa-check"></i><b>3.2.1</b> What is the Grammar Of Graphics?</a></li>
<li class="chapter" data-level="3.2.2" data-path="Rgraphics.html"><a href="Rgraphics.html#example-data-housing-prices"><i class="fa fa-check"></i><b>3.2.2</b> Example data: <code>housing prices</code></a></li>
<li class="chapter" data-level="3.2.3" data-path="Rgraphics.html"><a href="Rgraphics.html#ggplot2-vs-base-graphics"><i class="fa fa-check"></i><b>3.2.3</b> <code>ggplot2</code> VS base graphics</a></li>
<li class="chapter" data-level="3.2.4" data-path="Rgraphics.html"><a href="Rgraphics.html#for-simple-graphs"><i class="fa fa-check"></i><b>3.2.4</b> For simple graphs</a></li>
<li class="chapter" data-level="3.2.5" data-path="Rgraphics.html"><a href="Rgraphics.html#for-more-complex-graphs"><i class="fa fa-check"></i><b>3.2.5</b> For more complex graphs:</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="Rgraphics.html"><a href="Rgraphics.html#geometric-objects-and-aesthetics"><i class="fa fa-check"></i><b>3.3</b> Geometric objects and aesthetics</a><ul>
<li class="chapter" data-level="3.3.1" data-path="Rgraphics.html"><a href="Rgraphics.html#aesthetic-mapping"><i class="fa fa-check"></i><b>3.3.1</b> Aesthetic mapping</a></li>
<li class="chapter" data-level="3.3.2" data-path="Rgraphics.html"><a href="Rgraphics.html#geometic-objects-geom"><i class="fa fa-check"></i><b>3.3.2</b> Geometic objects (<code>geom</code>)</a></li>
<li class="chapter" data-level="3.3.3" data-path="Rgraphics.html"><a href="Rgraphics.html#points-scatterplot"><i class="fa fa-check"></i><b>3.3.3</b> Points (scatterplot)</a></li>
<li class="chapter" data-level="3.3.4" data-path="Rgraphics.html"><a href="Rgraphics.html#lines-prediction-line"><i class="fa fa-check"></i><b>3.3.4</b> Lines (prediction line)</a></li>
<li class="chapter" data-level="3.3.5" data-path="Rgraphics.html"><a href="Rgraphics.html#smoothers"><i class="fa fa-check"></i><b>3.3.5</b> Smoothers</a></li>
<li class="chapter" data-level="3.3.6" data-path="Rgraphics.html"><a href="Rgraphics.html#text-label-points"><i class="fa fa-check"></i><b>3.3.6</b> Text (label points)</a></li>
<li class="chapter" data-level="3.3.7" data-path="Rgraphics.html"><a href="Rgraphics.html#aesthetic-mapping-vs-assignment"><i class="fa fa-check"></i><b>3.3.7</b> Aesthetic mapping VS assignment</a></li>
<li class="chapter" data-level="3.3.8" data-path="Rgraphics.html"><a href="Rgraphics.html#mapping-variables-to-other-aesthetics"><i class="fa fa-check"></i><b>3.3.8</b> Mapping variables to other aesthetics</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-0-2"><i class="fa fa-check"></i><b>3.4</b> Exercise 0</a></li>
<li class="chapter" data-level="3.5" data-path="Rgraphics.html"><a href="Rgraphics.html#statistical-transformations"><i class="fa fa-check"></i><b>3.5</b> Statistical transformations</a><ul>
<li class="chapter" data-level="3.5.1" data-path="Rgraphics.html"><a href="Rgraphics.html#why-transform-data"><i class="fa fa-check"></i><b>3.5.1</b> Why transform data?</a></li>
<li class="chapter" data-level="3.5.2" data-path="Rgraphics.html"><a href="Rgraphics.html#setting-arguments"><i class="fa fa-check"></i><b>3.5.2</b> Setting arguments</a></li>
<li class="chapter" data-level="3.5.3" data-path="Rgraphics.html"><a href="Rgraphics.html#changing-the-transformation"><i class="fa fa-check"></i><b>3.5.3</b> Changing the transformation</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-1-2"><i class="fa fa-check"></i><b>3.6</b> Exercise 1</a></li>
<li class="chapter" data-level="3.7" data-path="Rgraphics.html"><a href="Rgraphics.html#scales"><i class="fa fa-check"></i><b>3.7</b> Scales</a><ul>
<li class="chapter" data-level="3.7.1" data-path="Rgraphics.html"><a href="Rgraphics.html#controlling-aesthetic-mapping"><i class="fa fa-check"></i><b>3.7.1</b> Controlling aesthetic mapping</a></li>
<li class="chapter" data-level="3.7.2" data-path="Rgraphics.html"><a href="Rgraphics.html#common-scale-arguments"><i class="fa fa-check"></i><b>3.7.2</b> Common scale arguments</a></li>
<li class="chapter" data-level="3.7.3" data-path="Rgraphics.html"><a href="Rgraphics.html#scale-modification-examples"><i class="fa fa-check"></i><b>3.7.3</b> Scale modification examples</a></li>
<li class="chapter" data-level="3.7.4" data-path="Rgraphics.html"><a href="Rgraphics.html#using-different-color-scales"><i class="fa fa-check"></i><b>3.7.4</b> Using different color scales</a></li>
<li class="chapter" data-level="3.7.5" data-path="Rgraphics.html"><a href="Rgraphics.html#available-scales"><i class="fa fa-check"></i><b>3.7.5</b> Available scales</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-2-1"><i class="fa fa-check"></i><b>3.8</b> Exercise 2</a></li>
<li class="chapter" data-level="3.9" data-path="Rgraphics.html"><a href="Rgraphics.html#faceting"><i class="fa fa-check"></i><b>3.9</b> Faceting</a><ul>
<li class="chapter" data-level="3.9.1" data-path="Rgraphics.html"><a href="Rgraphics.html#what-is-faceting"><i class="fa fa-check"></i><b>3.9.1</b> What is faceting?</a></li>
<li class="chapter" data-level="3.9.2" data-path="Rgraphics.html"><a href="Rgraphics.html#what-is-the-trend-in-housing-prices-in-each-state"><i class="fa fa-check"></i><b>3.9.2</b> What is the trend in housing prices in each state?</a></li>
<li class="chapter" data-level="3.9.3" data-path="Rgraphics.html"><a href="Rgraphics.html#faceting-to-the-rescue"><i class="fa fa-check"></i><b>3.9.3</b> Faceting to the rescue</a></li>
</ul></li>
<li class="chapter" data-level="3.10" data-path="Rgraphics.html"><a href="Rgraphics.html#themes"><i class="fa fa-check"></i><b>3.10</b> Themes</a><ul>
<li class="chapter" data-level="3.10.1" data-path="Rgraphics.html"><a href="Rgraphics.html#what-are-themes"><i class="fa fa-check"></i><b>3.10.1</b> What are themes?</a></li>
<li class="chapter" data-level="3.10.2" data-path="Rgraphics.html"><a href="Rgraphics.html#overriding-theme-defaults"><i class="fa fa-check"></i><b>3.10.2</b> Overriding theme defaults</a></li>
<li class="chapter" data-level="3.10.3" data-path="Rgraphics.html"><a href="Rgraphics.html#creating-and-saving-new-themes"><i class="fa fa-check"></i><b>3.10.3</b> Creating and saving new themes</a></li>
</ul></li>
<li class="chapter" data-level="3.11" data-path="Rgraphics.html"><a href="Rgraphics.html#the-1-faq"><i class="fa fa-check"></i><b>3.11</b> The #1 FAQ</a><ul>
<li class="chapter" data-level="3.11.1" data-path="Rgraphics.html"><a href="Rgraphics.html#map-aesthetic-to-different-columns"><i class="fa fa-check"></i><b>3.11.1</b> Map aesthetic to different columns</a></li>
</ul></li>
<li class="chapter" data-level="3.12" data-path="Rgraphics.html"><a href="Rgraphics.html#putting-it-all-together"><i class="fa fa-check"></i><b>3.12</b> Putting it all together</a><ul>
<li class="chapter" data-level="3.12.1" data-path="Rgraphics.html"><a href="Rgraphics.html#challenge-recreate-this-economist-graph"><i class="fa fa-check"></i><b>3.12.1</b> Challenge: recreate this <code>Economist</code> graph</a></li>
<li class="chapter" data-level="3.12.2" data-path="Rgraphics.html"><a href="Rgraphics.html#challenge-solution"><i class="fa fa-check"></i><b>3.12.2</b> Challenge solution:</a></li>
</ul></li>
<li class="chapter" data-level="3.13" data-path="Rgraphics.html"><a href="Rgraphics.html#exercise-solutions-2"><i class="fa fa-check"></i><b>3.13</b> Exercise solutions</a><ul>
<li class="chapter" data-level="3.13.1" data-path="Rgraphics.html"><a href="Rgraphics.html#ex-0-prototype-2"><i class="fa fa-check"></i><b>3.13.1</b> Ex 0: prototype</a></li>
<li class="chapter" data-level="3.13.2" data-path="Rgraphics.html"><a href="Rgraphics.html#ex-1-prototype-2"><i class="fa fa-check"></i><b>3.13.2</b> Ex 1: prototype</a></li>
<li class="chapter" data-level="3.13.3" data-path="Rgraphics.html"><a href="Rgraphics.html#ex-2-prototype-1"><i class="fa fa-check"></i><b>3.13.3</b> Ex 2: prototype</a></li>
</ul></li>
<li class="chapter" data-level="3.14" data-path="Rgraphics.html"><a href="Rgraphics.html#wrap-up-2"><i class="fa fa-check"></i><b>3.14</b> Wrap-up</a><ul>
<li class="chapter" data-level="3.14.1" data-path="Rgraphics.html"><a href="Rgraphics.html#feedback-2"><i class="fa fa-check"></i><b>3.14.1</b> Feedback</a></li>
<li class="chapter" data-level="3.14.2" data-path="Rgraphics.html"><a href="Rgraphics.html#resources-2"><i class="fa fa-check"></i><b>3.14.2</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="RDataWrangling.html"><a href="RDataWrangling.html"><i class="fa fa-check"></i><b>4</b> R Data Wrangling</a><ul>
<li class="chapter" data-level="4.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#setup-3"><i class="fa fa-check"></i><b>4.1</b> Setup</a><ul>
<li class="chapter" data-level="4.1.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#software-materials-3"><i class="fa fa-check"></i><b>4.1.1</b> Software &amp; materials</a></li>
<li class="chapter" data-level="4.1.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#goals-3"><i class="fa fa-check"></i><b>4.1.2</b> Goals</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#example-project"><i class="fa fa-check"></i><b>4.2</b> Example project</a><ul>
<li class="chapter" data-level="4.2.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#problems-with-the-data"><i class="fa fa-check"></i><b>4.2.1</b> Problems with the data</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-0-3"><i class="fa fa-check"></i><b>4.3</b> Exercise 0</a></li>
<li class="chapter" data-level="4.4" data-path="RDataWrangling.html"><a href="RDataWrangling.html#useful-data-manipulation-packages"><i class="fa fa-check"></i><b>4.4</b> Useful data manipulation packages</a></li>
<li class="chapter" data-level="4.5" data-path="RDataWrangling.html"><a href="RDataWrangling.html#working-with-excel-worksheets"><i class="fa fa-check"></i><b>4.5</b> Working with Excel worksheets</a><ul>
<li class="chapter" data-level="4.5.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#iterating-over-file-names-with-map"><i class="fa fa-check"></i><b>4.5.1</b> Iterating over file names with <code>map</code></a></li>
<li class="chapter" data-level="4.5.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#filtering-strings-using-regular-expressions"><i class="fa fa-check"></i><b>4.5.2</b> Filtering strings using regular expressions</a></li>
<li class="chapter" data-level="4.5.3" data-path="RDataWrangling.html"><a href="RDataWrangling.html#writing-your-own-functions"><i class="fa fa-check"></i><b>4.5.3</b> Writing your own functions</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="RDataWrangling.html"><a href="RDataWrangling.html#reading-excel-data-files"><i class="fa fa-check"></i><b>4.6</b> Reading Excel data files</a></li>
<li class="chapter" data-level="4.7" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-1-3"><i class="fa fa-check"></i><b>4.7</b> Exercise 1</a></li>
<li class="chapter" data-level="4.8" data-path="RDataWrangling.html"><a href="RDataWrangling.html#data-cleanup"><i class="fa fa-check"></i><b>4.8</b> Data cleanup</a><ul>
<li class="chapter" data-level="4.8.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#selecting-columns"><i class="fa fa-check"></i><b>4.8.1</b> Selecting columns</a></li>
<li class="chapter" data-level="4.8.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#dropping-missing-values"><i class="fa fa-check"></i><b>4.8.2</b> Dropping missing values</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-2-2"><i class="fa fa-check"></i><b>4.9</b> Exercise 2</a><ul>
<li class="chapter" data-level="4.9.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#re-arranging-into-a-single-table"><i class="fa fa-check"></i><b>4.9.1</b> Re-arranging into a single table</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-3-2"><i class="fa fa-check"></i><b>4.10</b> Exercise 3</a></li>
<li class="chapter" data-level="4.11" data-path="RDataWrangling.html"><a href="RDataWrangling.html#data-organization-and-storage"><i class="fa fa-check"></i><b>4.11</b> Data organization and storage</a><ul>
<li class="chapter" data-level="4.11.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#one-table-for-each-year"><i class="fa fa-check"></i><b>4.11.1</b> One table for each year</a></li>
<li class="chapter" data-level="4.11.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#one-big-table"><i class="fa fa-check"></i><b>4.11.2</b> One big table</a></li>
</ul></li>
<li class="chapter" data-level="4.12" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-4-1"><i class="fa fa-check"></i><b>4.12</b> Exercise 4</a></li>
<li class="chapter" data-level="4.13" data-path="RDataWrangling.html"><a href="RDataWrangling.html#exercise-solutions-3"><i class="fa fa-check"></i><b>4.13</b> Exercise solutions</a><ul>
<li class="chapter" data-level="4.13.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#ex-0-prototype-3"><i class="fa fa-check"></i><b>4.13.1</b> Ex 0: prototype</a></li>
<li class="chapter" data-level="4.13.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#ex-1-prototype-3"><i class="fa fa-check"></i><b>4.13.2</b> Ex 1: prototype</a></li>
<li class="chapter" data-level="4.13.3" data-path="RDataWrangling.html"><a href="RDataWrangling.html#ex-2-prototype-2"><i class="fa fa-check"></i><b>4.13.3</b> Ex 2: prototype</a></li>
<li class="chapter" data-level="4.13.4" data-path="RDataWrangling.html"><a href="RDataWrangling.html#ex-3-prototype-2"><i class="fa fa-check"></i><b>4.13.4</b> Ex 3: prototype</a></li>
<li class="chapter" data-level="4.13.5" data-path="RDataWrangling.html"><a href="RDataWrangling.html#ex-4-prototype-1"><i class="fa fa-check"></i><b>4.13.5</b> Ex 4: prototype</a></li>
</ul></li>
<li class="chapter" data-level="4.14" data-path="RDataWrangling.html"><a href="RDataWrangling.html#wrap-up-3"><i class="fa fa-check"></i><b>4.14</b> Wrap-up</a><ul>
<li class="chapter" data-level="4.14.1" data-path="RDataWrangling.html"><a href="RDataWrangling.html#feedback-3"><i class="fa fa-check"></i><b>4.14.1</b> Feedback</a></li>
<li class="chapter" data-level="4.14.2" data-path="RDataWrangling.html"><a href="RDataWrangling.html#resources-3"><i class="fa fa-check"></i><b>4.14.2</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Python</b></span></li>
<li class="chapter" data-level="5" data-path="PythonIntro.html"><a href="PythonIntro.html"><i class="fa fa-check"></i><b>5</b> Python Introduction</a><ul>
<li class="chapter" data-level="5.1" data-path="PythonIntro.html"><a href="PythonIntro.html#setup-4"><i class="fa fa-check"></i><b>5.1</b> Setup</a><ul>
<li class="chapter" data-level="5.1.1" data-path="PythonIntro.html"><a href="PythonIntro.html#software-materials-4"><i class="fa fa-check"></i><b>5.1.1</b> Software &amp; Materials</a></li>
<li class="chapter" data-level="5.1.2" data-path="PythonIntro.html"><a href="PythonIntro.html#goals-4"><i class="fa fa-check"></i><b>5.1.2</b> Goals</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="PythonIntro.html"><a href="PythonIntro.html#what-is-python"><i class="fa fa-check"></i><b>5.2</b> What is Python?</a></li>
<li class="chapter" data-level="5.3" data-path="PythonIntro.html"><a href="PythonIntro.html#how-can-i-interact-with-python"><i class="fa fa-check"></i><b>5.3</b> How can I interact with Python?</a></li>
<li class="chapter" data-level="5.4" data-path="PythonIntro.html"><a href="PythonIntro.html#reading-the-text-of-alice-in-wonderland-from-a-file"><i class="fa fa-check"></i><b>5.4</b> Reading the text of Alice in Wonderland from a file</a></li>
<li class="chapter" data-level="5.5" data-path="PythonIntro.html"><a href="PythonIntro.html#counting-chapters-lines-and-words"><i class="fa fa-check"></i><b>5.5</b> Counting chapters, lines, and words</a><ul>
<li class="chapter" data-level="5.5.1" data-path="PythonIntro.html"><a href="PythonIntro.html#splitting-a-string-into-a-list-of-words"><i class="fa fa-check"></i><b>5.5.1</b> Splitting a string into a list of words</a></li>
<li class="chapter" data-level="5.5.2" data-path="PythonIntro.html"><a href="PythonIntro.html#using-sets-to-calculate-the-number-of-unique-words"><i class="fa fa-check"></i><b>5.5.2</b> Using sets to calculate the number of unique words</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="PythonIntro.html"><a href="PythonIntro.html#exercise-reading-text-from-a-file-and-splitting"><i class="fa fa-check"></i><b>5.6</b> Exercise: Reading text from a file and splitting</a><ul>
<li class="chapter" data-level="5.6.1" data-path="PythonIntro.html"><a href="PythonIntro.html#working-with-lists"><i class="fa fa-check"></i><b>5.6.1</b> Working with lists</a></li>
<li class="chapter" data-level="5.6.2" data-path="PythonIntro.html"><a href="PythonIntro.html#counting-chapters-and-paragraphs"><i class="fa fa-check"></i><b>5.6.2</b> Counting chapters and paragraphs</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="PythonIntro.html"><a href="PythonIntro.html#exercise-count-the-number-of-main-characters"><i class="fa fa-check"></i><b>5.7</b> Exercise: count the number of main characters</a></li>
<li class="chapter" data-level="5.8" data-path="PythonIntro.html"><a href="PythonIntro.html#working-with-nested-structures-words-within-paragraphs-within-chapters"><i class="fa fa-check"></i><b>5.8</b> Working with nested structures: words within paragraphs within chapters</a><ul>
<li class="chapter" data-level="5.8.1" data-path="PythonIntro.html"><a href="PythonIntro.html#iterating-over-paragraphs-using-for-loops"><i class="fa fa-check"></i><b>5.8.1</b> Iterating over paragraphs using for-loops</a></li>
<li class="chapter" data-level="5.8.2" data-path="PythonIntro.html"><a href="PythonIntro.html#iterating-and-collecting-paragraphs-per-chapter-using-list-comprehension"><i class="fa fa-check"></i><b>5.8.2</b> Iterating and collecting paragraphs per chapter using list comprehension</a></li>
<li class="chapter" data-level="5.8.3" data-path="PythonIntro.html"><a href="PythonIntro.html#organizing-results-in-dictionaries"><i class="fa fa-check"></i><b>5.8.3</b> Organizing results in dictionaries</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="PythonIntro.html"><a href="PythonIntro.html#exercise-iterating-and-counting-things"><i class="fa fa-check"></i><b>5.9</b> Exercise: Iterating and counting things</a></li>
<li class="chapter" data-level="5.10" data-path="PythonIntro.html"><a href="PythonIntro.html#importing-numpy-and-calculating-simple-statistics"><i class="fa fa-check"></i><b>5.10</b> Importing numpy and calculating simple statistics</a></li>
<li class="chapter" data-level="5.11" data-path="PythonIntro.html"><a href="PythonIntro.html#wrap-up-4"><i class="fa fa-check"></i><b>5.11</b> Wrap-up</a><ul>
<li class="chapter" data-level="5.11.1" data-path="PythonIntro.html"><a href="PythonIntro.html#feedback-4"><i class="fa fa-check"></i><b>5.11.1</b> Feedback</a></li>
<li class="chapter" data-level="5.11.2" data-path="PythonIntro.html"><a href="PythonIntro.html#resources-4"><i class="fa fa-check"></i><b>5.11.2</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html"><i class="fa fa-check"></i><b>6</b> Python Web-Scraping</a><ul>
<li class="chapter" data-level="6.1" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#setup-5"><i class="fa fa-check"></i><b>6.1</b> Setup</a><ul>
<li class="chapter" data-level="6.1.1" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#software-materials-5"><i class="fa fa-check"></i><b>6.1.1</b> Software &amp; Materials</a></li>
<li class="chapter" data-level="6.1.2" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#goals-5"><i class="fa fa-check"></i><b>6.1.2</b> Goals</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#preliminary-questions"><i class="fa fa-check"></i><b>6.2</b> Preliminary questions</a><ul>
<li class="chapter" data-level="6.2.1" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#what-is-web-scraping"><i class="fa fa-check"></i><b>6.2.1</b> What is web scraping?</a></li>
<li class="chapter" data-level="6.2.2" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#is-web-scraping-legal-is-it-ethical"><i class="fa fa-check"></i><b>6.2.2</b> Is web scraping legal? Is it ethical?</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#example-project-1"><i class="fa fa-check"></i><b>6.3</b> Example project</a></li>
<li class="chapter" data-level="6.4" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#take-shortcuts-if-you-can"><i class="fa fa-check"></i><b>6.4</b> Take shortcuts if you can</a><ul>
<li class="chapter" data-level="6.4.1" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#examining-the-structure-of-our-target-web-service"><i class="fa fa-check"></i><b>6.4.1</b> Examining the structure of our target web service</a></li>
<li class="chapter" data-level="6.4.2" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#making-requests-using-python"><i class="fa fa-check"></i><b>6.4.2</b> Making requests using python</a></li>
<li class="chapter" data-level="6.4.3" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#organizing-and-saving-the-data"><i class="fa fa-check"></i><b>6.4.3</b> Organizing and saving the data</a></li>
<li class="chapter" data-level="6.4.4" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#iterating-to-retrieve-all-the-data"><i class="fa fa-check"></i><b>6.4.4</b> Iterating to retrieve all the data</a></li>
<li class="chapter" data-level="6.4.5" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#exercise-retrieve-exhibits-data"><i class="fa fa-check"></i><b>6.4.5</b> Exercise: Retrieve exhibits data</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#parse-html-if-you-have-to"><i class="fa fa-check"></i><b>6.5</b> Parse html if you have to</a><ul>
<li class="chapter" data-level="6.5.1" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#retrieving-html"><i class="fa fa-check"></i><b>6.5.1</b> Retrieving HTML</a></li>
<li class="chapter" data-level="6.5.2" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#parsing-html-using-the-lxml-library"><i class="fa fa-check"></i><b>6.5.2</b> Parsing HTML using the lxml library</a></li>
<li class="chapter" data-level="6.5.3" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#using-xpath-to-extract-content-from-html"><i class="fa fa-check"></i><b>6.5.3</b> Using xpath to extract content from HTML</a></li>
<li class="chapter" data-level="6.5.4" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#iterating-to-retrieve-content-from-a-list-of-html-elements"><i class="fa fa-check"></i><b>6.5.4</b> Iterating to retrieve content from a list of HTML elements</a></li>
<li class="chapter" data-level="6.5.5" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#exercise-parsing-html"><i class="fa fa-check"></i><b>6.5.5</b> Exercise: parsing HTML</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#use-scrapy-for-large-or-complicated-projects"><i class="fa fa-check"></i><b>6.6</b> Use Scrapy for large or complicated projects</a></li>
<li class="chapter" data-level="6.7" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#use-a-browser-driver-as-a-last-resort"><i class="fa fa-check"></i><b>6.7</b> Use a browser driver as a last resort</a></li>
<li class="chapter" data-level="6.8" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#wrap-up-5"><i class="fa fa-check"></i><b>6.8</b> Wrap-up</a><ul>
<li class="chapter" data-level="6.8.1" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#feedback-5"><i class="fa fa-check"></i><b>6.8.1</b> Feedback</a></li>
<li class="chapter" data-level="6.8.2" data-path="PythonWebScrape.html"><a href="PythonWebScrape.html#resources-5"><i class="fa fa-check"></i><b>6.8.2</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Stata</b></span></li>
<li class="chapter" data-level="7" data-path="StataIntro.html"><a href="StataIntro.html"><i class="fa fa-check"></i><b>7</b> Stata Introduction</a><ul>
<li class="chapter" data-level="7.1" data-path="StataIntro.html"><a href="StataIntro.html#setup-6"><i class="fa fa-check"></i><b>7.1</b> Setup</a><ul>
<li class="chapter" data-level="7.1.1" data-path="StataIntro.html"><a href="StataIntro.html#software-materials-6"><i class="fa fa-check"></i><b>7.1.1</b> Software &amp; Materials</a></li>
<li class="chapter" data-level="7.1.2" data-path="StataIntro.html"><a href="StataIntro.html#organization"><i class="fa fa-check"></i><b>7.1.2</b> Organization</a></li>
<li class="chapter" data-level="7.1.3" data-path="StataIntro.html"><a href="StataIntro.html#goals-6"><i class="fa fa-check"></i><b>7.1.3</b> Goals</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="StataIntro.html"><a href="StataIntro.html#why-stata"><i class="fa fa-check"></i><b>7.2</b> Why stata?</a><ul>
<li class="chapter" data-level="7.2.1" data-path="StataIntro.html"><a href="StataIntro.html#stata-interface"><i class="fa fa-check"></i><b>7.2.1</b> Stata interface</a></li>
<li class="chapter" data-level="7.2.2" data-path="StataIntro.html"><a href="StataIntro.html#do-files"><i class="fa fa-check"></i><b>7.2.2</b> Do-files</a></li>
<li class="chapter" data-level="7.2.3" data-path="StataIntro.html"><a href="StataIntro.html#stata-help"><i class="fa fa-check"></i><b>7.2.3</b> Stata help</a></li>
<li class="chapter" data-level="7.2.4" data-path="StataIntro.html"><a href="StataIntro.html#general-stata-command-syntax"><i class="fa fa-check"></i><b>7.2.4</b> General Stata command syntax</a></li>
<li class="chapter" data-level="7.2.5" data-path="StataIntro.html"><a href="StataIntro.html#commenting-and-formatting-syntax"><i class="fa fa-check"></i><b>7.2.5</b> Commenting and formatting syntax</a></li>
<li class="chapter" data-level="7.2.6" data-path="StataIntro.html"><a href="StataIntro.html#lets-get-started"><i class="fa fa-check"></i><b>7.2.6</b> Let’s get started</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="StataIntro.html"><a href="StataIntro.html#getting-data-into-stata"><i class="fa fa-check"></i><b>7.3</b> Getting data into Stata</a><ul>
<li class="chapter" data-level="7.3.1" data-path="StataIntro.html"><a href="StataIntro.html#data-file-commands"><i class="fa fa-check"></i><b>7.3.1</b> Data file commands</a></li>
<li class="chapter" data-level="7.3.2" data-path="StataIntro.html"><a href="StataIntro.html#a-note-about-path-names"><i class="fa fa-check"></i><b>7.3.2</b> A note about path names</a></li>
<li class="chapter" data-level="7.3.3" data-path="StataIntro.html"><a href="StataIntro.html#wheres-my-data"><i class="fa fa-check"></i><b>7.3.3</b> Where’s my data?</a></li>
<li class="chapter" data-level="7.3.4" data-path="StataIntro.html"><a href="StataIntro.html#what-if-my-data-is-not-a-stata-file"><i class="fa fa-check"></i><b>7.3.4</b> What if my data is not a Stata file?</a></li>
<li class="chapter" data-level="7.3.5" data-path="StataIntro.html"><a href="StataIntro.html#what-if-my-data-is-from-another-statistical-software-program"><i class="fa fa-check"></i><b>7.3.5</b> What if my data is from another statistical software program?</a></li>
<li class="chapter" data-level="7.3.6" data-path="StataIntro.html"><a href="StataIntro.html#exercise-1-importing-data"><i class="fa fa-check"></i><b>7.3.6</b> Exercise 1: Importing data</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="StataIntro.html"><a href="StataIntro.html#statistics-and-graphs"><i class="fa fa-check"></i><b>7.4</b> Statistics and graphs</a><ul>
<li class="chapter" data-level="7.4.1" data-path="StataIntro.html"><a href="StataIntro.html#frequently-used-commands"><i class="fa fa-check"></i><b>7.4.1</b> Frequently used commands</a></li>
<li class="chapter" data-level="7.4.2" data-path="StataIntro.html"><a href="StataIntro.html#basic-graphing-commands"><i class="fa fa-check"></i><b>7.4.2</b> Basic graphing commands</a></li>
<li class="chapter" data-level="7.4.3" data-path="StataIntro.html"><a href="StataIntro.html#the-by-command"><i class="fa fa-check"></i><b>7.4.3</b> The “by” command</a></li>
<li class="chapter" data-level="7.4.4" data-path="StataIntro.html"><a href="StataIntro.html#exercise-2-descriptive-statistics"><i class="fa fa-check"></i><b>7.4.4</b> Exercise 2: Descriptive statistics</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="StataIntro.html"><a href="StataIntro.html#basic-data-management"><i class="fa fa-check"></i><b>7.5</b> Basic data management</a><ul>
<li class="chapter" data-level="7.5.1" data-path="StataIntro.html"><a href="StataIntro.html#labels"><i class="fa fa-check"></i><b>7.5.1</b> Labels</a></li>
<li class="chapter" data-level="7.5.2" data-path="StataIntro.html"><a href="StataIntro.html#variable-and-value-labels"><i class="fa fa-check"></i><b>7.5.2</b> Variable and value labels</a></li>
<li class="chapter" data-level="7.5.3" data-path="StataIntro.html"><a href="StataIntro.html#exercise-3-variable-labels-and-value-labels"><i class="fa fa-check"></i><b>7.5.3</b> Exercise 3: Variable labels and value labels</a></li>
<li class="chapter" data-level="7.5.4" data-path="StataIntro.html"><a href="StataIntro.html#working-on-subsets"><i class="fa fa-check"></i><b>7.5.4</b> Working on subsets</a></li>
<li class="chapter" data-level="7.5.5" data-path="StataIntro.html"><a href="StataIntro.html#generating-and-replacing-variables"><i class="fa fa-check"></i><b>7.5.5</b> Generating and replacing variables</a></li>
<li class="chapter" data-level="7.5.6" data-path="StataIntro.html"><a href="StataIntro.html#exercise-4-manipulating-variables"><i class="fa fa-check"></i><b>7.5.6</b> Exercise 4: Manipulating variables</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="StataIntro.html"><a href="StataIntro.html#wrap-up-6"><i class="fa fa-check"></i><b>7.6</b> Wrap-up</a><ul>
<li class="chapter" data-level="7.6.1" data-path="StataIntro.html"><a href="StataIntro.html#feedback-6"><i class="fa fa-check"></i><b>7.6.1</b> Feedback</a></li>
<li class="chapter" data-level="7.6.2" data-path="StataIntro.html"><a href="StataIntro.html#resources-6"><i class="fa fa-check"></i><b>7.6.2</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">IQSS Workshops</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-graphics" class="section level1">
<h1><span class="header-section-number">3</span> R Graphics</h1>
<p><strong>Topics</strong></p>
<ul>
<li>R ggplot2 package</li>
<li>Setup basic plots</li>
<li>Add and modify scales and legends</li>
<li>Manipulate plot labels</li>
<li>Change and create plot themes</li>
</ul>
<div id="setup-2" class="section level2">
<h2><span class="header-section-number">3.1</span> Setup</h2>
<div id="software-materials-2" class="section level3">
<h3><span class="header-section-number">3.1.1</span> Software &amp; materials</h3>
<p>You should have R and RStudio installed — if not:</p>
<ul>
<li>Download and install <a href="http://cran.r-project.org">R</a></li>
<li>Download and install <a href="https://www.rstudio.com/products/rstudio/download/#download">RStudio</a></li>
</ul>
<p>Download materials:</p>
<ul>
<li><a href="http://tutorials.iq.harvard.edu/R/Rgraphics.zip">Download workshop materials</a></li>
<li>Extract materials from <code>Rgraphics.zip</code> and move to your desktop.</li>
</ul>
<p>Start RStudio and create a new project:</p>
<ul>
<li>On Windows click the start button and search for RStudio. On Mac RStudio will be in your applications folder.</li>
<li>In Rstudio go to <code>File -&gt; New Project</code>.</li>
<li>Choose <code>Existing Directory</code> and browse to the <code>Rgraphics</code> directory.</li>
<li>Choose <code>File -&gt; Open File</code> and select the blank version of the <code>.Rmd</code> file.</li>
</ul>
<p>While R’s built-in packages are powerful, in recent years there has been a big surge in well-designed <em>contributed packages</em> for R.<br />
In particular, a collection of R packages called <a href="https://www.tidyverse.org/">tidyverse</a> have been designed specifically for data science. All packages included in <code>tidyverse</code> share an underlying design philosophy, grammar, and data structures. We will use <code>tidyverse</code> packages throughout the workshop, so let’s install them now:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages(&quot;tidyverse&quot;)</span>
<span class="kw">library</span>(tidyverse)</code></pre></div>
<p>Set your working directory so you don’t have to type the full path names to your data and other files</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># set the working directory</span>
  <span class="co"># setwd(&quot;~/Desktop/Rgraphics&quot;) # UNIX-based</span>
  <span class="co"># setwd(&quot;C:/Users/dataclass/Desktop/Rgraphics&quot;) # MS Windows</span></code></pre></div>
</div>
<div id="goals-2" class="section level3">
<h3><span class="header-section-number">3.1.2</span> Goals</h3>
<p>Class Structure and Organization:</p>
<ul>
<li>Ask questions at any time. Really!</li>
<li>Collaboration is encouraged - please spend a minute introducing yourself to your neighbors!</li>
</ul>
<p>This is an intermediate R course:</p>
<ul>
<li>Assumes working knowledge of R</li>
<li>Relatively fast-paced</li>
<li>Focus is on <code>ggplot2</code> graphics; other packages will not be covered</li>
</ul>
</div>
<div id="starting-at-the-end" class="section level3">
<h3><span class="header-section-number">3.1.3</span> Starting at the end</h3>
<p>By the end of the workshop you will be able to reproduce this graphic from the Economist:</p>
<div class="figure">
<img src="R/Rgraphics/images/Economist1.png" alt="img" />
<p class="caption">img</p>
</div>
</div>
</div>
<div id="why-ggplot2" class="section level2">
<h2><span class="header-section-number">3.2</span> Why <code>ggplot2</code>?</h2>
<p>Advantages of ggplot2</p>
<ul>
<li>consistent underlying <code>grammar of graphics</code> (Wilkinson, 2005)</li>
<li>plot specification at a high level of abstraction</li>
<li>very flexible</li>
<li>theme system for polishing plot appearance</li>
<li>mature and complete graphics system</li>
<li>many users, active mailing list</li>
</ul>
<p>That said, there are some things you cannot (or should not) do With ggplot2:</p>
<ul>
<li>3-dimensional graphics (see the rgl package)</li>
<li>Graph-theory type graphs (nodes/edges layout; see the igraph package)</li>
<li>Interactive graphics (see the ggvis package)</li>
</ul>
<div id="what-is-the-grammar-of-graphics" class="section level3">
<h3><span class="header-section-number">3.2.1</span> What is the Grammar Of Graphics?</h3>
<p>The basic idea: independently specify plot building blocks and combine them to create just about any kind of graphical display you want. Building blocks of a graph include:</p>
<ul>
<li>data</li>
<li>aesthetic mapping</li>
<li>geometric object</li>
<li>statistical transformations</li>
<li>scales</li>
<li>coordinate system</li>
<li>position adjustments</li>
<li>faceting</li>
</ul>
</div>
<div id="example-data-housing-prices" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Example data: <code>housing prices</code></h3>
<p>Let’s look at housing prices.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">housing &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;dataSets/landdata-states.csv&quot;</span>)
<span class="kw">head</span>(housing[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>])</code></pre></div>
</div>
<div id="ggplot2-vs-base-graphics" class="section level3">
<h3><span class="header-section-number">3.2.3</span> <code>ggplot2</code> VS base graphics</h3>
<p>Compared to base graphics, <code>ggplot2</code></p>
<ul>
<li>is more verbose for simple / canned graphics</li>
<li>is less verbose for complex / custom graphics</li>
<li>does not have methods (data should always be in a <code>data.frame</code>)</li>
<li>uses a different system for adding plot elements</li>
</ul>
</div>
<div id="for-simple-graphs" class="section level3">
<h3><span class="header-section-number">3.2.4</span> For simple graphs</h3>
<p>Base graphics histogram example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(housing<span class="op">$</span>Home.Value)</code></pre></div>
<p><code>ggplot2</code> histogram example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)
<span class="kw">ggplot</span>(housing, <span class="kw">aes</span>(<span class="dt">x =</span> Home.Value)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>()</code></pre></div>
</div>
<div id="for-more-complex-graphs" class="section level3">
<h3><span class="header-section-number">3.2.5</span> For more complex graphs:</h3>
<p>Base graphics colored scatter plot example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(Home.Value <span class="op">~</span><span class="st"> </span>Date,
     <span class="dt">col =</span> <span class="kw">factor</span>(State),
     <span class="dt">data =</span> <span class="kw">filter</span>(housing, State <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;MA&quot;</span>, <span class="st">&quot;TX&quot;</span>)))
<span class="kw">legend</span>(<span class="st">&quot;topleft&quot;</span>,
       <span class="dt">legend =</span> <span class="kw">c</span>(<span class="st">&quot;MA&quot;</span>, <span class="st">&quot;TX&quot;</span>),
       <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">&quot;black&quot;</span>, <span class="st">&quot;red&quot;</span>),
       <span class="dt">pch =</span> <span class="dv">1</span>)</code></pre></div>
<p><code>ggplot2</code> colored scatter plot example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="kw">filter</span>(housing, State <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;MA&quot;</span>, <span class="st">&quot;TX&quot;</span>)),
       <span class="kw">aes</span>(<span class="dt">x=</span>Date,
           <span class="dt">y=</span>Home.Value,
           <span class="dt">color=</span>State))<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<p><code>ggplot2</code> wins!</p>
</div>
</div>
<div id="geometric-objects-and-aesthetics" class="section level2">
<h2><span class="header-section-number">3.3</span> Geometric objects and aesthetics</h2>
<div id="aesthetic-mapping" class="section level3">
<h3><span class="header-section-number">3.3.1</span> Aesthetic mapping</h3>
<p>In ggplot land <em>aesthetic</em> means “something you can see”. Examples include:</p>
<ul>
<li>position (i.e., on the x and y axes)</li>
<li>color (“outside” color)</li>
<li>fill (“inside” color)</li>
<li>shape (of points)</li>
<li>linetype</li>
<li>size</li>
</ul>
<p>Each type of geom accepts only a subset of all aesthetics;refer to the geom help pages to see what mappings each geom accepts. Aesthetic mappings are set with the <code>aes()</code> function.</p>
</div>
<div id="geometic-objects-geom" class="section level3">
<h3><span class="header-section-number">3.3.2</span> Geometic objects (<code>geom</code>)</h3>
<p>Geometric objects are the actual marks we put on a plot. Examples include:</p>
<ul>
<li>points (<code>geom_point</code>, for scatter plots, dot plots, etc.)</li>
<li>lines (<code>geom_line</code>, for time series, trend lines, etc.)</li>
<li>boxplot (<code>geom_boxplot</code>, for, well, boxplots!)</li>
</ul>
<p>A plot must have at least one geom; there is no upper limit. You can add a geom to a plot using the <code>+</code> operator</p>
<p>You can get a list of available geometric objects using the code below:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">help.search</span>(<span class="st">&quot;geom_&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;ggplot2&quot;</span>)</code></pre></div>
<p>or simply type <code>geom_&lt;tab&gt;</code> in any good R IDE (such as Rstudio or ESS) to see a list of functions starting with <code>geom_</code>.</p>
</div>
<div id="points-scatterplot" class="section level3">
<h3><span class="header-section-number">3.3.3</span> Points (scatterplot)</h3>
<p>Now that we know about geometric objects and aesthetic mapping, we can make a ggplot. <code>geom_point</code> requires mappings for x and y, all others are optional.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">hp2001Q1 &lt;-<span class="st"> </span><span class="kw">filter</span>(housing, Date <span class="op">==</span><span class="st"> </span><span class="fl">2001.25</span>) 
<span class="kw">ggplot</span>(hp2001Q1,
       <span class="kw">aes</span>(<span class="dt">y =</span> Structure.Cost, <span class="dt">x =</span> Land.Value)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(hp2001Q1,
       <span class="kw">aes</span>(<span class="dt">y =</span> Structure.Cost, <span class="dt">x =</span> <span class="kw">log</span>(Land.Value))) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
</div>
<div id="lines-prediction-line" class="section level3">
<h3><span class="header-section-number">3.3.4</span> Lines (prediction line)</h3>
<p>A plot constructed with <code>ggplot</code> can have more than one geom. In that case the mappings established in the <code>ggplot()</code> call are plot defaults that can be added to or overridden. Our plot could use a regression line:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">hp2001Q1<span class="op">$</span>pred.SC &lt;-<span class="st"> </span><span class="kw">predict</span>(<span class="kw">lm</span>(Structure.Cost <span class="op">~</span><span class="st"> </span><span class="kw">log</span>(Land.Value), <span class="dt">data =</span> hp2001Q1))

p1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(hp2001Q1, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">log</span>(Land.Value), <span class="dt">y =</span> Structure.Cost))

p1 <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> Home.Value)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> pred.SC))</code></pre></div>
</div>
<div id="smoothers" class="section level3">
<h3><span class="header-section-number">3.3.5</span> Smoothers</h3>
<p>Not all geometric objects are simple shapes–the smooth geom includes a line and a ribbon.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p1 <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> Home.Value)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_smooth</span>()</code></pre></div>
</div>
<div id="text-label-points" class="section level3">
<h3><span class="header-section-number">3.3.6</span> Text (label points)</h3>
<p>Each <code>geom</code> accepts a particualar set of mappings;for example <code>geom_text()</code> accepts a <code>labels</code> mapping.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p1 <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label=</span>State), <span class="dt">size =</span> <span class="dv">3</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## install.packages(&quot;ggrepel&quot;) 
<span class="kw">library</span>(<span class="st">&quot;ggrepel&quot;</span>)
p1 <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_text_repel</span>(<span class="kw">aes</span>(<span class="dt">label=</span>State), <span class="dt">size =</span> <span class="dv">3</span>)</code></pre></div>
</div>
<div id="aesthetic-mapping-vs-assignment" class="section level3">
<h3><span class="header-section-number">3.3.7</span> Aesthetic mapping VS assignment</h3>
<p>Note that variables are mapped to aesthetics with the <code>aes()</code> function, while fixed aesthetics are set outside the <code>aes()</code> call. This sometimes leads to confusion, as in this example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p1 <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">size =</span> <span class="dv">2</span>),<span class="co"># incorrect! 2 is not a variable</span>
             <span class="dt">color=</span><span class="st">&quot;red&quot;</span>) <span class="co"># this is fine -- all points red</span></code></pre></div>
</div>
<div id="mapping-variables-to-other-aesthetics" class="section level3">
<h3><span class="header-section-number">3.3.8</span> Mapping variables to other aesthetics</h3>
<p>Other aesthetics are mapped in the same way as x and y in the previous example.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p1 <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color=</span>Home.Value, <span class="dt">shape =</span> region))</code></pre></div>
</div>
</div>
<div id="exercise-0-2" class="section level2">
<h2><span class="header-section-number">3.4</span> Exercise 0</h2>
<p>The data for the exercises is available in the <code>dataSets/EconomistData.csv</code> file. Read it in with</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;dataSets/EconomistData.csv&quot;</span>)</code></pre></div>
<p>Original sources for these data are <a href="http://www.transparency.org/content/download/64476/1031428" class="uri">http://www.transparency.org/content/download/64476/1031428</a> <a href="http://hdrstats.undp.org/en/indicators/display_cf_xls_indicator.cfm?indicator_id=103106&amp;lang=en" class="uri">http://hdrstats.undp.org/en/indicators/display_cf_xls_indicator.cfm?indicator_id=103106&amp;lang=en</a></p>
<p>These data consist of <em>Human Development Index</em> and <em>Corruption Perception Index</em> scores for several countries.</p>
<ol style="list-style-type: decimal">
<li>Create a scatter plot with CPI on the x axis and HDI on the y axis.</li>
<li>Color the points blue.</li>
<li>Map the color of the the points to Region.</li>
<li>Make the points bigger by setting size to 2</li>
<li>Map the size of the points to HDI.Rank</li>
</ol>
</div>
<div id="statistical-transformations" class="section level2">
<h2><span class="header-section-number">3.5</span> Statistical transformations</h2>
<div id="why-transform-data" class="section level3">
<h3><span class="header-section-number">3.5.1</span> Why transform data?</h3>
<p>Some plot types (such as scatterplots) do not require transformations; each point is plotted at x and y coordinates equal to the original value. Other plots, such as boxplots, histograms, prediction lines etc. require statistical transformations:</p>
<ul>
<li>for a boxplot the y values must be transformed to the median and 1.5(IQR)</li>
<li>for a smoother smother the y values must be transformed into predicted values</li>
</ul>
<p>Each <code>geom</code> has a default statistic, but these can be changed. For example, the default statistic for <code>geom_bar</code> is <code>stat_bin</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">args</span>(geom_histogram)
<span class="kw">args</span>(stat_bin)</code></pre></div>
</div>
<div id="setting-arguments" class="section level3">
<h3><span class="header-section-number">3.5.2</span> Setting arguments</h3>
<p>Arguments to <code>stat_</code> functions can be passed through <code>geom_</code> functions. This can be slightly annoying because in order to change it you have to first determine which stat the geom uses, then determine the arguments to that stat.</p>
<p>For example, here is the default histogram of Home.Value:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p2 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(housing, <span class="kw">aes</span>(<span class="dt">x =</span> Home.Value))
p2 <span class="op">+</span><span class="st"> </span><span class="kw">geom_histogram</span>()</code></pre></div>
<p>can change it by passing the <code>binwidth</code> argument to the <code>stat_bin</code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p2 <span class="op">+</span><span class="st"> </span><span class="kw">geom_histogram</span>(<span class="dt">stat =</span> <span class="st">&quot;bin&quot;</span>, <span class="dt">binwidth=</span><span class="dv">4000</span>)</code></pre></div>
</div>
<div id="changing-the-transformation" class="section level3">
<h3><span class="header-section-number">3.5.3</span> Changing the transformation</h3>
<p>Sometimes the default statistical transformation is not what you need. This is often the case with pre-summarized data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">housing.sum &lt;-<span class="st"> </span><span class="kw">aggregate</span>(housing[<span class="st">&quot;Home.Value&quot;</span>], housing[<span class="st">&quot;State&quot;</span>], <span class="dt">FUN=</span>mean)
<span class="kw">rbind</span>(<span class="kw">head</span>(housing.sum), <span class="kw">tail</span>(housing.sum))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(housing.sum, <span class="kw">aes</span>(<span class="dt">x=</span>State, <span class="dt">y=</span>Home.Value)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_bar</span>()</code></pre></div>
<p>What is the problem with the previous plot? Basically we take binned and summarized data and ask ggplot to bin and summarize it again (remember, <code>geom_bar</code> defaults to <code>stat = stat_count</code>); obviously this will not work. We can fix it by telling <code>geom_bar</code> to use a different statistical transformation function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(housing.sum, <span class="kw">aes</span>(<span class="dt">x=</span>State, <span class="dt">y=</span>Home.Value)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat=</span><span class="st">&quot;identity&quot;</span>)</code></pre></div>
</div>
</div>
<div id="exercise-1-2" class="section level2">
<h2><span class="header-section-number">3.6</span> Exercise 1</h2>
<ol style="list-style-type: decimal">
<li>Re-create a scatter plot with CPI on the x axis and HDI on the y axis (as you did in the previous exercise).</li>
<li>Overlay a smoothing line on top of the scatter plot using <code>geom_smooth</code>.</li>
<li>Overlay a smoothing line on top of the scatter plot using <code>geom_smooth</code>, but use a linear model for the predictions. Hint: see <code>?stat_smooth</code>.</li>
<li>Overlay a smoothing line on top of the scatter plot using <code>geom_line</code>. Hint: change the statistical transformation.</li>
<li>BONUS: Overlay a smoothing line on top of the scatter plot using the default <em>loess</em> method, but make it less smooth. Hint: see <code>?loess</code>.</li>
</ol>
</div>
<div id="scales" class="section level2">
<h2><span class="header-section-number">3.7</span> Scales</h2>
<div id="controlling-aesthetic-mapping" class="section level3">
<h3><span class="header-section-number">3.7.1</span> Controlling aesthetic mapping</h3>
<p>Aesthetic mapping (i.e., with <code>aes()</code>) only says that a variable should be mapped to an aesthetic. It doesn’t say <em>how</em> that should happen. For example, when mapping a variable to <em>shape</em> with <code>aes(shape = x)</code> you don’t say <em>what</em> shapes should be used. Similarly, <code>aes(color = z)</code> doesn’t say <em>what</em> colors should be used. Describing what colors/shapes/sizes etc. to use is done by modifying the corresponding <em>scale</em>. In <code>ggplot2</code> scales include</p>
<ul>
<li>position</li>
<li>color and fill</li>
<li>size</li>
<li>shape</li>
<li>line type</li>
</ul>
<p>Scales are modified with a series of functions using a <code>scale_&lt;aesthetic&gt;_&lt;type&gt;</code> naming scheme. Try typing <code>scale_&lt;tab&gt;</code> to see a list of scale modification functions.</p>
</div>
<div id="common-scale-arguments" class="section level3">
<h3><span class="header-section-number">3.7.2</span> Common scale arguments</h3>
<p>The following arguments are common to most scales in ggplot2:</p>
<ul>
<li><strong>name:</strong> the first argument gives the axis or legend title</li>
<li><strong>limits:</strong> the minimum and maximum of the scale</li>
<li><strong>breaks:</strong> the points along the scale where labels should appear</li>
<li><strong>labels:</strong> the labels that appear at each break</li>
</ul>
<p>Specific scale functions may have additional arguments; for example, the <code>scale_color_continuous</code> function has arguments <code>low</code> and <code>high</code> for setting the colors at the low and high end of the scale.</p>
</div>
<div id="scale-modification-examples" class="section level3">
<h3><span class="header-section-number">3.7.3</span> Scale modification examples</h3>
<p>Start by constructing a dotplot showing the distribution of home values by Date and State.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p3 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(housing,
             <span class="kw">aes</span>(<span class="dt">x =</span> State,
                 <span class="dt">y =</span> Home.Price.Index)) <span class="op">+</span><span class="st"> </span>
<span class="st">        </span><span class="kw">theme</span>(<span class="dt">legend.position=</span><span class="st">&quot;top&quot;</span>,
              <span class="dt">axis.text=</span><span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">6</span>))
(p4 &lt;-<span class="st"> </span>p3 <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> Date),
                       <span class="dt">alpha =</span> <span class="fl">0.5</span>,
                       <span class="dt">size =</span> <span class="fl">1.5</span>,
                       <span class="dt">position =</span> <span class="kw">position_jitter</span>(<span class="dt">width =</span> <span class="fl">0.25</span>, <span class="dt">height =</span> <span class="dv">0</span>)))</code></pre></div>
<p>Now modify the breaks for the x axis and color scales</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p4 <span class="op">+</span><span class="st"> </span><span class="kw">scale_x_discrete</span>(<span class="dt">name=</span><span class="st">&quot;State Abbreviation&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_color_continuous</span>(<span class="dt">name=</span><span class="st">&quot;&quot;</span>,
                         <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">1976</span>, <span class="dv">1994</span>, <span class="dv">2013</span>),
                         <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;&#39;76&quot;</span>, <span class="st">&quot;&#39;94&quot;</span>, <span class="st">&quot;&#39;13&quot;</span>))</code></pre></div>
<p>Next change the low and high values to blue and red:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p4 <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_discrete</span>(<span class="dt">name=</span><span class="st">&quot;State Abbreviation&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_color_continuous</span>(<span class="dt">name=</span><span class="st">&quot;&quot;</span>,
                         <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">1976</span>, <span class="dv">1994</span>, <span class="dv">2013</span>),
                         <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;&#39;76&quot;</span>, <span class="st">&quot;&#39;94&quot;</span>, <span class="st">&quot;&#39;13&quot;</span>),
                         <span class="dt">low =</span> <span class="st">&quot;blue&quot;</span>, <span class="dt">high =</span> <span class="st">&quot;red&quot;</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(scales)
p4 <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_color_continuous</span>(<span class="dt">name=</span><span class="st">&quot;&quot;</span>,
                         <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">1976</span>, <span class="dv">1994</span>, <span class="dv">2013</span>),
                         <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;&#39;76&quot;</span>, <span class="st">&quot;&#39;94&quot;</span>, <span class="st">&quot;&#39;13&quot;</span>),
                         <span class="dt">low =</span> <span class="kw">muted</span>(<span class="st">&quot;blue&quot;</span>), <span class="dt">high =</span> <span class="kw">muted</span>(<span class="st">&quot;red&quot;</span>))</code></pre></div>
</div>
<div id="using-different-color-scales" class="section level3">
<h3><span class="header-section-number">3.7.4</span> Using different color scales</h3>
<p>ggplot2 has a wide variety of color scales; here is an example using <code>scale_color_gradient2</code> to interpolate between three different colors.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p4 <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_color_gradient2</span>(<span class="dt">name=</span><span class="st">&quot;&quot;</span>,
                        <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">1976</span>, <span class="dv">1994</span>, <span class="dv">2013</span>),
                        <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;&#39;76&quot;</span>, <span class="st">&quot;&#39;94&quot;</span>, <span class="st">&quot;&#39;13&quot;</span>),
                        <span class="dt">low =</span> <span class="kw">muted</span>(<span class="st">&quot;blue&quot;</span>),
                        <span class="dt">high =</span> <span class="kw">muted</span>(<span class="st">&quot;red&quot;</span>),
                        <span class="dt">mid =</span> <span class="st">&quot;gray60&quot;</span>,
                        <span class="dt">midpoint =</span> <span class="dv">1994</span>)</code></pre></div>
</div>
<div id="available-scales" class="section level3">
<h3><span class="header-section-number">3.7.5</span> Available scales</h3>
<ul>
<li>Partial combination matrix of available scales</li>
</ul>
<table>
<thead>
<tr class="header">
<th><strong>Scale</strong></th>
<th><strong>Types</strong></th>
<th><strong>Examples</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>scale_color_</code></td>
<td><code>identity</code></td>
<td><code>scale_fill_continuous</code></td>
</tr>
<tr class="even">
<td><code>scale_fill_</code></td>
<td><code>manual</code></td>
<td><code>scale_color_discrete</code></td>
</tr>
<tr class="odd">
<td><code>scale_size_</code></td>
<td><code>continuous</code></td>
<td><code>scale_size_manual</code></td>
</tr>
<tr class="even">
<td></td>
<td><code>discrete</code></td>
<td><code>scale_size_discrete</code></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><code>scale_shape_</code></td>
<td><code>discrete</code></td>
<td><code>scale_shape_discrete</code></td>
</tr>
<tr class="odd">
<td><code>scale_linetype_</code></td>
<td><code>identity</code></td>
<td><code>scale_shape_manual</code></td>
</tr>
<tr class="even">
<td></td>
<td><code>manual</code></td>
<td><code>scale_linetype_discrete</code></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><code>scale_x_</code></td>
<td><code>continuous</code></td>
<td><code>scale_x_continuous</code></td>
</tr>
<tr class="odd">
<td><code>scale_y_</code></td>
<td><code>discrete</code></td>
<td><code>scale_y_discrete</code></td>
</tr>
<tr class="even">
<td></td>
<td><code>reverse</code></td>
<td><code>scale_x_log</code></td>
</tr>
<tr class="odd">
<td></td>
<td><code>log</code></td>
<td><code>scale_y_reverse</code></td>
</tr>
<tr class="even">
<td></td>
<td><code>date</code></td>
<td><code>scale_x_date</code></td>
</tr>
<tr class="odd">
<td></td>
<td><code>datetime</code></td>
<td><code>scale_y_datetime</code></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Note that in RStudio you can type <code>scale_</code> followed by TAB to get the whole list of available scales.</p>
</div>
</div>
<div id="exercise-2-1" class="section level2">
<h2><span class="header-section-number">3.8</span> Exercise 2</h2>
<ol style="list-style-type: decimal">
<li>Create a scatter plot with CPI on the x axis and HDI on the y axis. Color the points to indicate region.</li>
<li>Modify the x, y, and color scales so that they have more easily-understood names (e.g., spell out “Human development Index” instead of “HDI”).</li>
<li>Modify the color scale to use specific values of your choosing. Hint: see <code>?scale_color_manual</code>.</li>
</ol>
</div>
<div id="faceting" class="section level2">
<h2><span class="header-section-number">3.9</span> Faceting</h2>
<div id="what-is-faceting" class="section level3">
<h3><span class="header-section-number">3.9.1</span> What is faceting?</h3>
<ul>
<li>Faceting is <code>ggplot2</code> parlance for <strong>small multiples</strong></li>
<li>The idea is to create separate graphs for subsets of data</li>
<li><code>ggplot2</code> offers two functions for creating small multiples:
<ol style="list-style-type: decimal">
<li><code>facet_wrap()</code>: define subsets as the levels of a single grouping variable</li>
<li><code>facet_grid()</code>: define subsets as the crossing of two grouping variables</li>
</ol></li>
<li>Facilitates comparison among plots, not just of geoms within a plot</li>
</ul>
</div>
<div id="what-is-the-trend-in-housing-prices-in-each-state" class="section level3">
<h3><span class="header-section-number">3.9.2</span> What is the trend in housing prices in each state?</h3>
<ul>
<li>Start by using a technique we already know–map State to color:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p5 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(housing, <span class="kw">aes</span>(<span class="dt">x =</span> Date, <span class="dt">y =</span> Home.Value))
p5 <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">color =</span> State))  </code></pre></div>
<p>There are two problems here;there are too many states to distinguish each one by color, and the lines obscure one another.</p>
</div>
<div id="faceting-to-the-rescue" class="section level3">
<h3><span class="header-section-number">3.9.3</span> Faceting to the rescue</h3>
<p>We can remedy the deficiencies of the previous plot by faceting by state rather than mapping state to color.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(p5 &lt;-<span class="st"> </span>p5 <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>() <span class="op">+</span>
<span class="st">   </span><span class="kw">facet_wrap</span>(<span class="op">~</span>State, <span class="dt">ncol =</span> <span class="dv">10</span>))</code></pre></div>
<p>There is also a <code>facet_grid()</code> function for faceting in two dimensions.</p>
</div>
</div>
<div id="themes" class="section level2">
<h2><span class="header-section-number">3.10</span> Themes</h2>
<div id="what-are-themes" class="section level3">
<h3><span class="header-section-number">3.10.1</span> What are themes?</h3>
<p>The <code>ggplot2</code> theme system handles non-data plot elements such as</p>
<ul>
<li>Axis labels</li>
<li>Plot background</li>
<li>Facet label backround</li>
<li>Legend appearance</li>
</ul>
<p>Built-in themes include:</p>
<ul>
<li><code>theme_gray()</code> (default)</li>
<li><code>theme_bw()</code></li>
<li><code>theme_classc()</code></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p5 <span class="op">+</span><span class="st"> </span><span class="kw">theme_linedraw</span>()</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p5 <span class="op">+</span><span class="st"> </span><span class="kw">theme_light</span>()</code></pre></div>
</div>
<div id="overriding-theme-defaults" class="section level3">
<h3><span class="header-section-number">3.10.2</span> Overriding theme defaults</h3>
<p>Specific theme elements can be overridden using <code>theme()</code>. For example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p5 <span class="op">+</span><span class="st"> </span><span class="kw">theme_minimal</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">text =</span> <span class="kw">element_text</span>(<span class="dt">color =</span> <span class="st">&quot;turquoise&quot;</span>))</code></pre></div>
<p>All theme options are documented in <code>?theme</code>.</p>
</div>
<div id="creating-and-saving-new-themes" class="section level3">
<h3><span class="header-section-number">3.10.3</span> Creating and saving new themes</h3>
<p>You can create new themes, as in the following example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">theme_new &lt;-<span class="st"> </span><span class="kw">theme_bw</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">plot.background =</span> <span class="kw">element_rect</span>(<span class="dt">size =</span> <span class="dv">1</span>, <span class="dt">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;black&quot;</span>),
        <span class="dt">text=</span><span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>, <span class="dt">family =</span> <span class="st">&quot;Serif&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;ivory&quot;</span>),
        <span class="dt">axis.text.y =</span> <span class="kw">element_text</span>(<span class="dt">colour =</span> <span class="st">&quot;purple&quot;</span>),
        <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">colour =</span> <span class="st">&quot;red&quot;</span>),
        <span class="dt">panel.background =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">&quot;pink&quot;</span>),
        <span class="dt">strip.background =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="kw">muted</span>(<span class="st">&quot;orange&quot;</span>)))

p5 <span class="op">+</span><span class="st"> </span>theme_new</code></pre></div>
</div>
</div>
<div id="the-1-faq" class="section level2">
<h2><span class="header-section-number">3.11</span> The #1 FAQ</h2>
<div id="map-aesthetic-to-different-columns" class="section level3">
<h3><span class="header-section-number">3.11.1</span> Map aesthetic to different columns</h3>
<p>The most frequently asked question goes something like this: <em>I have two variables in my data.frame, and I’d like to plot them as separate points, with different color depending on which variable it is. How do I do that?</em></p>
<p><strong>Wrong</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">housing.byyear &lt;-<span class="st"> </span><span class="kw">aggregate</span>(<span class="kw">cbind</span>(Home.Value, Land.Value) <span class="op">~</span><span class="st"> </span>Date, <span class="dt">data =</span> housing, mean)
<span class="kw">ggplot</span>(housing.byyear,
       <span class="kw">aes</span>(<span class="dt">x=</span>Date)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y=</span>Home.Value), <span class="dt">color=</span><span class="st">&quot;red&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y=</span>Land.Value), <span class="dt">color=</span><span class="st">&quot;blue&quot;</span>)

<span class="co">#</span></code></pre></div>
<p><strong>Right</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyr)
home.land.byyear &lt;-<span class="st"> </span><span class="kw">gather</span>(housing.byyear,
                           <span class="dt">value =</span> <span class="st">&quot;value&quot;</span>,
                           <span class="dt">key =</span> <span class="st">&quot;type&quot;</span>,
                           Home.Value, Land.Value)
<span class="kw">ggplot</span>(home.land.byyear,
       <span class="kw">aes</span>(<span class="dt">x=</span>Date,
           <span class="dt">y=</span>value,
           <span class="dt">color=</span>type)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>()</code></pre></div>
</div>
</div>
<div id="putting-it-all-together" class="section level2">
<h2><span class="header-section-number">3.12</span> Putting it all together</h2>
<div id="challenge-recreate-this-economist-graph" class="section level3">
<h3><span class="header-section-number">3.12.1</span> Challenge: recreate this <code>Economist</code> graph</h3>
<p><R/Rgraphics/images/Economist1.pdf></p>
<p>Graph source: <a href="http://www.economist.com/node/21541178" class="uri">http://www.economist.com/node/21541178</a></p>
<p>Building off of the graphics you created in the previous exercises, put the finishing touches to make it as close as possible to the original economist graph.</p>
</div>
<div id="challenge-solution" class="section level3">
<h3><span class="header-section-number">3.12.2</span> Challenge solution:</h3>
<p>Lets start by creating the basic scatter plot, then we can make a list of things that need to be added or changed. The basic plot loogs like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;dataSets/EconomistData.csv&quot;</span>)

pc1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(dat, <span class="kw">aes</span>(<span class="dt">x =</span> CPI, <span class="dt">y =</span> HDI, <span class="dt">color =</span> Region))
pc1 <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>()</code></pre></div>
<p>To complete this graph we need to:</p>
<ul>
<li>[ ] add a trend line</li>
<li>[ ] change the point shape to open circle</li>
<li>[ ] change the order and labels of Region</li>
<li>[ ] label select points</li>
<li>[ ] fix up the tick marks and labels</li>
<li>[ ] move color legend to the top</li>
<li>[ ] title, label axes, remove legend title</li>
<li>[ ] theme the graph with no vertical guides</li>
<li>[ ] add model R<sup>2</sup> (hard)</li>
<li>[ ] add sources note (hard)</li>
<li>[ ] final touches to make it perfect (use image editor for this)</li>
</ul>
<div id="adding-the-trend-line" class="section level4">
<h4><span class="header-section-number">3.12.2.1</span> Adding the trend line</h4>
<p>Adding the trend line is not too difficult, though we need to guess at the model being displyed on the graph. A little bit of trial and error leads to</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pc2 &lt;-<span class="st"> </span>pc1 <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">linetype =</span> <span class="st">&quot;r2&quot;</span>),
              <span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>,
              <span class="dt">formula =</span> y <span class="op">~</span><span class="st"> </span>x <span class="op">+</span><span class="st"> </span><span class="kw">log</span>(x), <span class="dt">se =</span> <span class="ot">FALSE</span>,
              <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>)
pc2 <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>()</code></pre></div>
<p>Notice that we put the <code>geom_line</code> layer first so that it will be plotted underneath the points, as was done on the original graph.</p>
</div>
<div id="use-open-points" class="section level4">
<h4><span class="header-section-number">3.12.2.2</span> Use open points</h4>
<p>This one is a little tricky. We know that we can change the shape with the <code>shape</code> argument, what what value do we set shape to? The example shown in <code>?shape</code> can help us:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## A look at all 25 symbols
df2 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span> , <span class="dt">y =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">25</span>, <span class="dt">z =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">25</span>)
s &lt;-<span class="st"> </span><span class="kw">ggplot</span>(df2, <span class="kw">aes</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y))
s <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">shape =</span> z), <span class="dt">size =</span> <span class="dv">4</span>) <span class="op">+</span><span class="st"> </span><span class="kw">scale_shape_identity</span>()
## While all symbols have a foreground colour, symbols 19-25 also take a
## background colour (fill)
s <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">shape =</span> z), <span class="dt">size =</span> <span class="dv">4</span>, <span class="dt">colour =</span> <span class="st">&quot;Red&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_shape_identity</span>()
s <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">shape =</span> z), <span class="dt">size =</span> <span class="dv">4</span>, <span class="dt">colour =</span> <span class="st">&quot;Red&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;Black&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_shape_identity</span>()</code></pre></div>
<p>This shows us that <em>shape 1</em> is an open circle, so</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pc2 <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">shape =</span> <span class="dv">1</span>, <span class="dt">size =</span> <span class="dv">4</span>)</code></pre></div>
<p>That is better, but unfortunately the size of the line around the points is much narrower than on the original.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(pc3 &lt;-<span class="st"> </span>pc2 <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">shape =</span> <span class="dv">1</span>, <span class="dt">size =</span> <span class="fl">2.5</span>, <span class="dt">stroke =</span> <span class="fl">1.25</span>))</code></pre></div>
</div>
<div id="labelling-points" class="section level4">
<h4><span class="header-section-number">3.12.2.3</span> Labelling points</h4>
<p>This one is tricky in a couple of ways. First, there is no attribute in the data that separates points that should be labelled from points that should not be. So the first step is to identify those points.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pointsToLabel &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Russia&quot;</span>, <span class="st">&quot;Venezuela&quot;</span>, <span class="st">&quot;Iraq&quot;</span>, <span class="st">&quot;Myanmar&quot;</span>, <span class="st">&quot;Sudan&quot;</span>,
                   <span class="st">&quot;Afghanistan&quot;</span>, <span class="st">&quot;Congo&quot;</span>, <span class="st">&quot;Greece&quot;</span>, <span class="st">&quot;Argentina&quot;</span>, <span class="st">&quot;Brazil&quot;</span>,
                   <span class="st">&quot;India&quot;</span>, <span class="st">&quot;Italy&quot;</span>, <span class="st">&quot;China&quot;</span>, <span class="st">&quot;South Africa&quot;</span>, <span class="st">&quot;Spane&quot;</span>,
                   <span class="st">&quot;Botswana&quot;</span>, <span class="st">&quot;Cape Verde&quot;</span>, <span class="st">&quot;Bhutan&quot;</span>, <span class="st">&quot;Rwanda&quot;</span>, <span class="st">&quot;France&quot;</span>,
                   <span class="st">&quot;United States&quot;</span>, <span class="st">&quot;Germany&quot;</span>, <span class="st">&quot;Britain&quot;</span>, <span class="st">&quot;Barbados&quot;</span>, <span class="st">&quot;Norway&quot;</span>, <span class="st">&quot;Japan&quot;</span>,
                   <span class="st">&quot;New Zealand&quot;</span>, <span class="st">&quot;Singapore&quot;</span>)</code></pre></div>
<p>Now we can label these points using <code>geom_text</code>, like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(pc4 &lt;-<span class="st"> </span>pc3 <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> Country),
            <span class="dt">color =</span> <span class="st">&quot;gray20&quot;</span>,
            <span class="dt">data =</span> <span class="kw">filter</span>(dat, Country <span class="op">%in%</span><span class="st"> </span>pointsToLabel)))</code></pre></div>
<p>This more or less gets the information across, but the labels overlap in a most unpleasing fashion. We can use the <code>ggrepel</code> package to make things better, but if you want perfection you will probably have to do some hand-adjustment.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">&quot;ggrepel&quot;</span>)
(pc4 &lt;-<span class="st"> </span>pc3 <span class="op">+</span>
<span class="st">   </span><span class="kw">geom_text_repel</span>(<span class="kw">aes</span>(<span class="dt">label =</span> Country),
                   <span class="dt">color =</span> <span class="st">&quot;gray20&quot;</span>,
                   <span class="dt">data =</span> <span class="kw">filter</span>(dat, Country <span class="op">%in%</span><span class="st"> </span>pointsToLabel),
                   <span class="dt">force =</span> <span class="dv">10</span>))</code></pre></div>
</div>
<div id="change-the-region-labels-and-order" class="section level4">
<h4><span class="header-section-number">3.12.2.4</span> Change the region labels and order</h4>
<p>Thinkgs are starting to come together. There are just a couple more things we need to add, and then all that will be left are themeing changes.</p>
<p>Comparing our graph to the original we notice that the labels and order of the Regions in the color legend differ. To correct this we need to change both the labels and order of the Region variable. We can do this with the <code>factor</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat<span class="op">$</span>Region &lt;-<span class="st"> </span><span class="kw">factor</span>(dat<span class="op">$</span>Region,
                     <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;EU W. Europe&quot;</span>,
                                <span class="st">&quot;Americas&quot;</span>,
                                <span class="st">&quot;Asia Pacific&quot;</span>,
                                <span class="st">&quot;East EU Cemt Asia&quot;</span>,
                                <span class="st">&quot;MENA&quot;</span>,
                                <span class="st">&quot;SSA&quot;</span>),
                     <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;OECD&quot;</span>,
                                <span class="st">&quot;Americas&quot;</span>,
                                <span class="st">&quot;Asia &amp;</span><span class="ch">\n</span><span class="st">Oceania&quot;</span>,
                                <span class="st">&quot;Central &amp;</span><span class="ch">\n</span><span class="st">Eastern Europe&quot;</span>,
                                <span class="st">&quot;Middle East &amp;</span><span class="ch">\n</span><span class="st">north Africa&quot;</span>,
                                <span class="st">&quot;Sub-Saharan</span><span class="ch">\n</span><span class="st">Africa&quot;</span>))</code></pre></div>
<p>Now when we construct the plot using these data the order should appear as it does in the original.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pc4<span class="op">$</span>data &lt;-<span class="st"> </span>dat
pc4</code></pre></div>
</div>
<div id="add-title-and-format-axes" class="section level4">
<h4><span class="header-section-number">3.12.2.5</span> Add title and format axes</h4>
<p>The next step is to add the title and format the axes. We do that using the <code>scales</code> system in ggplot2.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(grid)
(pc5 &lt;-<span class="st"> </span>pc4 <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;Corruption Perceptions Index, 2011 (10=least corrupt)&quot;</span>,
                     <span class="dt">limits =</span> <span class="kw">c</span>(.<span class="dv">9</span>, <span class="fl">10.5</span>),
                     <span class="dt">breaks =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;Human Development Index, 2011 (1=Best)&quot;</span>,
                     <span class="dt">limits =</span> <span class="kw">c</span>(<span class="fl">0.2</span>, <span class="fl">1.0</span>),
                     <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="fl">0.2</span>, <span class="fl">1.0</span>, <span class="dt">by =</span> <span class="fl">0.1</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_color_manual</span>(<span class="dt">name =</span> <span class="st">&quot;&quot;</span>,
                     <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;#24576D&quot;</span>,
                                <span class="st">&quot;#099DD7&quot;</span>,
                                <span class="st">&quot;#28AADC&quot;</span>,
                                <span class="st">&quot;#248E84&quot;</span>,
                                <span class="st">&quot;#F2583F&quot;</span>,
                                <span class="st">&quot;#96503F&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Corruption and Human development&quot;</span>))</code></pre></div>
</div>
<div id="theme-tweaks" class="section level4">
<h4><span class="header-section-number">3.12.2.6</span> Theme tweaks</h4>
<p>Our graph is almost there. To finish up, we need to adjust some of the theme elements, and label the axes and legends. This part usually involves some trial and error as you figure out where things need to be positioned. To see what these various theme settings do you can change them and observe the results.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(grid) <span class="co"># for the &#39;unit&#39; function</span>
(pc6 &lt;-<span class="st"> </span>pc5 <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span><span class="st"> </span><span class="co"># start with a minimal theme and add what we need</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">text =</span> <span class="kw">element_text</span>(<span class="dt">color =</span> <span class="st">&quot;gray20&quot;</span>),
        <span class="dt">legend.position =</span> <span class="kw">c</span>(<span class="st">&quot;top&quot;</span>), <span class="co"># position the legend in the upper left </span>
        <span class="dt">legend.direction =</span> <span class="st">&quot;horizontal&quot;</span>,
        <span class="dt">legend.justification =</span> <span class="fl">0.1</span>, <span class="co"># anchor point for legend.position.</span>
        <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">11</span>, <span class="dt">color =</span> <span class="st">&quot;gray10&quot;</span>),
        <span class="dt">axis.text =</span> <span class="kw">element_text</span>(<span class="dt">face =</span> <span class="st">&quot;italic&quot;</span>),
        <span class="dt">axis.title.x =</span> <span class="kw">element_text</span>(<span class="dt">vjust =</span> <span class="op">-</span><span class="dv">1</span>), <span class="co"># move title away from axis</span>
        <span class="dt">axis.title.y =</span> <span class="kw">element_text</span>(<span class="dt">vjust =</span> <span class="dv">2</span>), <span class="co"># move away for axis</span>
        <span class="dt">axis.ticks.y =</span> <span class="kw">element_blank</span>(), <span class="co"># element_blank() is how we remove elements</span>
        <span class="dt">axis.line =</span> <span class="kw">element_line</span>(<span class="dt">color =</span> <span class="st">&quot;gray40&quot;</span>, <span class="dt">size =</span> <span class="fl">0.5</span>),
        <span class="dt">axis.line.y =</span> <span class="kw">element_blank</span>(),
        <span class="dt">panel.grid.major =</span> <span class="kw">element_line</span>(<span class="dt">color =</span> <span class="st">&quot;gray50&quot;</span>, <span class="dt">size =</span> <span class="fl">0.5</span>),
        <span class="dt">panel.grid.major.x =</span> <span class="kw">element_blank</span>()
        ))</code></pre></div>
</div>
<div id="add-model-r2-and-source-note" class="section level4">
<h4><span class="header-section-number">3.12.2.7</span> Add model R<sup>2</sup> and source note</h4>
<p>The last bit of information that we want to have on the graph is the variance explained by the model represented by the trend line. Lets fit that model and pull out the R<sup>2</sup> first, then think about how to get it onto the graph.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mR2 &lt;-<span class="st"> </span><span class="kw">summary</span>(<span class="kw">lm</span>(HDI <span class="op">~</span><span class="st"> </span>CPI <span class="op">+</span><span class="st"> </span><span class="kw">log</span>(CPI), <span class="dt">data =</span> dat))<span class="op">$</span>r.squared
mR2 &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="kw">format</span>(mR2, <span class="dt">digits =</span> <span class="dv">2</span>), <span class="st">&quot;%&quot;</span>)</code></pre></div>
<p>OK, now that we’ve calculated the values, let’s think about how to get them on the graph. ggplot2 has an <code>annotate</code> function, but this is not convenient for adding elements outside the plot area. The <code>grid</code> package has nice functions for doing this, so we’ll use those.</p>
<p>And here it is, our final version!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">png</span>(<span class="dt">file =</span> <span class="st">&quot;R/Rgraphics/images/econScatter10.png&quot;</span>, <span class="dt">width =</span> <span class="dv">700</span>, <span class="dt">height =</span> <span class="dv">500</span>)
p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(dat,
            <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> CPI, <span class="dt">y =</span> HDI)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">linetype =</span> <span class="st">&quot;r2&quot;</span>),
              <span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>,
              <span class="dt">formula =</span> y <span class="op">~</span><span class="st"> </span>x <span class="op">+</span><span class="st"> </span><span class="kw">log</span>(x), <span class="dt">se =</span> <span class="ot">FALSE</span>,
              <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">color =</span> Region),
             <span class="dt">shape =</span> <span class="dv">1</span>,
             <span class="dt">size =</span> <span class="dv">4</span>,
             <span class="dt">stroke =</span> <span class="fl">1.5</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_text_repel</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">label =</span> Country, <span class="dt">alpha =</span> labels),
                  <span class="dt">color =</span> <span class="st">&quot;gray20&quot;</span>,
                  <span class="dt">data =</span> <span class="kw">transform</span>(dat,
                                   <span class="dt">labels =</span> Country <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Russia&quot;</span>,
                                                           <span class="st">&quot;Venezuela&quot;</span>,
                                                           <span class="st">&quot;Iraq&quot;</span>,
                                                           <span class="st">&quot;Mayanmar&quot;</span>,
                                                           <span class="st">&quot;Sudan&quot;</span>,
                                                           <span class="st">&quot;Afghanistan&quot;</span>,
                                                           <span class="st">&quot;Congo&quot;</span>,
                                                           <span class="st">&quot;Greece&quot;</span>,
                                                           <span class="st">&quot;Argentinia&quot;</span>,
                                                           <span class="st">&quot;Italy&quot;</span>,
                                                           <span class="st">&quot;Brazil&quot;</span>,
                                                           <span class="st">&quot;India&quot;</span>,
                                                           <span class="st">&quot;China&quot;</span>,
                                                           <span class="st">&quot;South Africa&quot;</span>,
                                                           <span class="st">&quot;Spain&quot;</span>,
                                                           <span class="st">&quot;Cape Verde&quot;</span>,
                                                           <span class="st">&quot;Bhutan&quot;</span>,
                                                           <span class="st">&quot;Rwanda&quot;</span>,
                                                           <span class="st">&quot;France&quot;</span>,
                                                           <span class="st">&quot;Botswana&quot;</span>,
                                                           <span class="st">&quot;France&quot;</span>,
                                                           <span class="st">&quot;US&quot;</span>,
                                                           <span class="st">&quot;Germany&quot;</span>,
                                                           <span class="st">&quot;Britain&quot;</span>,
                                                           <span class="st">&quot;Barbados&quot;</span>,
                                                           <span class="st">&quot;Japan&quot;</span>,
                                                           <span class="st">&quot;Norway&quot;</span>,
                                                           <span class="st">&quot;New Zealand&quot;</span>,
                                                           <span class="st">&quot;Sigapore&quot;</span>))) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;Corruption Perception Index, 2011 (10=least corrupt)&quot;</span>,
                     <span class="dt">limits =</span> <span class="kw">c</span>(<span class="fl">1.0</span>, <span class="fl">10.0</span>),
                     <span class="dt">breaks =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;Human Development Index, 2011 (1=best)&quot;</span>,
                     <span class="dt">limits =</span> <span class="kw">c</span>(<span class="fl">0.2</span>, <span class="fl">1.0</span>),
                     <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="fl">0.2</span>, <span class="fl">1.0</span>, <span class="dt">by =</span> <span class="fl">0.1</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_color_manual</span>(<span class="dt">name =</span> <span class="st">&quot;&quot;</span>,
                     <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;#24576D&quot;</span>,
                                <span class="st">&quot;#099DD7&quot;</span>,
                                <span class="st">&quot;#28AADC&quot;</span>,
                                <span class="st">&quot;#248E84&quot;</span>,
                                <span class="st">&quot;#F2583F&quot;</span>,
                                <span class="st">&quot;#96503F&quot;</span>),
                     <span class="dt">guide =</span> <span class="kw">guide_legend</span>(<span class="dt">nrow =</span> <span class="dv">1</span>, <span class="dt">order=</span><span class="dv">1</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_alpha_discrete</span>(<span class="dt">range =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>),
                       <span class="dt">guide =</span> <span class="ot">FALSE</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_linetype</span>(<span class="dt">name =</span> <span class="st">&quot;&quot;</span>,
                 <span class="dt">breaks =</span> <span class="st">&quot;r2&quot;</span>,
                 <span class="dt">labels =</span> <span class="kw">list</span>(<span class="kw">bquote</span>(R<span class="op">^</span><span class="dv">2</span><span class="op">==</span>.(mR2))),
                 <span class="dt">guide =</span> <span class="kw">guide_legend</span>(<span class="dt">override.aes =</span> <span class="kw">list</span>(<span class="dt">linetype =</span> <span class="dv">1</span>, <span class="dt">size =</span> <span class="dv">2</span>, <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>), <span class="dt">order=</span><span class="dv">2</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Corruption and human development&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">caption=</span><span class="st">&quot;Sources: Transparency International; UN Human Development Report&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.border =</span> <span class="kw">element_blank</span>(),
        <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(),
        <span class="dt">panel.grid.major.y =</span> <span class="kw">element_line</span>(<span class="dt">color =</span> <span class="st">&quot;gray&quot;</span>),
        <span class="dt">text =</span> <span class="kw">element_text</span>(<span class="dt">color =</span> <span class="st">&quot;gray20&quot;</span>),
        <span class="dt">axis.title.x =</span> <span class="kw">element_text</span>(<span class="dt">face=</span><span class="st">&quot;italic&quot;</span>),
        <span class="dt">axis.title.y =</span> <span class="kw">element_text</span>(<span class="dt">face=</span><span class="st">&quot;italic&quot;</span>),
        <span class="dt">legend.position =</span> <span class="st">&quot;top&quot;</span>,
        <span class="dt">legend.direction =</span> <span class="st">&quot;horizontal&quot;</span>,
        <span class="dt">legend.box =</span> <span class="st">&quot;horizontal&quot;</span>,
        <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>),
        <span class="dt">plot.caption =</span> <span class="kw">element_text</span>(<span class="dt">hjust=</span><span class="dv">0</span>),
        <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">16</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>))
p

<span class="kw">dev.off</span>()</code></pre></div>
<p>Comparing it to the original suggests that we’ve got most of the important elements.</p>
</div>
</div>
</div>
<div id="exercise-solutions-2" class="section level2">
<h2><span class="header-section-number">3.13</span> Exercise solutions</h2>
<div id="ex-0-prototype-2" class="section level3">
<h3><span class="header-section-number">3.13.1</span> Ex 0: prototype</h3>
<ol style="list-style-type: decimal">
<li>Create a scatter plot with CPI on the x axis and HDI on the y axis.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(dat, <span class="kw">aes</span>(<span class="dt">x =</span> CPI, <span class="dt">y =</span> HDI)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Color the points in the previous plot blue.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(dat, <span class="kw">aes</span>(<span class="dt">x =</span> CPI, <span class="dt">y =</span> HDI)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">color =</span> <span class="st">&quot;blue&quot;</span>)</code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Color the points in the previous plot according to <em>Region</em>.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(dat, <span class="kw">aes</span>(<span class="dt">x =</span> CPI, <span class="dt">y =</span> HDI)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> Region))</code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Make the points bigger by setting size to 2</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(dat, <span class="kw">aes</span>(<span class="dt">x =</span> CPI, <span class="dt">y =</span> HDI)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> Region), <span class="dt">size =</span> <span class="dv">2</span>)</code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>Make the points bigger by setting size to 2</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(dat, <span class="kw">aes</span>(<span class="dt">x =</span> CPI, <span class="dt">y =</span> HDI)) <span class="op">+</span>
<span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> Region, <span class="dt">size =</span>  HDI.Rank))</code></pre></div>
</div>
<div id="ex-1-prototype-2" class="section level3">
<h3><span class="header-section-number">3.13.2</span> Ex 1: prototype</h3>
<ol style="list-style-type: decimal">
<li>Re-create a scatter plot with CPI on the x axis and HDI on the y axis (as you did in the previous exercise).</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(dat, <span class="kw">aes</span>(<span class="dt">x =</span> CPI, <span class="dt">y =</span> HDI)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Overlay a smoothing line on top of the scatter plot using <code>geom_smooth</code></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(dat, <span class="kw">aes</span>(<span class="dt">x =</span> CPI, <span class="dt">y =</span> HDI)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_smooth</span>()</code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Overlay a smoothing line on top of the scatter plot using <code>geom_smooth</code>, but use a linear model for the predictions. Hint: see <code>?stat_smooth</code>.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(dat, <span class="kw">aes</span>(<span class="dt">x =</span> CPI, <span class="dt">y =</span> HDI)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>)</code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Overlay a loess (method = “loess”) smoothling line on top of the scatter plot using <code>geom_line</code>. Hint: change the statistical transformation.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(dat, <span class="kw">aes</span>(<span class="dt">x =</span> CPI, <span class="dt">y =</span> HDI)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">stat =</span> <span class="st">&quot;smooth&quot;</span>, <span class="dt">method =</span> <span class="st">&quot;loess&quot;</span>)</code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>BONUS: Overlay a smoothing line on top of the scatter plot using the <em>loess</em> method, but make it less smooth. Hint: see <code>?loess</code>.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(dat, <span class="kw">aes</span>(<span class="dt">x =</span> CPI, <span class="dt">y =</span> HDI)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">span =</span> .<span class="dv">4</span>)</code></pre></div>
</div>
<div id="ex-2-prototype-1" class="section level3">
<h3><span class="header-section-number">3.13.3</span> Ex 2: prototype</h3>
<ol style="list-style-type: decimal">
<li>Create a scatter plot with CPI on the x axis and HDI on the y axis. Color the points to indicate region.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(dat, <span class="kw">aes</span>(<span class="dt">x =</span> CPI, <span class="dt">y =</span> HDI, <span class="dt">color =</span> <span class="st">&quot;Region&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Modify the x, y, and color scales so that they have more easily-understood names (e.g., spell out “Human development Index” instead of “HDI”).</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(dat, <span class="kw">aes</span>(<span class="dt">x =</span> CPI, <span class="dt">y =</span> HDI, <span class="dt">color =</span> <span class="st">&quot;Region&quot;</span>)) <span class="op">+</span>
<span class="kw">geom_point</span>() <span class="op">+</span>
<span class="kw">scale_x_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;Corruption Perception Index&quot;</span>) <span class="op">+</span>
<span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;Human Development Index&quot;</span>) <span class="op">+</span>
<span class="kw">scale_color_discrete</span>(<span class="dt">name =</span> <span class="st">&quot;Region of the world&quot;</span>)</code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Modify the color scale to use specific values of your choosing. Hint: see <code>?scale_color_manual</code>.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(dat, <span class="kw">aes</span>(<span class="dt">x =</span> CPI, <span class="dt">y =</span> HDI, <span class="dt">color =</span> <span class="st">&quot;Region&quot;</span>)) <span class="op">+</span>
<span class="kw">geom_point</span>() <span class="op">+</span>
<span class="kw">scale_x_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;Corruption Perception Index&quot;</span>) <span class="op">+</span>
<span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;Human Development Index&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_color_manual</span>(<span class="dt">name =</span> <span class="st">&quot;Region of the world&quot;</span>,
                     <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;#24576D&quot;</span>,
                                <span class="st">&quot;#099DD7&quot;</span>,
                                <span class="st">&quot;#28AADC&quot;</span>,
                                <span class="st">&quot;#248E84&quot;</span>,
                                <span class="st">&quot;#F2583F&quot;</span>,
                                <span class="st">&quot;#96503F&quot;</span>))</code></pre></div>
</div>
</div>
<div id="wrap-up-2" class="section level2">
<h2><span class="header-section-number">3.14</span> Wrap-up</h2>
<div id="feedback-2" class="section level3">
<h3><span class="header-section-number">3.14.1</span> Feedback</h3>
<p>These workshops are a work in progress, please provide any feedback to: <a href="mailto:help@iq.harvard.edu">help@iq.harvard.edu</a></p>
</div>
<div id="resources-2" class="section level3">
<h3><span class="header-section-number">3.14.2</span> Resources</h3>
<ul>
<li>IQSS
<ul>
<li><a href="https://dss.iq.harvard.edu/workshop-materials">Workshops</a></li>
<li><a href="https://dss.iq.harvard.edu/">Data Science Services</a></li>
<li><a href="https://iqss.github.io/dss-rce/">Research Computing Environment</a></li>
</ul></li>
<li>ggplot2
<ul>
<li>Mailing list: <a href="http://groups.google.com/group/ggplot2" class="uri">http://groups.google.com/group/ggplot2</a></li>
<li>Wiki: <a href="https://github.com/hadley/ggplot2/wiki" class="uri">https://github.com/hadley/ggplot2/wiki</a></li>
<li>Website: <a href="http://had.co.nz/ggplot2/" class="uri">http://had.co.nz/ggplot2/</a></li>
<li>StackOverflow: <a href="http://stackoverflow.com/questions/tagged/ggplot" class="uri">http://stackoverflow.com/questions/tagged/ggplot</a></li>
</ul></li>
</ul>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="Rmodels.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="RDataWrangling.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/IQSS/dss-workshops-redux/edit/master/R/Rgraphics/Rgraphics.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["IQSS_Workshops.pdf", "IQSS_Workshops.epub"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
